import Ie,{createContext,useRef,useState,useContext,useCallback,useEffect,useLayoutEffect,useMemo,cloneElement,Children,isValidElement}from'react';import {jsx,Fragment}from'react/jsx-runtime';var V={stiffness:100,damping:10,mass:1,velocity:0,restSpeed:.01,restDelta:.01,clamp:false};function ve(r,e,t,n){let{stiffness:i=100,damping:s=10,mass:o=1,restSpeed:a=.01,restDelta:c=.01}=n,u=t-r,f=Math.abs(u),l=Math.abs(e);if(f<=c&&l<=a)return {position:t,velocity:0,isRest:true};let p=1/60,m=i*u,d=l>1e-4?s*e:0,g=(m-d)/o,h=e+g*p,v=r+h*p,S=f<=c&&Math.abs(h)<=a;return {position:v,velocity:h,isRest:S}}var K=class{constructor(){this.animations=new Set;this.animationMap=new WeakMap;this.rafId=null;this.isRunning=false;this.lastTime=0;this.nextId=1;this.idMap=new WeakMap;this.frameListeners=new Set;this.registry=new FinalizationRegistry(e=>{this.cleanupCallbacks.forEach(t=>t(e));});this.cleanupCallbacks=new Set;this.tick=()=>{let e=performance.now(),t=e-this.lastTime,n=Math.min(t,64);this.lastTime=e;for(let s of this.frameListeners)s(n);let i=[];for(let s of this.animations){let o=s.deref();if(!o){i.push(s);continue}o.update(e),o.isComplete()&&(i.push(s),this.animationMap.delete(o),this.idMap.delete(o));}for(let s=0;s<i.length;s++)this.animations.delete(i[s]);this.animations.size>0?this.rafId=requestAnimationFrame(this.tick):this.stop();};}add(e){let t=this.idMap.get(e);if(t!==void 0)return t;let n=this.nextId++,i=new WeakRef(e);return this.animations.add(i),this.animationMap.set(e,i),this.idMap.set(e,n),this.registry.register(e,n),this.start(),n}remove(e){let t=this.animationMap.get(e);t&&(this.animations.delete(t),this.animationMap.delete(e),this.idMap.delete(e)),this.animations.size===0&&this.stop();}onCleanup(e){return this.cleanupCallbacks.add(e),()=>this.cleanupCallbacks.delete(e)}onFrame(e){return this.frameListeners.add(e),()=>this.frameListeners.delete(e)}start(){this.isRunning||(this.isRunning=true,this.lastTime=performance.now(),this.tick());}stop(){this.isRunning=false,this.rafId!==null&&(cancelAnimationFrame(this.rafId),this.rafId=null);}get size(){return this.animations.size}getAliveCount(){let e=0;for(let t of this.animations)t.deref()&&e++;return e}getFPS(){let e=performance.now()-this.lastTime;return e>0?Math.round(1e3/e):60}},k=new K;function F(r,e,t){let n=Math.min(e,t),i=Math.max(e,t);return Math.max(n,Math.min(i,r))}var xe=typeof process<"u"&&process.env?.NODE_ENV!=="production",ye=new Set;function _(r){!xe||ye.has(r)||(ye.add(r),console.warn(`[SpringKit] ${r}`));}function Se(r){if(!xe)return;let{stiffness:e=100,damping:t=10,mass:n=1}=r;e>400&&t<10&&_(`High stiffness (${e}) with low damping (${t}) may cause excessive oscillation. Consider increasing damping to at least ${Math.round(e/20)} for smoother animation.`),e<20&&_(`Very low stiffness (${e}) will result in sluggish animation. Consider using stiffness >= 50 for more responsive feel.`),t>e&&_(`Damping (${t}) is higher than stiffness (${e}), which removes the "springy" feel. Consider reducing damping for bouncier animation.`),n<=0&&_(`Mass must be positive. Got ${n}. Using default mass of 1.`),n>10&&_(`High mass (${n}) will make the animation very slow. Consider mass between 0.5 and 5 for typical use cases.`);}var J=class{constructor(e,t,n={}){this.state="idle";this.resolveComplete=null;Se(n),this.from=e,this.to=t,this.clampedFrom=e,this.clampedTo=t,this.position=e,this.velocity=n.velocity??0,this.target=t,this.config={...V,...n,stiffness:n.stiffness??V.stiffness,damping:n.damping??V.damping,mass:n.mass??V.mass,restSpeed:n.restSpeed??V.restSpeed,restDelta:n.restDelta??V.restDelta},this.finished=new Promise(i=>{this.resolveComplete=i;});}start(){return this.state==="running"?this:(this.state="running",this.config.onStart?.(),k.add(this),this)}stop(){this.state="idle",k.remove(this);}pause(){this.state==="running"&&(this.state="paused",k.remove(this));}resume(){this.state==="paused"&&(this.state="running",k.add(this));}reverse(){let e=this.from;this.from=this.to,this.to=e,this.clampedFrom=this.from,this.clampedTo=this.to,this.target=this.to;}set(e){this.to=e,this.clampedTo=e,this.target=e;}setWithVelocity(e,t){this.from=this.position,this.clampedFrom=this.position,this.to=e,this.clampedTo=e,this.target=e,t!==void 0&&(this.velocity=t),this.state!=="running"&&this.start();}update(e){if(this.state!=="running")return;let t=ve(this.position,this.velocity,this.target,this.config);if(this.position=t.position,this.velocity=t.velocity,this.config.clamp){let n=Math.min(this.clampedFrom,this.clampedTo),i=Math.max(this.clampedFrom,this.clampedTo);this.position=F(this.position,n,i);}this.config.onUpdate?.(this.position),t.isRest&&(this.state="complete",k.remove(this),this.position=this.target,this.config.onUpdate?.(this.position),this.config.onComplete?.(),this.config.onRest?.(),this.resolveComplete?.());}isAnimating(){return this.state==="running"}isPaused(){return this.state==="paused"}isComplete(){return this.state==="complete"}getValue(){return this.position}getVelocity(){return this.velocity}destroy(){this.stop(),this.config.onUpdate=void 0,this.config.onStart=void 0,this.config.onComplete=void 0,this.config.onRest=void 0;}};function Te(r,e,t){return new J(r,e,t)}var Q=class{constructor(e,t={}){this.currentAnimation=null;this.subscribers=new Set;this.resolveComplete=null;this.value=e,this.config={...V,...t},this.finishedPromise=new Promise(n=>{this.resolveComplete=n;});}get(){return this.value}getVelocity(){return this.currentAnimation?.getVelocity()??0}set(e,t={}){this.currentAnimation&&(this.currentAnimation.destroy(),this.currentAnimation=null),this.finishedPromise=new Promise(o=>{this.resolveComplete=o;});let n={...this.config,...t},i=n.onUpdate,s=n.onComplete;this.currentAnimation=Te(this.value,e,{...n,onUpdate:o=>{this.value=o,this.notify(),i?.(o);},onComplete:()=>{s?.(),this.resolveComplete&&this.resolveComplete();}}),this.currentAnimation.start();}jump(e){this.currentAnimation&&(this.currentAnimation.destroy(),this.currentAnimation=null),this.value=e,this.notify();}subscribe(e){return this.subscribers.add(e),e(this.value),()=>{this.subscribers.delete(e);}}isAnimating(){return this.currentAnimation?.isAnimating()??false}get finished(){return this.finishedPromise}notify(){for(let e of this.subscribers)e(this.value);}destroy(){this.currentAnimation?.destroy(),this.currentAnimation=null,this.subscribers.clear();}};function M(r,e){return new Q(r,e)}var Z=class{constructor(e,t={}){this.subscribers=new Set;this.resolveComplete=null;this.config={...V,...t},this.values=new Map;for(let[n,i]of Object.entries(e)){let s=M(i,this.config);s.subscribe(()=>this.notify()),this.values.set(n,s);}this.finishedPromise=Promise.resolve(),this.resetPromise();}resetPromise(){this.finishedPromise=new Promise(e=>{this.resolveComplete=e;});}get(){let e={};for(let[t,n]of this.values)e[t]=n.get();return e}getValue(e){return this.values.get(e)?.get()??0}set(e,t={}){this.resetPromise();let n=[];for(let[i,s]of Object.entries(e)){let o=this.values.get(i);o&&(o.set(s,t),n.push(o.finished));}Promise.all(n).then(()=>{this.resolveComplete&&this.resolveComplete();});}jump(e){for(let[t,n]of Object.entries(e)){let i=this.values.get(t);i&&i.jump(n);}}subscribe(e){return this.subscribers.add(e),e(this.get()),()=>this.subscribers.delete(e)}isAnimating(){for(let e of this.values.values())if(e.isAnimating())return  true;return  false}get finished(){return this.finishedPromise}notify(){let e=this.get();for(let t of this.subscribers)t(e);}destroy(){for(let e of this.values.values())e.destroy();this.subscribers.clear();}};function D(r,e){return new Z(r,e)}var ee=class{constructor(e,t={}){this.subscribers=new Set;this.frameCount=0;this.pendingUpdates=new Map;let{followDelay:n=2,...i}=t;this.followDelay=n,this.leader=M(0,i),this.springs=[];for(let s=0;s<e;s++){let o=M(0,i);this.springs.push(o);}this.leader.subscribe(()=>{this.frameCount++,this.scheduleFollowerUpdates();});}scheduleFollowerUpdates(){let e=this.leader.get();for(let t=0;t<this.springs.length;t++){let n=(t+1)*this.followDelay,i=this.frameCount+n;this.pendingUpdates.set(t,i),this.scheduleFollowerUpdate(t,e,i,n);}}scheduleFollowerUpdate(e,t,n,i){let s=this.frameCount,o=n-s;if(o<=0)this.springs[e].set(t);else {let a=Math.max(o*16,0);setTimeout(()=>{this.pendingUpdates.get(e)===n&&this.springs[e].set(t);},a);}}set(e){this.leader.set(e);}jump(e){this.leader.jump(e);for(let t of this.springs)t.jump(e);}getValues(){return this.springs.map(e=>e.get())}subscribe(e){this.subscribers.add(e);let t=[];for(let n of this.springs)t.push(n.subscribe(()=>{this.notify();}));return e(this.getValues()),()=>{this.subscribers.delete(e);for(let n of t)n();}}notify(){let e=this.getValues();for(let t of this.subscribers)t(e);}destroy(){this.leader.destroy();for(let e of this.springs)e.destroy();this.subscribers.clear(),this.pendingUpdates.clear();}};function te(r,e){return new ee(r,e)}var Ne={axis:"both",rubberBand:false,rubberBandFactor:.5,stiffness:200,damping:20,mass:1,restSpeed:.01,restDelta:.01,clamp:false},ne=class{constructor(e,t={}){this.enabled=true;this.position={x:0,y:0};this.isDragging=false;this.startPosition={x:0,y:0};this.pointerStart={x:0,y:0};this.lastPosition={x:0,y:0};this.lastTime=0;this.velocity={x:0,y:0};this.onPointerDown=e=>{!this.enabled||e.button!==0||(this.isDragging=true,this.startPosition={...this.position},this.pointerStart={x:e.clientX,y:e.clientY},this.lastPosition={x:e.clientX,y:e.clientY},this.lastTime=performance.now(),this.velocity={x:0,y:0},this.element.setPointerCapture(e.pointerId),this.element.addEventListener("pointermove",this.onPointerMove),this.element.addEventListener("pointerup",this.onPointerUp),this.element.addEventListener("pointercancel",this.onPointerUp),this.config.onDragStart&&this.config.onDragStart(e));};this.onPointerMove=e=>{let t=performance.now(),n=t-this.lastTime;this.velocity={x:(e.clientX-this.lastPosition.x)/Math.max(n,1),y:(e.clientY-this.lastPosition.y)/Math.max(n,1)},this.lastPosition={x:e.clientX,y:e.clientY},this.lastTime=t;let i=this.startPosition.x+(e.clientX-this.pointerStart.x),s=this.startPosition.y+(e.clientY-this.pointerStart.y);this.config.bounds&&(i=this.applyBounds(i,this.config.bounds.left??-1/0,this.config.bounds.right??1/0),s=this.applyBounds(s,this.config.bounds.top??-1/0,this.config.bounds.bottom??1/0)),this.config.axis==="x"?s=0:this.config.axis==="y"&&(i=0),this.position={x:i,y:s},this.config.onDrag&&this.config.onDrag(i,s,e),this.config.onUpdate&&this.config.onUpdate(i,s);};this.onPointerUp=e=>{this.isDragging=false,this.element.releasePointerCapture(e.pointerId),this.element.removeEventListener("pointermove",this.onPointerMove),this.element.removeEventListener("pointerup",this.onPointerUp),this.element.removeEventListener("pointercancel",this.onPointerUp),this.release(this.velocity.x*16,this.velocity.y*16),this.config.onDragEnd&&this.config.onDragEnd(this.position.x,this.position.y,this.velocity);};this.element=e,this.config={...Ne,...t};let n={stiffness:this.config.stiffness,damping:this.config.damping,mass:this.config.mass,restSpeed:this.config.restSpeed,restDelta:this.config.restDelta,clamp:this.config.clamp};this.springX=M(0,n),this.springY=M(0,n),this.springX.subscribe(()=>{this.isDragging||(this.position.x=this.springX.get(),this.config.onUpdate&&this.config.onUpdate(this.position.x,this.position.y));}),this.springY.subscribe(()=>{this.isDragging||(this.position.y=this.springY.get(),this.config.onUpdate&&this.config.onUpdate(this.position.x,this.position.y));}),this.setupPointerEvents();}setupPointerEvents(){this.element.addEventListener("pointerdown",this.onPointerDown);}applyBounds(e,t,n){if(!isFinite(t)&&!isFinite(n))return e;let i=isFinite(t)?t:-1/0,s=isFinite(n)?n:1/0;if(this.config.rubberBand){let o=this.config.rubberBandFactor||.5;if(e<i)return i-(i-e)*o;if(e>s)return s+(e-s)*o}return F(e,i,s)}enable(){this.enabled=true;}disable(){this.enabled=false,this.isDragging&&(this.isDragging=false);}isEnabled(){return this.enabled}reset(){this.springX.jump(0),this.springY.jump(0),this.position={x:0,y:0},this.config.onUpdate&&this.config.onUpdate(0,0);}getPosition(){return {...this.position}}setPosition(e,t){this.position={x:e,y:t},this.springX.jump(e),this.springY.jump(t);}release(e,t){if(this.config.bounds){let{left:n=-1/0,right:i=1/0,top:s=-1/0,bottom:o=1/0}=this.config.bounds,a=F(this.position.x,n,i),c=F(this.position.y,s,o);a!==this.position.x&&this.springX.set(a,{velocity:e}),c!==this.position.y&&this.springY.set(c,{velocity:t});}}destroy(){this.element.removeEventListener("pointerdown",this.onPointerDown),this.springX.destroy(),this.springY.destroy();}};function re(r,e){return new ne(r,e)}var H=class{constructor(e,t={}){this._velocity=0;this._subscribers=new Set;this._eventListeners=new Map;this._springValue=null;this._isAnimating=false;this._destroyed=false;this._value=e,this._springConfig=t.spring??{stiffness:100,damping:15},typeof e=="number"&&(this._springValue=M(e,{...this._springConfig,onUpdate:n=>{this._destroyed||(this._value=n,this._velocity=this._springValue?.getVelocity()??0,this._notify());}}));}get(){return this._value}getVelocity(){return this._velocity}isAnimating(){return this._isAnimating}set(e,t=true){if(!this._destroyed)if(typeof e=="number"&&this._springValue&&t){this._isAnimating=true,this._emit("animationStart"),this._springValue.set(e);let n=()=>{this._springValue&&Math.abs(this._springValue.getVelocity())<.01?(this._isAnimating=false,this._emit("animationEnd")):this._isAnimating&&requestAnimationFrame(n);};requestAnimationFrame(n);}else this._value=e,this._velocity=0,this._notify();}jump(e){this._destroyed||(this._value=e,this._velocity=0,typeof e=="number"&&this._springValue&&this._springValue.jump(e),this._isAnimating=false,this._notify());}stop(){this._springValue&&this._springValue.jump(this._springValue.get()),this._isAnimating=false,this._emit("animationEnd");}subscribe(e){return this._subscribers.add(e),e(this._value),()=>{this._subscribers.delete(e);}}on(e,t){return this._eventListeners.has(e)||this._eventListeners.set(e,new Set),this._eventListeners.get(e).add(t),()=>{this._eventListeners.get(e)?.delete(t);}}setConfig(e){this._springConfig={...this._springConfig,...e};}destroy(){this._destroyed=true,this._subscribers.clear(),this._eventListeners.clear(),this._springValue&&(this._springValue.destroy(),this._springValue=null);}_notify(){this._subscribers.forEach(e=>{try{e(this._value);}catch(t){console.error("MotionValue subscriber error:",t);}}),this._emit("change");}_emit(e){this._eventListeners.get(e)?.forEach(t=>{try{t();}catch(n){console.error(`MotionValue ${e} listener error:`,n);}});}};function C(r,e){return new H(r,e)}function Me(r,e){let t=new H(e(r.get()));return r.subscribe(n=>{t.jump(e(n));}),t}function ze(r,e,t,n={}){let[i,s]=e,[o,a]=t;return Me(r,c=>{let u=(c-i)/(s-i);return n.clamp&&(u=Math.max(0,Math.min(1,u))),o+u*(a-o)})}function Je(r,e={}){let t=useRef(null),[,n]=useState({}),i=useRef(true),s=useRef(JSON.stringify(r));return t.current||(t.current=D(r,e),t.current.subscribe(()=>n({}))),useEffect(()=>{if(i.current){i.current=false;return}let o=JSON.stringify(r);o!==s.current&&(t.current?.set(r,e),s.current=o);},[JSON.stringify(r)]),useEffect(()=>()=>t.current?.destroy(),[]),t.current.get()}function et(r,e={}){let t=useRef(null);return t.current||(t.current=M(r,e)),useEffect(()=>()=>t.current?.destroy(),[]),t.current}function it(r,e,t={}){let n=useRef([]),[,i]=useState({});return useEffect(()=>{n.current.forEach(s=>s?.destroy()),n.current=[];for(let s=0;s<r;s++){let o=e(s),a=o.from??o.values,c=D(a,{...t,...o.config});c.subscribe(()=>i({})),n.current.push(c),setTimeout(()=>{c.set(o.values);},o.delay??0);}return ()=>{n.current.forEach(s=>s?.destroy());}},[r,t]),n.current.map(s=>s?.get()??{})}function st(r,e,t={}){let n=useRef(null),[i,s]=useState(()=>Array.from({length:r},()=>({...e}))),o=useRef(true),a=useRef(JSON.stringify(e));return useEffect(()=>{let c=Object.keys(e),u=new Map;c.forEach(l=>{let p=[],m=e[l];for(let d=0;d<r;d++){let g=M(m,t);p.push(g);}u.set(l,p);}),n.current=u;let f=[];return u.forEach((l,p)=>{l.forEach((m,d)=>{let g=m.subscribe(()=>{s(h=>{let v=[...h];v[d]||(v[d]={...e});let S={...v[d]};return u.forEach((E,A)=>{S[A]=E[d].get();}),v[d]=S,v});});f.push(g);});}),()=>{f.forEach(l=>l()),u.forEach(l=>{l.forEach(p=>p.destroy());}),n.current=null;}},[r]),useEffect(()=>{if(!n.current)return;let c=JSON.stringify(e);if(o.current){o.current=false,a.current=c;return}if(c===a.current)return;a.current=c;let u=Object.keys(e),f=50;u.forEach(l=>{let p=n.current?.get(l);if(!p)return;let m=e[l];p.forEach((d,g)=>{setTimeout(()=>{d.set(m,t);},g*f);});});},[JSON.stringify(e),t.stiffness,t.damping]),i}function at(r={}){let e=useRef(null),t=useRef({x:0,y:0}),[n,i]=useState(null),[s,o]=useState(false),[,a]=useState({}),c=useRef(r);c.current=r;let u=p=>{i(p);};useEffect(()=>(e.current&&(e.current.destroy(),e.current=null),n&&(e.current=re(n,{...c.current,onDragStart:p=>{o(true),c.current.onDragStart?.(p);},onDragEnd:(p,m,d)=>{o(false),c.current.onDragEnd?.(p,m,d);},onUpdate:(p,m)=>{t.current={x:p,y:m},a({}),c.current.onUpdate?.(p,m);}})),()=>{e.current?.destroy(),e.current=null;}),[n]);let f=p=>{let m=p.x??t.current.x,d=p.y??t.current.y;e.current?.setPosition(m,d);},l=()=>{e.current?.reset(),t.current={x:0,y:0},a({});};return [t.current,{ref:u,set:f,reset:l,isDragging:s}]}function lt(r){let e=useRef({isDragging:false,startX:0,startY:0,currentX:0,currentY:0});return {onPointerDown:o=>{e.current={isDragging:true,startX:o.clientX,startY:o.clientY,currentX:o.clientX,currentY:o.clientY};},onPointerMove:o=>{if(!e.current.isDragging)return;let a=o.clientX-e.current.startX,c=o.clientY-e.current.startY;r.onDrag?.({x:a,y:c}),e.current.currentX=o.clientX,e.current.currentY=o.clientY;},onPointerUp:()=>{e.current.isDragging=false;},onPointerCancel:()=>{e.current.isDragging=false;}}}var R=createContext(null);R.displayName="PresenceContext";function pt(){let r=useContext(R);return r===null?[true,()=>{}]:[r.isPresent,r.safeToRemove]}function mt(){let r=useContext(R);return r===null?true:r.isPresent}function dt(){return useContext(R)?.custom}function we(r,e){let t=useRef(null);return t.current===null&&(t.current=C(r,e)),useEffect(()=>()=>{t.current?.destroy();},[]),t.current}function ht(r){let[e,t]=useState(r.get());return useEffect(()=>r.subscribe(i=>{t(i);}),[r]),e}function bt(r,e){let t=we(r,e);return useEffect(()=>{t.set(r);},[r,t]),t}function vt(r,e){let t=useRef(null);if(t.current===null){let n={};for(let i in r)if(Object.prototype.hasOwnProperty.call(r,i)){let s=r[i];n[i]=C(s,e);}t.current=n;}return useEffect(()=>()=>{if(t.current){let n=t.current;for(let i in n)Object.prototype.hasOwnProperty.call(n,i)&&n[i].destroy();}},[]),t.current}function yt(r,e,t,n){let i=useRef(null),s=useRef(null),o=useMemo(()=>{if(typeof e=="function")return e;if(!t)throw new Error("useTransform: outputRange is required when using range mapping");let a=e;return typeof t[0]=="number"?c=>{let u=0;for(;u<a.length-1;u++){let g=a[u+1];if(g!==void 0&&c<=g)break}let f=a[u]??0,l=a[Math.min(u+1,a.length-1)]??1,p=t[u]??0,m=t[Math.min(u+1,t.length-1)]??1,d=l!==f?(c-f)/(l-f):0;return n?.ease&&(d=n.ease(d)),n?.clamp&&(d=Math.max(0,Math.min(1,d))),p+d*(m-p)}:c=>{let u=0;for(;u<a.length-1;u++){let m=a[u+1];if(m!==void 0&&c<=m)break}let f=a[u]??0,l=a[u+1]??1;return (l!==f?(c-f)/(l-f):0)<.5?t[u]:t[u+1]}},[e,t,n?.clamp,n?.ease]);return i.current===null&&(i.current=C(o(r.get()))),useEffect(()=>(s.current=r.subscribe(a=>{i.current?.jump(o(a));}),()=>{s.current?.();}),[r,o]),useEffect(()=>()=>{i.current?.destroy();},[]),i.current}function xt(r,e){let t=useRef(null),n=useRef([]),i=()=>r.map(s=>s.get());return t.current===null&&(t.current=C(e(i()))),useEffect(()=>(n.current=r.map(s=>s.subscribe(()=>{t.current?.jump(e(i()));})),()=>{n.current.forEach(s=>s());}),[r,e]),useEffect(()=>()=>{t.current?.destroy();},[]),t.current}function St(r,e){let t=useRef(null),n=useRef(null);return t.current===null&&(t.current=C(e(r.getVelocity()))),useEffect(()=>{let i=()=>{t.current?.jump(e(r.getVelocity())),n.current=requestAnimationFrame(i);};return n.current=requestAnimationFrame(i),()=>{n.current&&cancelAnimationFrame(n.current);}},[r,e]),useEffect(()=>()=>{t.current?.destroy();},[]),t.current}function Tt(r,e,t,n){let i=useRef(null),s=useRef(null),o=useMemo(()=>a=>{let c=0;for(;c<e.length-1;c++){let d=e[c+1];if(d!==void 0&&a<=d)break}let u=e[c]??0,f=e[c+1]??1,l=t[c]??0,p=t[c+1]??1,m=(a-u)/(f-u);return l+m*(p-l)},[e,t]);return i.current===null&&(i.current=C(o(r.get()),{spring:n})),useEffect(()=>(s.current=r.subscribe(a=>{i.current?.set(o(a));}),()=>{s.current?.();}),[r,o]),useEffect(()=>()=>{i.current?.destroy();},[]),i.current}var x=typeof window<"u",Ee=!x,Pt=x?useLayoutEffect:useEffect;function Vt(){return !!Ee}function wt(r){return x&&typeof requestAnimationFrame<"u"?requestAnimationFrame(r):0}function Rt(r){x&&typeof cancelAnimationFrame<"u"&&cancelAnimationFrame(r);}function Et(r={}){let{once:e=false,amount:t="some",margin:n="0px",root:i}=r,s=useRef(null),[o,a]=useState(false),[c,u]=useState(),f=useRef(false);return useEffect(()=>{if(!x)return;let l=s.current;if(!l||e&&f.current)return;let p;t==="some"?p=0:t==="all"?p=1:p=t;let m=new IntersectionObserver(d=>{let[g]=d;if(g){let h=g.isIntersecting;u(g),a(h),h&&e&&(f.current=true,m.disconnect());}},{root:i?.current??null,rootMargin:n,threshold:p});return m.observe(l),()=>{m.disconnect();}},[e,t,n,i]),{ref:s,inView:o,entry:c}}function At(r,e={}){let t=useRef(null),n=useRef(r),i=useRef(false);n.current=r;let{once:s=false,amount:o="some",margin:a="0px",root:c}=e;return useEffect(()=>{if(!x)return;let u=t.current;if(!u||s&&i.current)return;let f;o==="some"?f=0:o==="all"?f=1:f=o;let l=new IntersectionObserver(p=>{let[m]=p;m?.isIntersecting&&(n.current(m),s&&(i.current=true,l.disconnect()));},{root:c?.current??null,rootMargin:a,threshold:f});return l.observe(u),()=>l.disconnect()},[s,o,a,c]),t}function Dt(r={}){let e=useRef(new Map),[t,n]=useState(new Map),i=useRef(null),{once:s=false,amount:o="some",margin:a="0px",root:c}=r;return useEffect(()=>{if(!x)return;let l;return o==="some"?l=0:o==="all"?l=1:l=o,i.current=new IntersectionObserver(p=>{n(m=>{let d=new Map(m);return p.forEach(g=>{let h=g.target.dataset.inviewId;h&&(d.set(h,g.isIntersecting),g.isIntersecting&&s&&i.current?.unobserve(g.target));}),d});},{root:c?.current??null,rootMargin:a,threshold:l}),e.current.forEach(p=>{i.current?.observe(p);}),()=>{i.current?.disconnect();}},[s,o,a,c]),{setRef:(l,p)=>{if(p)p.dataset.inviewId=l,e.current.set(l,p),i.current?.observe(p);else {let m=e.current.get(l);m&&(i.current?.unobserve(m),e.current.delete(l));}},getInView:l=>t.get(l)??false,inViewMap:t}}function Ot(r={}){let{target:e,container:t,offset:n=["start start","end end"],axis:i="y"}=r,s=useRef(null),o=useRef(null),a=useRef(null),c=useRef(null);return s.current===null&&(s.current=C(0),o.current=C(0),a.current=C(0),c.current=C(0)),useEffect(()=>{if(!x)return;let u=s.current,f=o.current,l=a.current,p=c.current,m=t?.current??e?.current??window,d=m===window,g=()=>{if(d)return {x:window.scrollX||window.pageXOffset,y:window.scrollY||window.pageYOffset};let y=m;return {x:y.scrollLeft,y:y.scrollTop}},h=()=>{if(d)return {width:document.documentElement.scrollWidth-window.innerWidth,height:document.documentElement.scrollHeight-window.innerHeight};let y=m;return {width:y.scrollWidth-y.clientWidth,height:y.scrollHeight-y.clientHeight}},v=()=>{let y=g(),T=h();u.jump(y.x),f.jump(y.y),l.jump(T.width>0?y.x/T.width:0),p.jump(T.height>0?y.y/T.height:0);},S=()=>{let y=e?.current;if(!y){v();return}let T=g();u.jump(T.x),f.jump(T.y);let P=y.getBoundingClientRect(),z=window.innerHeight,[Ye,We]=n,ge=Ae(Ye,P,z),Be=Ae(We,P,z),qe=i==="y"?P.top:P.left,he=Be-ge,$e=he!==0?(ge-qe)/he:0,be=Math.max(0,Math.min(1,$e));i==="y"?p.jump(be):l.jump(be);},E=null,A=()=>{E===null&&(E=requestAnimationFrame(()=>{e?.current?S():v(),E=null;}));};A();let w=d?window:m;return w.addEventListener("scroll",A,{passive:true}),window.addEventListener("resize",A,{passive:true}),()=>{w.removeEventListener("scroll",A),window.removeEventListener("resize",A),E!==null&&cancelAnimationFrame(E);}},[e,t,n,i]),useEffect(()=>()=>{s.current?.destroy(),o.current?.destroy(),a.current?.destroy(),c.current?.destroy();},[]),{scrollX:s.current,scrollY:o.current,scrollXProgress:a.current,scrollYProgress:c.current}}function Ae(r,e,t,n,i){let s=r.split(" "),o=s[0]||"start",a=s[1]||"start",c;o==="start"?c=e.top:o==="center"?c=e.top+e.height/2:o==="end"?c=e.bottom:o.endsWith("px")?c=e.top+parseFloat(o):o.endsWith("%")?c=e.top+e.height*parseFloat(o)/100:c=e.top;let u;return a==="start"?u=0:a==="center"?u=t/2:a==="end"?u=t:a.endsWith("px")?u=parseFloat(a):a.endsWith("%")?u=t*parseFloat(a)/100:u=0,u-c}function It(r="y"){let e=useRef(null),t=useRef(0),n=useRef(Date.now());return e.current===null&&(e.current=C(0)),useEffect(()=>{if(!x)return;let i=e.current,s=()=>{let o=Date.now(),a=r==="y"?window.scrollY||window.pageYOffset:window.scrollX||window.pageXOffset,c=o-n.current,u=a-t.current;c>0&&i.jump(u/c*1e3),t.current=a,n.current=o;};return window.addEventListener("scroll",s,{passive:true}),()=>{window.removeEventListener("scroll",s);}},[r]),useEffect(()=>()=>{e.current?.destroy();},[]),e.current}function fe(r={}){let{hover:e=true,press:t=true,focus:n=true,drag:i=false}=r,s=useRef(null),[o,a]=useState({isHovered:false,isPressed:false,isFocused:false,isDragging:false}),c={...e&&{onMouseEnter:()=>a(u=>({...u,isHovered:true})),onMouseLeave:()=>a(u=>({...u,isHovered:false,isPressed:false}))},...t&&{onMouseDown:()=>a(u=>({...u,isPressed:true})),onMouseUp:()=>a(u=>({...u,isPressed:false})),onTouchStart:()=>a(u=>({...u,isPressed:true})),onTouchEnd:()=>a(u=>({...u,isPressed:false}))},...n&&{onFocus:()=>a(u=>({...u,isFocused:true})),onBlur:()=>a(u=>({...u,isFocused:false}))},...i&&{onDragStart:()=>a(u=>({...u,isDragging:true})),onDragEnd:()=>a(u=>({...u,isDragging:false}))}};return useEffect(()=>{if(!t||!x)return;let u=()=>{a(f=>f.isPressed?{...f,isPressed:false}:f);};return window.addEventListener("mouseup",u),window.addEventListener("touchend",u),()=>{window.removeEventListener("mouseup",u),window.removeEventListener("touchend",u);}},[t]),{ref:s,...o,handlers:c}}function Lt(){let r=useRef(null),[e,t]=useState(false);return {ref:r,isHovered:e,handlers:{onMouseEnter:()=>t(true),onMouseLeave:()=>t(false)}}}function jt(){let r=useRef(null),[e,t]=useState(false),n={onMouseDown:()=>t(true),onMouseUp:()=>t(false),onMouseLeave:()=>t(false),onTouchStart:()=>t(true),onTouchEnd:()=>t(false)};return useEffect(()=>{if(!x)return;let i=()=>t(false);return window.addEventListener("mouseup",i),window.addEventListener("touchend",i),()=>{window.removeEventListener("mouseup",i),window.removeEventListener("touchend",i);}},[]),{ref:r,isPressed:e,handlers:n}}function kt(){let r=useRef(null),[e,t]=useState(false);return {ref:r,isFocused:e,handlers:{onFocus:()=>t(true),onBlur:()=>t(false)}}}function Ft(){let{ref:r,isHovered:e,isPressed:t,isFocused:n,handlers:i}=fe({hover:true,press:true,focus:true});return {ref:r,isHovered:e,isPressed:t,isFocused:n,activeState:t?"pressed":e?"hovered":n?"focused":"default",handlers:i}}function Ut(r){let{ref:e,isHovered:t,isPressed:n,isFocused:i,handlers:s}=fe({hover:!!r.hover,press:!!r.press,focus:!!r.focus}),o={...r.default};return i&&r.focus&&Object.assign(o,r.focus),t&&r.hover&&Object.assign(o,r.hover),n&&r.press&&Object.assign(o,r.press),{ref:e,handlers:s,isHovered:t,isPressed:n,isFocused:i,...o}}function q(){let[r,e]=useState(()=>x?window.matchMedia("(prefers-reduced-motion: reduce)").matches:false);return useEffect(()=>{if(!x)return;let t=window.matchMedia("(prefers-reduced-motion: reduce)"),n=i=>{e(i.matches);};return t.addEventListener?(t.addEventListener("change",n),()=>t.removeEventListener("change",n)):(t.addListener(n),()=>t.removeListener(n))},[]),r}function Gt(){return x?window.matchMedia("(prefers-reduced-motion: reduce)").matches:false}function Xt(r){return q()?r.reduced:r.default}function Yt(){return !q()}function Wt(r,e){return q()?e:r}var $t=({from:r,to:e,config:t={},onRest:n,children:i})=>{let s=useRef(null),[o,a]=useState(r);return useEffect(()=>{let c=D(r,t);return c.subscribe(a),s.current=c,requestAnimationFrame(()=>{c.set(e,{...t,onRest:n});}),()=>c.destroy()},[]),useEffect(()=>{s.current?.set(e,{...t,onRest:n});},[e,t,n]),jsx(Fragment,{children:i(o)})};function G(r){let e={};for(let t in r)typeof r[t]=="number"&&(e[t]=r[t]);return e}function b(r){return Ie.forwardRef(({children:e,style:t={},config:n={},initial:i,animate:s,exit:o,onAnimationComplete:a,...c},u)=>{let f=useRef(null),[l,p]=useState({}),m=useRef(true),d=useRef(false),g=useContext(R),h=g?.isPresent??true,v=g?.safeToRemove,S=useCallback(()=>!h&&o?o:s||Object.fromEntries(Object.entries(t).filter(w=>typeof w[1]=="number")),[h,o,s,t]),E=useCallback(()=>i===false?S():i||S(),[i,S]);useEffect(()=>{let w=E(),y=G(w);if(Object.keys(y).length===0)return;let T=D(y,n);return T.subscribe(P=>{p(P);}),f.current=T,()=>T.destroy()},[n.stiffness,n.damping]),useEffect(()=>{if(!f.current)return;let w=S(),y=G(w);if(m.current){if(m.current=false,i&&i!==false&&s){let T=G(i),P=G(s);Object.keys(P).some(U=>T[U]!==P[U])&&f.current.set(P);}return}f.current.set(y);},[h,s,o,S,i]),useEffect(()=>{if(!h&&o&&v&&!d.current){G(o);let T=setTimeout(()=>{f.current&&setTimeout(()=>{d.current||(d.current=true,v(),a?.());},500);},50);return ()=>clearTimeout(T)}},[h,o,v,a]),useEffect(()=>{h&&(d.current=false);},[h]);let A=Object.fromEntries(Object.entries(t).filter(([w,y])=>typeof y!="number"));return Ie.createElement(r,{...c,ref:u,style:{...A,...l}},e)})}var Qt={div:b("div"),span:b("span"),button:b("button"),a:b("a"),p:b("p"),h1:b("h1"),h2:b("h2"),h3:b("h3"),h4:b("h4"),h5:b("h5"),h6:b("h6"),ul:b("ul"),ol:b("ol"),li:b("li"),section:b("section"),article:b("article"),header:b("header"),footer:b("footer"),nav:b("nav"),main:b("main"),aside:b("aside"),img:b("img"),svg:b("svg"),path:b("path"),circle:b("circle"),rect:b("rect"),g:b("g")};var nn=({items:r,keys:e,from:t,to:n,config:i={},reverse:s=false,children:o})=>{let a=useRef(null),[c,u]=useState(()=>r.map(()=>({...t})));return useEffect(()=>{let f=te(r.length,i),l=f.subscribe(m=>{u(m.map(d=>({...n,x:d})));});a.current=f;let p=Object.values(n)[0];return f.set(p),()=>{l(),f.destroy();}},[r.length,i.stiffness,i.damping]),useEffect(()=>{let f=Object.values(n)[0];a.current?.set(f);},[n]),jsx(Fragment,{children:r.map((f,l)=>jsx(Ie.Fragment,{children:o(c[l],f,s?r.length-1-l:l)},e(f,l)))})};function N({id:r,children:e,isPresent:t,onExitComplete:n,custom:i}){let s=useRef(r);s.current=r;let o=useCallback(()=>{n(s.current);},[n]),a=useMemo(()=>({id:r,isPresent:t,safeToRemove:o,custom:i}),[r,t,o,i]),c=useRef(false);return useEffect(()=>{if(!t&&!c.current){c.current=true;let u=setTimeout(()=>{o();},1e4);return ()=>clearTimeout(u)}t&&(c.current=false);},[t,o]),jsx(R.Provider,{value:a,children:e})}var fn=typeof window<"u"?useLayoutEffect:useEffect;function Xe(r){return r.key!==null?String(r.key):""}function pn(r){let e={};return Children.forEach(r,t=>{if(isValidElement(t)){let n=Xe(t);n&&(e[n]=t);}}),e}function mn({children:r,custom:e,initial:t=true,mode:n="sync",onExitComplete:i}){let s=useRef(true),[o,a]=useState({}),c=useRef({}),[,u]=useState(0),f=useRef(0),l=pn(r);fn(()=>{let g=c.current,h={};for(let v in g)if(!(v in l)){let S=g[v];S&&(h[v]=S);}Object.keys(h).length>0&&(a(v=>({...v,...h})),f.current+=Object.keys(h).length),c.current=l,s.current&&(s.current=false);});let p=g=>{a(h=>{let v={...h};return delete v[g],v}),f.current--,f.current===0&&i&&i(),n==="wait"&&u(h=>h+1);},m=n!=="wait"||Object.keys(o).length===0,d=[];for(let g in o){let h=o[g];h&&d.push(jsx(N,{id:g,isPresent:false,onExitComplete:p,custom:e,children:cloneElement(h,{key:g})},`presence-${g}`));}return m&&Children.forEach(r,g=>{if(isValidElement(g)){let h=Xe(g);if(!h){console.warn('AnimatePresence: Every child must have a unique "key" prop.');return}let v=!(s.current&&t===false);d.push(jsx(N,{id:h,isPresent:true,onExitComplete:p,custom:e,children:cloneElement(g,{key:h,...v?{}:{"data-initial-skip":true}})},`presence-${h}`));}}),jsx(Fragment,{children:d})}export{mn as AnimatePresence,Qt as Animated,H as MotionValue,N as PresenceChild,R as PresenceContext,$t as Spring,nn as Trail,C as createMotionValue,Gt as getReducedMotionPreference,x as isBrowser,Ee as isServer,ze as mapRange,Rt as safeCancelAnimationFrame,wt as safeRequestAnimationFrame,Vt as shouldSkipAnimation,Me as transformValue,xt as useCombinedTransform,at as useDrag,kt as useFocus,lt as useGesture,Ut as useGestureAnimation,fe as useGestureState,Lt as useHover,Et as useInView,At as useInViewCallback,Dt as useInViewMultiple,Ft as useInteractionState,mt as useIsPresent,Pt as useIsomorphicLayoutEffect,we as useMotionValue,ht as useMotionValueState,bt as useMotionValueSync,vt as useMotionValues,pt as usePresence,dt as usePresenceCustom,q as useReducedMotion,Xt as useReducedMotionConfig,Wt as useReducedMotionValue,Ot as useScroll,It as useScrollVelocity,Yt as useShouldAnimate,Je as useSpring,Tt as useSpringTransform,et as useSpringValue,it as useSprings,jt as useTap,st as useTrail,yt as useTransform,St as useVelocityTransform};//# sourceMappingURL=index.mjs.map
//# sourceMappingURL=index.mjs.map