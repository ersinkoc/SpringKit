import nt,{createContext,useRef,useState,useContext,useCallback,useEffect,useLayoutEffect,useMemo,cloneElement,Children,isValidElement}from'react';import {jsx,Fragment}from'react/jsx-runtime';var A={stiffness:100,damping:10,mass:1,velocity:0,restSpeed:.01,restDelta:.01,clamp:false};function Xe(r,e,t,n){let{stiffness:i=100,damping:s=10,mass:o=1,restSpeed:c=.01,restDelta:u=.01}=n,a=t-r,p=Math.abs(a),f=Math.abs(e);if(p<=u&&f<=c)return {position:t,velocity:0,isRest:true};let l=1/60,m=i*a,h=f>1e-4?s*e:0,d=(m-h)/o,b=e+d*l,y=r+b*l,T=p<=u&&Math.abs(b)<=c;return {position:y,velocity:b,isRest:T}}var ve=class{constructor(){this.animations=new Set;this.animationMap=new WeakMap;this.rafId=null;this.isRunning=false;this.lastTime=0;this.nextId=1;this.idMap=new WeakMap;this.frameListeners=new Set;this.registry=new FinalizationRegistry(e=>{this.cleanupCallbacks.forEach(t=>t(e));});this.cleanupCallbacks=new Set;this.tick=()=>{let e=performance.now(),t=e-this.lastTime,n=Math.min(t,64);this.lastTime=e;for(let s of this.frameListeners)s(n);let i=[];for(let s of this.animations){let o=s.deref();if(!o){i.push(s);continue}o.update(e),o.isComplete()&&(i.push(s),this.animationMap.delete(o),this.idMap.delete(o));}for(let s=0;s<i.length;s++)this.animations.delete(i[s]);this.animations.size>0?this.rafId=requestAnimationFrame(this.tick):this.stop();};}add(e){let t=this.idMap.get(e);if(t!==void 0)return t;let n=this.nextId++,i=new WeakRef(e);return this.animations.add(i),this.animationMap.set(e,i),this.idMap.set(e,n),this.registry.register(e,n),this.start(),n}remove(e){let t=this.animationMap.get(e);t&&(this.animations.delete(t),this.animationMap.delete(e),this.idMap.delete(e)),this.animations.size===0&&this.stop();}onCleanup(e){return this.cleanupCallbacks.add(e),()=>this.cleanupCallbacks.delete(e)}onFrame(e){return this.frameListeners.add(e),()=>this.frameListeners.delete(e)}start(){this.isRunning||(this.isRunning=true,this.lastTime=performance.now(),this.tick());}stop(){this.isRunning=false,this.rafId!==null&&(cancelAnimationFrame(this.rafId),this.rafId=null);}get size(){return this.animations.size}getAliveCount(){let e=0;for(let t of this.animations)t.deref()&&e++;return e}getFPS(){let e=performance.now()-this.lastTime;return e>0?Math.round(1e3/e):60}},q=new ve;function N(r,e,t){let n=Math.min(e,t),i=Math.max(e,t);return Math.max(n,Math.min(i,r))}var Ge=typeof process<"u"&&process.env?.NODE_ENV!=="production",Ye=new Set;function re(r){!Ge||Ye.has(r)||(Ye.add(r),console.warn(`[SpringKit] ${r}`));}function Be(r){if(!Ge)return;let{stiffness:e=100,damping:t=10,mass:n=1}=r;e>400&&t<10&&re(`High stiffness (${e}) with low damping (${t}) may cause excessive oscillation. Consider increasing damping to at least ${Math.round(e/20)} for smoother animation.`),e<20&&re(`Very low stiffness (${e}) will result in sluggish animation. Consider using stiffness >= 50 for more responsive feel.`),t>e&&re(`Damping (${t}) is higher than stiffness (${e}), which removes the "springy" feel. Consider reducing damping for bouncier animation.`),n<=0&&re(`Mass must be positive. Got ${n}. Using default mass of 1.`),n>10&&re(`High mass (${n}) will make the animation very slow. Consider mass between 0.5 and 5 for typical use cases.`);}var ye=class{constructor(e,t,n={}){this.state="idle";this.resolveComplete=null;Be(n),this.from=e,this.to=t,this.clampedFrom=e,this.clampedTo=t,this.position=e,this.velocity=n.velocity??0,this.target=t,this.config={...A,...n,stiffness:n.stiffness??A.stiffness,damping:n.damping??A.damping,mass:n.mass??A.mass,restSpeed:n.restSpeed??A.restSpeed,restDelta:n.restDelta??A.restDelta},this.finished=new Promise(i=>{this.resolveComplete=i;});}start(){return this.state==="running"?this:(this.state="running",this.config.onStart?.(),q.add(this),this)}stop(){this.state="idle",q.remove(this);}pause(){this.state==="running"&&(this.state="paused",q.remove(this));}resume(){this.state==="paused"&&(this.state="running",q.add(this));}reverse(){let e=this.from;this.from=this.to,this.to=e,this.clampedFrom=this.from,this.clampedTo=this.to,this.target=this.to;}set(e){this.to=e,this.clampedTo=e,this.target=e;}setWithVelocity(e,t){this.from=this.position,this.clampedFrom=this.position,this.to=e,this.clampedTo=e,this.target=e,t!==void 0&&(this.velocity=t),this.state!=="running"&&this.start();}update(e){if(this.state!=="running")return;let t=Xe(this.position,this.velocity,this.target,this.config);if(this.position=t.position,this.velocity=t.velocity,this.config.clamp){let n=Math.min(this.clampedFrom,this.clampedTo),i=Math.max(this.clampedFrom,this.clampedTo);this.position=N(this.position,n,i);}this.config.onUpdate?.(this.position),t.isRest&&(this.state="complete",q.remove(this),this.position=this.target,this.config.onUpdate?.(this.position),this.config.onComplete?.(),this.config.onRest?.(),this.resolveComplete?.());}isAnimating(){return this.state==="running"}isPaused(){return this.state==="paused"}isComplete(){return this.state==="complete"}getValue(){return this.position}getVelocity(){return this.velocity}destroy(){this.stop(),this.config.onUpdate=void 0,this.config.onStart=void 0,this.config.onComplete=void 0,this.config.onRest=void 0;}};function $e(r,e,t){return new ye(r,e,t)}var xe=class{constructor(e,t={}){this.currentAnimation=null;this.subscribers=new Set;this.resolveComplete=null;this.value=e,this.config={...A,...t},this.finishedPromise=new Promise(n=>{this.resolveComplete=n;});}get(){return this.value}getVelocity(){return this.currentAnimation?.getVelocity()??0}set(e,t={}){this.currentAnimation&&(this.currentAnimation.destroy(),this.currentAnimation=null),this.finishedPromise=new Promise(o=>{this.resolveComplete=o;});let n={...this.config,...t},i=n.onUpdate,s=n.onComplete;this.currentAnimation=$e(this.value,e,{...n,onUpdate:o=>{this.value=o,this.notify(),i?.(o);},onComplete:()=>{s?.(),this.resolveComplete&&this.resolveComplete();}}),this.currentAnimation.start();}jump(e){this.currentAnimation&&(this.currentAnimation.destroy(),this.currentAnimation=null),this.value=e,this.notify();}stop(){this.currentAnimation&&(this.currentAnimation.destroy(),this.currentAnimation=null),this.resolveComplete&&this.resolveComplete();}setConfig(e){this.config={...this.config,...e};}subscribe(e){return this.subscribers.add(e),e(this.value),()=>{this.subscribers.delete(e);}}isAnimating(){return this.currentAnimation?.isAnimating()??false}get finished(){return this.finishedPromise}notify(){for(let e of this.subscribers)e(this.value);}destroy(){this.currentAnimation?.destroy(),this.currentAnimation=null,this.subscribers.clear();}};function C(r,e){return new xe(r,e)}var Se=class{constructor(e,t={}){this.subscribers=new Set;this.resolveComplete=null;this.config={...A,...t},this.values=new Map;for(let[n,i]of Object.entries(e)){let s=C(i,this.config);s.subscribe(()=>this.notify()),this.values.set(n,s);}this.finishedPromise=Promise.resolve(),this.resetPromise();}resetPromise(){this.finishedPromise=new Promise(e=>{this.resolveComplete=e;});}get(){let e={};for(let[t,n]of this.values)e[t]=n.get();return e}getValue(e){return this.values.get(e)?.get()??0}set(e,t={}){this.resetPromise();let n=[];for(let[i,s]of Object.entries(e)){let o=this.values.get(i);o&&(o.set(s,t),n.push(o.finished));}Promise.all(n).then(()=>{this.resolveComplete&&this.resolveComplete();});}jump(e){for(let[t,n]of Object.entries(e)){let i=this.values.get(t);i&&i.jump(n);}}subscribe(e){return this.subscribers.add(e),e(this.get()),()=>this.subscribers.delete(e)}isAnimating(){for(let e of this.values.values())if(e.isAnimating())return  true;return  false}get finished(){return this.finishedPromise}notify(){let e=this.get();for(let t of this.subscribers)t(e);}destroy(){for(let e of this.values.values())e.destroy();this.subscribers.clear();}};function I(r,e){return new Se(r,e)}var Me=class{constructor(e,t={}){this.subscribers=new Set;this.frameCount=0;this.pendingUpdates=new Map;let{followDelay:n=2,...i}=t;this.followDelay=n,this.leader=C(0,i),this.springs=[];for(let s=0;s<e;s++){let o=C(0,i);this.springs.push(o);}this.leader.subscribe(()=>{this.frameCount++,this.scheduleFollowerUpdates();});}scheduleFollowerUpdates(){let e=this.leader.get();for(let t=0;t<this.springs.length;t++){let n=(t+1)*this.followDelay,i=this.frameCount+n;this.pendingUpdates.set(t,i),this.scheduleFollowerUpdate(t,e,i,n);}}scheduleFollowerUpdate(e,t,n,i){let s=this.frameCount,o=n-s;if(o<=0)this.springs[e].set(t);else {let c=Math.max(o*16,0);setTimeout(()=>{this.pendingUpdates.get(e)===n&&this.springs[e].set(t);},c);}}set(e){this.leader.set(e);}jump(e){this.leader.jump(e);for(let t of this.springs)t.jump(e);}getValues(){return this.springs.map(e=>e.get())}subscribe(e){this.subscribers.add(e);let t=[];for(let n of this.springs)t.push(n.subscribe(()=>{this.notify();}));return e(this.getValues()),()=>{this.subscribers.delete(e);for(let n of t)n();}}notify(){let e=this.getValues();for(let t of this.subscribers)t(e);}destroy(){this.leader.destroy();for(let e of this.springs)e.destroy();this.subscribers.clear(),this.pendingUpdates.clear();}};function Ce(r,e){return new Me(r,e)}var Mt={axis:"both",rubberBand:false,rubberBandFactor:.5,stiffness:200,damping:20,mass:1,restSpeed:.01,restDelta:.01,clamp:false},Re=class{constructor(e,t={}){this.enabled=true;this.position={x:0,y:0};this.isDragging=false;this.startPosition={x:0,y:0};this.pointerStart={x:0,y:0};this.lastPosition={x:0,y:0};this.lastTime=0;this.velocity={x:0,y:0};this.onPointerDown=e=>{!this.enabled||e.button!==0||(this.isDragging=true,this.startPosition={...this.position},this.pointerStart={x:e.clientX,y:e.clientY},this.lastPosition={x:e.clientX,y:e.clientY},this.lastTime=performance.now(),this.velocity={x:0,y:0},this.element.setPointerCapture(e.pointerId),this.element.addEventListener("pointermove",this.onPointerMove),this.element.addEventListener("pointerup",this.onPointerUp),this.element.addEventListener("pointercancel",this.onPointerUp),this.config.onDragStart&&this.config.onDragStart(e));};this.onPointerMove=e=>{let t=performance.now(),n=t-this.lastTime;this.velocity={x:(e.clientX-this.lastPosition.x)/Math.max(n,1),y:(e.clientY-this.lastPosition.y)/Math.max(n,1)},this.lastPosition={x:e.clientX,y:e.clientY},this.lastTime=t;let i=this.startPosition.x+(e.clientX-this.pointerStart.x),s=this.startPosition.y+(e.clientY-this.pointerStart.y);this.config.bounds&&(i=this.applyBounds(i,this.config.bounds.left??-1/0,this.config.bounds.right??1/0),s=this.applyBounds(s,this.config.bounds.top??-1/0,this.config.bounds.bottom??1/0)),this.config.axis==="x"?s=0:this.config.axis==="y"&&(i=0),this.position={x:i,y:s},this.config.onDrag&&this.config.onDrag(i,s,e),this.config.onUpdate&&this.config.onUpdate(i,s);};this.onPointerUp=e=>{this.isDragging=false,this.element.releasePointerCapture(e.pointerId),this.element.removeEventListener("pointermove",this.onPointerMove),this.element.removeEventListener("pointerup",this.onPointerUp),this.element.removeEventListener("pointercancel",this.onPointerUp),this.release(this.velocity.x*16,this.velocity.y*16),this.config.onDragEnd&&this.config.onDragEnd(this.position.x,this.position.y,this.velocity);};this.element=e,this.config={...Mt,...t};let n={stiffness:this.config.stiffness,damping:this.config.damping,mass:this.config.mass,restSpeed:this.config.restSpeed,restDelta:this.config.restDelta,clamp:this.config.clamp};this.springX=C(0,n),this.springY=C(0,n),this.springX.subscribe(()=>{this.isDragging||(this.position.x=this.springX.get(),this.config.onUpdate&&this.config.onUpdate(this.position.x,this.position.y));}),this.springY.subscribe(()=>{this.isDragging||(this.position.y=this.springY.get(),this.config.onUpdate&&this.config.onUpdate(this.position.x,this.position.y));}),this.setupPointerEvents();}setupPointerEvents(){this.element.addEventListener("pointerdown",this.onPointerDown);}applyBounds(e,t,n){if(!isFinite(t)&&!isFinite(n))return e;let i=isFinite(t)?t:-1/0,s=isFinite(n)?n:1/0;if(this.config.rubberBand){let o=this.config.rubberBandFactor||.5;if(e<i)return i-(i-e)*o;if(e>s)return s+(e-s)*o}return N(e,i,s)}enable(){this.enabled=true;}disable(){this.enabled=false,this.isDragging&&(this.isDragging=false);}isEnabled(){return this.enabled}reset(){this.springX.jump(0),this.springY.jump(0),this.position={x:0,y:0},this.config.onUpdate&&this.config.onUpdate(0,0);}getPosition(){return {...this.position}}setPosition(e,t){this.position={x:e,y:t},this.springX.jump(e),this.springY.jump(t);}release(e,t){if(this.config.bounds){let{left:n=-1/0,right:i=1/0,top:s=-1/0,bottom:o=1/0}=this.config.bounds,c=N(this.position.x,n,i),u=N(this.position.y,s,o);c!==this.position.x&&this.springX.set(c,{velocity:e}),u!==this.position.y&&this.springY.set(u,{velocity:t});}}destroy(){this.element.removeEventListener("pointerdown",this.onPointerDown),this.springX.destroy(),this.springY.destroy();}};function Pe(r,e){return new Re(r,e)}var ie=class{constructor(e,t={}){this._velocity=0;this._subscribers=new Set;this._eventListeners=new Map;this._springValue=null;this._isAnimating=false;this._destroyed=false;this._value=e,this._springConfig=t.spring??{stiffness:100,damping:15},typeof e=="number"&&(this._springValue=C(e,{...this._springConfig,onUpdate:n=>{this._destroyed||(this._value=n,this._velocity=this._springValue?.getVelocity()??0,this._notify());}}));}get(){return this._value}getVelocity(){return this._velocity}isAnimating(){return this._isAnimating}set(e,t=true){if(!this._destroyed)if(typeof e=="number"&&this._springValue&&t){this._isAnimating=true,this._emit("animationStart"),this._springValue.set(e);let n=()=>{this._springValue&&Math.abs(this._springValue.getVelocity())<.01?(this._isAnimating=false,this._emit("animationEnd")):this._isAnimating&&requestAnimationFrame(n);};requestAnimationFrame(n);}else this._value=e,this._velocity=0,this._notify();}jump(e){this._destroyed||(this._value=e,this._velocity=0,typeof e=="number"&&this._springValue&&this._springValue.jump(e),this._isAnimating=false,this._notify());}stop(){this._springValue&&this._springValue.jump(this._springValue.get()),this._isAnimating=false,this._emit("animationEnd");}subscribe(e){return this._subscribers.add(e),e(this._value),()=>{this._subscribers.delete(e);}}on(e,t){return this._eventListeners.has(e)||this._eventListeners.set(e,new Set),this._eventListeners.get(e).add(t),()=>{this._eventListeners.get(e)?.delete(t);}}setConfig(e){this._springConfig={...this._springConfig,...e};}destroy(){this._destroyed=true,this._subscribers.clear(),this._eventListeners.clear(),this._springValue&&(this._springValue.destroy(),this._springValue=null);}_notify(){this._subscribers.forEach(e=>{try{e(this._value);}catch(t){console.error("MotionValue subscriber error:",t);}}),this._emit("change");}_emit(e){this._eventListeners.get(e)?.forEach(t=>{try{t();}catch(n){console.error(`MotionValue ${e} listener error:`,n);}});}};function P(r,e){return new ie(r,e)}function We(r,e){let t=new ie(e(r.get()));return r.subscribe(n=>{t.jump(e(n));}),t}function Ct(r,e,t,n={}){let[i,s]=e,[o,c]=t;return We(r,u=>{let a=(u-i)/(s-i);return n.clamp&&(a=Math.max(0,Math.min(1,a))),o+a*(c-o)})}function Pt(r,e={}){let t=useRef(null),[,n]=useState({}),i=useRef(true),s=useRef(JSON.stringify(r));return t.current||(t.current=I(r,e),t.current.subscribe(()=>n({}))),useEffect(()=>{if(i.current){i.current=false;return}let o=JSON.stringify(r);o!==s.current&&(t.current?.set(r,e),s.current=o);},[JSON.stringify(r)]),useEffect(()=>()=>t.current?.destroy(),[]),t.current.get()}function Vt(r,e={}){let t=useRef(null);return t.current||(t.current=C(r,e)),useEffect(()=>()=>t.current?.destroy(),[]),t.current}function Ot(r,e,t={}){let n=useRef([]),[,i]=useState({});return useEffect(()=>{n.current.forEach(s=>s?.destroy()),n.current=[];for(let s=0;s<r;s++){let o=e(s),c=o.from??o.values,u=I(c,{...t,...o.config});u.subscribe(()=>i({})),n.current.push(u),setTimeout(()=>{u.set(o.values);},o.delay??0);}return ()=>{n.current.forEach(s=>s?.destroy());}},[r,t]),n.current.map(s=>s?.get()??{})}function kt(r,e,t={}){let n=useRef(null),[i,s]=useState(()=>Array.from({length:r},()=>({...e}))),o=useRef(true),c=useRef(JSON.stringify(e));return useEffect(()=>{let u=Object.keys(e),a=new Map;u.forEach(f=>{let l=[],m=e[f];for(let h=0;h<r;h++){let d=C(m,t);l.push(d);}a.set(f,l);}),n.current=a;let p=[];return a.forEach((f,l)=>{f.forEach((m,h)=>{let d=m.subscribe(()=>{s(b=>{let y=[...b];y[h]||(y[h]={...e});let T={...y[h]};return a.forEach((x,R)=>{T[R]=x[h].get();}),y[h]=T,y});});p.push(d);});}),()=>{p.forEach(f=>f()),a.forEach(f=>{f.forEach(l=>l.destroy());}),n.current=null;}},[r]),useEffect(()=>{if(!n.current)return;let u=JSON.stringify(e);if(o.current){o.current=false,c.current=u;return}if(u===c.current)return;c.current=u;let a=Object.keys(e),p=50;a.forEach(f=>{let l=n.current?.get(f);if(!l)return;let m=e[f];l.forEach((h,d)=>{setTimeout(()=>{h.set(m,t);},d*p);});});},[JSON.stringify(e),t.stiffness,t.damping]),i}function jt(r={}){let e=useRef(null),t=useRef({x:0,y:0}),[n,i]=useState(null),[s,o]=useState(false),[,c]=useState({}),u=useRef(r);u.current=r;let a=l=>{i(l);};useEffect(()=>(e.current&&(e.current.destroy(),e.current=null),n&&(e.current=Pe(n,{...u.current,onDragStart:l=>{o(true),u.current.onDragStart?.(l);},onDragEnd:(l,m,h)=>{o(false),u.current.onDragEnd?.(l,m,h);},onUpdate:(l,m)=>{t.current={x:l,y:m},c({}),u.current.onUpdate?.(l,m);}})),()=>{e.current?.destroy(),e.current=null;}),[n]);let p=l=>{let m=l.x??t.current.x,h=l.y??t.current.y;e.current?.setPosition(m,h);},f=()=>{e.current?.reset(),t.current={x:0,y:0},c({});};return [t.current,{ref:a,set:p,reset:f,isDragging:s}]}function Ut(r){let e=useRef({isDragging:false,startX:0,startY:0,currentX:0,currentY:0});return {onPointerDown:o=>{e.current={isDragging:true,startX:o.clientX,startY:o.clientY,currentX:o.clientX,currentY:o.clientY};},onPointerMove:o=>{if(!e.current.isDragging)return;let c=o.clientX-e.current.startX,u=o.clientY-e.current.startY;r.onDrag?.({x:c,y:u}),e.current.currentX=o.clientX,e.current.currentY=o.clientY;},onPointerUp:()=>{e.current.isDragging=false;},onPointerCancel:()=>{e.current.isDragging=false;}}}var O=createContext(null);O.displayName="PresenceContext";function Ht(){let r=useContext(O);return r===null?[true,()=>{}]:[r.isPresent,r.safeToRemove]}function Xt(){let r=useContext(O);return r===null?true:r.isPresent}function Yt(){return useContext(O)?.custom}function Bt(){let r=useRef(null),e=useRef(new Map),t=useRef(new Map),n=useRef(false),i=useRef([]);useCallback((a,p)=>(null),[]);let o=useCallback(()=>{let a=r.current;if(!a)return;let p=[],f={};t.current.forEach((l,m)=>{switch(m){case "x":p.push(`translateX(${l}px)`);break;case "y":p.push(`translateY(${l}px)`);break;case "z":p.push(`translateZ(${l}px)`);break;case "scale":p.push(`scale(${l})`);break;case "scaleX":p.push(`scaleX(${l})`);break;case "scaleY":p.push(`scaleY(${l})`);break;case "rotate":case "rotateZ":p.push(`rotate(${l}deg)`);break;case "rotateX":p.push(`rotateX(${l}deg)`);break;case "rotateY":p.push(`rotateY(${l}deg)`);break;case "opacity":f.opacity=String(l);break;default:f[m]=`${l}px`;}}),p.length>0&&(a.style.transform=p.join(" ")),Object.entries(f).forEach(([l,m])=>{a.style.setProperty(l,m);});},[]),c=useCallback(async(a,p={})=>{let{config:f={},delay:l=0,onComplete:m}=p;l>0&&await new Promise(d=>setTimeout(d,l)),n.current=true;let h=[];for(let[d,b]of Object.entries(a)){let y=Array.isArray(b)?b:[b];t.current.get(d)??0;let x=Promise.resolve();for(let R of y)x=x.then(()=>new Promise(D=>{let v=e.current.get(d);if(!v){v=C(t.current.get(d)??0,f),e.current.set(d,v);let j=v.subscribe(X=>{t.current.set(d,X),o();});i.current.push(j);}(f.stiffness||f.damping||f.mass)&&v.setConfig(f),v.set(R);let E=()=>{v&&!v.isAnimating()?D():requestAnimationFrame(E);};setTimeout(E,16);}));h.push(x);}await Promise.all(h),n.current=false,m?.();},[o]),u={stop:useCallback(()=>{e.current.forEach(a=>{a.stop();}),n.current=false;},[]),get:useCallback(a=>t.current.get(a),[]),isAnimating:useCallback(()=>n.current,[])};return useEffect(()=>()=>{i.current.forEach(a=>a()),e.current.forEach(a=>a.destroy()),e.current.clear();},[]),[r,c,u]}function Ke(r,e){let t=useRef(null);return t.current===null&&(t.current=P(r,e)),useEffect(()=>()=>{t.current?.destroy();},[]),t.current}function Wt(r){let[e,t]=useState(r.get());return useEffect(()=>r.subscribe(i=>{t(i);}),[r]),e}function qt(r,e){let t=Ke(r,e);return useEffect(()=>{t.set(r);},[r,t]),t}function Nt(r,e){let t=useRef(null);if(t.current===null){let n={};for(let i in r)if(Object.prototype.hasOwnProperty.call(r,i)){let s=r[i];n[i]=P(s,e);}t.current=n;}return useEffect(()=>()=>{if(t.current){let n=t.current;for(let i in n)Object.prototype.hasOwnProperty.call(n,i)&&n[i].destroy();}},[]),t.current}function zt(r,e,t,n){let i=useRef(null),s=useRef(null),o=useMemo(()=>{if(typeof e=="function")return e;if(!t)throw new Error("useTransform: outputRange is required when using range mapping");let c=e;return typeof t[0]=="number"?u=>{let a=0;for(;a<c.length-1;a++){let d=c[a+1];if(d!==void 0&&u<=d)break}let p=c[a]??0,f=c[Math.min(a+1,c.length-1)]??1,l=t[a]??0,m=t[Math.min(a+1,t.length-1)]??1,h=f!==p?(u-p)/(f-p):0;return n?.ease&&(h=n.ease(h)),n?.clamp&&(h=Math.max(0,Math.min(1,h))),l+h*(m-l)}:u=>{let a=0;for(;a<c.length-1;a++){let m=c[a+1];if(m!==void 0&&u<=m)break}let p=c[a]??0,f=c[a+1]??1;return (f!==p?(u-p)/(f-p):0)<.5?t[a]:t[a+1]}},[e,t,n?.clamp,n?.ease]);return i.current===null&&(i.current=P(o(r.get()))),useEffect(()=>(s.current=r.subscribe(c=>{i.current?.jump(o(c));}),()=>{s.current?.();}),[r,o]),useEffect(()=>()=>{i.current?.destroy();},[]),i.current}function Kt(r,e){let t=useRef(null),n=useRef([]),i=()=>r.map(s=>s.get());return t.current===null&&(t.current=P(e(i()))),useEffect(()=>(n.current=r.map(s=>s.subscribe(()=>{t.current?.jump(e(i()));})),()=>{n.current.forEach(s=>s());}),[r,e]),useEffect(()=>()=>{t.current?.destroy();},[]),t.current}function Jt(r,e){let t=useRef(null),n=useRef(null);return t.current===null&&(t.current=P(e(r.getVelocity()))),useEffect(()=>{let i=()=>{t.current?.jump(e(r.getVelocity())),n.current=requestAnimationFrame(i);};return n.current=requestAnimationFrame(i),()=>{n.current&&cancelAnimationFrame(n.current);}},[r,e]),useEffect(()=>()=>{t.current?.destroy();},[]),t.current}function Zt(r,e,t,n){let i=useRef(null),s=useRef(null),o=useMemo(()=>c=>{let u=0;for(;u<e.length-1;u++){let h=e[u+1];if(h!==void 0&&c<=h)break}let a=e[u]??0,p=e[u+1]??1,f=t[u]??0,l=t[u+1]??1,m=(c-a)/(p-a);return f+m*(l-f)},[e,t]);return i.current===null&&(i.current=P(o(r.get()),{spring:n})),useEffect(()=>(s.current=r.subscribe(c=>{i.current?.set(o(c));}),()=>{s.current?.();}),[r,o]),useEffect(()=>()=>{i.current?.destroy();},[]),i.current}var M=typeof window<"u",Ze=!M,tn=M?useLayoutEffect:useEffect;function nn(){return !!Ze}function rn(r){return M&&typeof requestAnimationFrame<"u"?requestAnimationFrame(r):0}function on(r){M&&typeof cancelAnimationFrame<"u"&&cancelAnimationFrame(r);}function sn(r={}){let{once:e=false,amount:t="some",margin:n="0px",root:i}=r,s=useRef(null),[o,c]=useState(false),[u,a]=useState(),p=useRef(false);return useEffect(()=>{if(!M)return;let f=s.current;if(!f||e&&p.current)return;let l;t==="some"?l=0:t==="all"?l=1:l=t;let m=new IntersectionObserver(h=>{let[d]=h;if(d){let b=d.isIntersecting;a(d),c(b),b&&e&&(p.current=true,m.disconnect());}},{root:i?.current??null,rootMargin:n,threshold:l});return m.observe(f),()=>{m.disconnect();}},[e,t,n,i]),{ref:s,inView:o,entry:u}}function an(r,e={}){let t=useRef(null),n=useRef(r),i=useRef(false);n.current=r;let{once:s=false,amount:o="some",margin:c="0px",root:u}=e;return useEffect(()=>{if(!M)return;let a=t.current;if(!a||s&&i.current)return;let p;o==="some"?p=0:o==="all"?p=1:p=o;let f=new IntersectionObserver(l=>{let[m]=l;m?.isIntersecting&&(n.current(m),s&&(i.current=true,f.disconnect()));},{root:u?.current??null,rootMargin:c,threshold:p});return f.observe(a),()=>f.disconnect()},[s,o,c,u]),t}function un(r={}){let e=useRef(new Map),[t,n]=useState(new Map),i=useRef(null),{once:s=false,amount:o="some",margin:c="0px",root:u}=r;return useEffect(()=>{if(!M)return;let f;return o==="some"?f=0:o==="all"?f=1:f=o,i.current=new IntersectionObserver(l=>{n(m=>{let h=new Map(m);return l.forEach(d=>{let b=d.target.dataset.inviewId;b&&(h.set(b,d.isIntersecting),d.isIntersecting&&s&&i.current?.unobserve(d.target));}),h});},{root:u?.current??null,rootMargin:c,threshold:f}),e.current.forEach(l=>{i.current?.observe(l);}),()=>{i.current?.disconnect();}},[s,o,c,u]),{setRef:(f,l)=>{if(l)l.dataset.inviewId=f,e.current.set(f,l),i.current?.observe(l);else {let m=e.current.get(f);m&&(i.current?.unobserve(m),e.current.delete(f));}},getInView:f=>t.get(f)??false,inViewMap:t}}function cn(r={}){let{target:e,container:t,offset:n=["start start","end end"],axis:i="y"}=r,s=useRef(null),o=useRef(null),c=useRef(null),u=useRef(null);return s.current===null&&(s.current=P(0),o.current=P(0),c.current=P(0),u.current=P(0)),useEffect(()=>{if(!M)return;let a=s.current,p=o.current,f=c.current,l=u.current,m=t?.current??e?.current??window,h=m===window,d=()=>{if(h)return {x:window.scrollX||window.pageXOffset,y:window.scrollY||window.pageYOffset};let v=m;return {x:v.scrollLeft,y:v.scrollTop}},b=()=>{if(h)return {width:document.documentElement.scrollWidth-window.innerWidth,height:document.documentElement.scrollHeight-window.innerHeight};let v=m;return {width:v.scrollWidth-v.clientWidth,height:v.scrollHeight-v.clientHeight}},y=()=>{let v=d(),E=b();a.jump(v.x),p.jump(v.y),f.jump(E.width>0?v.x/E.width:0),l.jump(E.height>0?v.y/E.height:0);},T=()=>{let v=e?.current;if(!v){y();return}let E=d();a.jump(E.x),p.jump(E.y);let j=v.getBoundingClientRect(),X=window.innerHeight,[Z,ue]=n,V=Qe(Z,j,X),G=Qe(ue,j,X),Q=i==="y"?j.top:j.left,ee=G-V,te=ee!==0?(V-Q)/ee:0,ge=Math.max(0,Math.min(1,te));i==="y"?l.jump(ge):f.jump(ge);},x=null,R=()=>{x===null&&(x=requestAnimationFrame(()=>{e?.current?T():y(),x=null;}));};R();let D=h?window:m;return D.addEventListener("scroll",R,{passive:true}),window.addEventListener("resize",R,{passive:true}),()=>{D.removeEventListener("scroll",R),window.removeEventListener("resize",R),x!==null&&cancelAnimationFrame(x);}},[e,t,n,i]),useEffect(()=>()=>{s.current?.destroy(),o.current?.destroy(),c.current?.destroy(),u.current?.destroy();},[]),{scrollX:s.current,scrollY:o.current,scrollXProgress:c.current,scrollYProgress:u.current}}function Qe(r,e,t,n,i){let s=r.split(" "),o=s[0]||"start",c=s[1]||"start",u;o==="start"?u=e.top:o==="center"?u=e.top+e.height/2:o==="end"?u=e.bottom:o.endsWith("px")?u=e.top+parseFloat(o):o.endsWith("%")?u=e.top+e.height*parseFloat(o)/100:u=e.top;let a;return c==="start"?a=0:c==="center"?a=t/2:c==="end"?a=t:c.endsWith("px")?a=parseFloat(c):c.endsWith("%")?a=t*parseFloat(c)/100:a=0,a-u}function ln(r="y"){let e=useRef(null),t=useRef(0),n=useRef(Date.now());return e.current===null&&(e.current=P(0)),useEffect(()=>{if(!M)return;let i=e.current,s=()=>{let o=Date.now(),c=r==="y"?window.scrollY||window.pageYOffset:window.scrollX||window.pageXOffset,u=o-n.current,a=c-t.current;u>0&&i.jump(a/u*1e3),t.current=c,n.current=o;};return window.addEventListener("scroll",s,{passive:true}),()=>{window.removeEventListener("scroll",s);}},[r]),useEffect(()=>()=>{e.current?.destroy();},[]),e.current}function Le(r={}){let{hover:e=true,press:t=true,focus:n=true,drag:i=false}=r,s=useRef(null),[o,c]=useState({isHovered:false,isPressed:false,isFocused:false,isDragging:false}),u={...e&&{onMouseEnter:()=>c(a=>({...a,isHovered:true})),onMouseLeave:()=>c(a=>({...a,isHovered:false,isPressed:false}))},...t&&{onMouseDown:()=>c(a=>({...a,isPressed:true})),onMouseUp:()=>c(a=>({...a,isPressed:false})),onTouchStart:()=>c(a=>({...a,isPressed:true})),onTouchEnd:()=>c(a=>({...a,isPressed:false}))},...n&&{onFocus:()=>c(a=>({...a,isFocused:true})),onBlur:()=>c(a=>({...a,isFocused:false}))},...i&&{onDragStart:()=>c(a=>({...a,isDragging:true})),onDragEnd:()=>c(a=>({...a,isDragging:false}))}};return useEffect(()=>{if(!t||!M)return;let a=()=>{c(p=>p.isPressed?{...p,isPressed:false}:p);};return window.addEventListener("mouseup",a),window.addEventListener("touchend",a),()=>{window.removeEventListener("mouseup",a),window.removeEventListener("touchend",a);}},[t]),{ref:s,...o,handlers:u}}function fn(){let r=useRef(null),[e,t]=useState(false);return {ref:r,isHovered:e,handlers:{onMouseEnter:()=>t(true),onMouseLeave:()=>t(false)}}}function pn(){let r=useRef(null),[e,t]=useState(false),n={onMouseDown:()=>t(true),onMouseUp:()=>t(false),onMouseLeave:()=>t(false),onTouchStart:()=>t(true),onTouchEnd:()=>t(false)};return useEffect(()=>{if(!M)return;let i=()=>t(false);return window.addEventListener("mouseup",i),window.addEventListener("touchend",i),()=>{window.removeEventListener("mouseup",i),window.removeEventListener("touchend",i);}},[]),{ref:r,isPressed:e,handlers:n}}function mn(){let r=useRef(null),[e,t]=useState(false);return {ref:r,isFocused:e,handlers:{onFocus:()=>t(true),onBlur:()=>t(false)}}}function dn(){let{ref:r,isHovered:e,isPressed:t,isFocused:n,handlers:i}=Le({hover:true,press:true,focus:true});return {ref:r,isHovered:e,isPressed:t,isFocused:n,activeState:t?"pressed":e?"hovered":n?"focused":"default",handlers:i}}function gn(r){let{ref:e,isHovered:t,isPressed:n,isFocused:i,handlers:s}=Le({hover:!!r.hover,press:!!r.press,focus:!!r.focus}),o={...r.default};return i&&r.focus&&Object.assign(o,r.focus),t&&r.hover&&Object.assign(o,r.hover),n&&r.press&&Object.assign(o,r.press),{ref:e,handlers:s,isHovered:t,isPressed:n,isFocused:i,...o}}function me(){let[r,e]=useState(()=>M?window.matchMedia("(prefers-reduced-motion: reduce)").matches:false);return useEffect(()=>{if(!M)return;let t=window.matchMedia("(prefers-reduced-motion: reduce)"),n=i=>{e(i.matches);};return t.addEventListener?(t.addEventListener("change",n),()=>t.removeEventListener("change",n)):(t.addListener(n),()=>t.removeListener(n))},[]),r}function vn(){return M?window.matchMedia("(prefers-reduced-motion: reduce)").matches:false}function yn(r){return me()?r.reduced:r.default}function xn(){return !me()}function Sn(r,e){return me()?e:r}var Rn=({from:r,to:e,config:t={},onRest:n,children:i})=>{let s=useRef(null),[o,c]=useState(r);return useEffect(()=>{let u=I(r,t);return u.subscribe(c),s.current=u,requestAnimationFrame(()=>{u.set(e,{...t,onRest:n});}),()=>u.destroy()},[]),useEffect(()=>{s.current?.set(e,{...t,onRest:n});},[e,t,n]),jsx(Fragment,{children:i(o)})};function ae(r){let e={};for(let t in r)typeof r[t]=="number"&&(e[t]=r[t]);return e}function S(r){return nt.forwardRef(({children:e,style:t={},config:n={},initial:i,animate:s,exit:o,whileHover:c,whileTap:u,whileFocus:a,whileDrag:p,whileInView:f,viewport:l,onAnimationComplete:m,onHoverStart:h,onHoverEnd:d,onTapStart:b,onTap:y,onTapCancel:T,...x},R)=>{let D=useRef(null),v=useRef(null),[E,j]=useState({}),X=useRef(true),Y=useRef(false),[Z,ue]=useState(false),[V,G]=useState(false),[Q,ee]=useState(false),[te,ge]=useState(false),[he,Fe]=useState(false),Ue=useRef(false),_e=useContext(O),B=_e?.isPresent??true,be=_e?.safeToRemove,pt=useCallback(g=>{v.current=g,typeof R=="function"?R(g):R&&(R.current=g);},[R]);useEffect(()=>{if(!f||!v.current||!M)return;let g=l?.amount==="all"?1:l?.amount==="some"?0:typeof l?.amount=="number"?l.amount:.5,w=new IntersectionObserver(k=>{k.forEach(U=>{if(U.isIntersecting){if(l?.once&&Ue.current)return;Fe(true),Ue.current=true;}else l?.once||Fe(false);});},{rootMargin:l?.margin??"0px",threshold:g});return w.observe(v.current),()=>w.disconnect()},[f,l?.once,l?.margin,l?.amount]);let ne=useCallback(()=>{if(!B&&o)return o;let g=s?{...s}:{};return f&&he&&(g={...g,...f}),a&&Q&&(g={...g,...a}),c&&Z&&(g={...g,...c}),p&&te&&(g={...g,...p}),u&&V&&(g={...g,...u}),Object.keys(g).length===0?Object.fromEntries(Object.entries(t).filter(w=>typeof w[1]=="number")):g},[B,o,s,t,c,u,a,p,f,Z,V,Q,te,he]),mt=useCallback(()=>i===false?ne():i||ne(),[i,ne]);useEffect(()=>{let g=mt(),w=ae(g);if(Object.keys(w).length===0)return;let k=I(w,n);return k.subscribe(U=>{j(U);}),D.current=k,()=>k.destroy()},[n.stiffness,n.damping]),useEffect(()=>{if(!D.current)return;let g=ne(),w=ae(g);if(X.current){if(X.current=false,i&&i!==false&&s){let k=ae(i),U=ae(s);Object.keys(U).some(He=>k[He]!==U[He])&&D.current.set(U);}return}D.current.set(w);},[B,s,o,ne,i,Z,V,Q,te,he]),useEffect(()=>{if(!B&&o&&be&&!Y.current){ae(o);let k=setTimeout(()=>{D.current&&setTimeout(()=>{Y.current||(Y.current=true,be(),m?.());},500);},50);return ()=>clearTimeout(k)}},[B,o,be,m]),useEffect(()=>{B&&(Y.current=false);},[B]);let dt=useCallback(g=>{c&&ue(true),h?.(g),x.onMouseEnter?.(g);},[c,h,x.onMouseEnter]),gt=useCallback(g=>{c&&ue(false),u&&G(false),d?.(g),x.onMouseLeave?.(g);},[c,u,d,x.onMouseLeave]),ht=useCallback(g=>{u&&G(true),b?.(g),x.onPointerDown?.(g);},[u,b,x.onPointerDown]),bt=useCallback(g=>{u&&V&&(G(false),y?.(g)),x.onPointerUp?.(g);},[u,V,y,x.onPointerUp]),vt=useCallback(g=>{u&&V&&(G(false),T?.(g)),x.onPointerCancel?.(g);},[u,V,T,x.onPointerCancel]),yt=useCallback(g=>{a&&ee(true),x.onFocus?.(g);},[a,x.onFocus]),xt=useCallback(g=>{a&&ee(false),x.onBlur?.(g);},[a,x.onBlur]);useEffect(()=>{if(!u||!V)return;let g=()=>{G(false);};return window.addEventListener("pointerup",g),window.addEventListener("pointercancel",g),()=>{window.removeEventListener("pointerup",g),window.removeEventListener("pointercancel",g);}},[u,V]);let St=Object.fromEntries(Object.entries(t).filter(([g,w])=>typeof w!="number")),F={};return (c||h||d)&&(F.onMouseEnter=dt,F.onMouseLeave=gt),(u||b||y||T)&&(F.onPointerDown=ht,F.onPointerUp=bt,F.onPointerCancel=vt),a&&(F.onFocus=yt,F.onBlur=xt),nt.createElement(r,{...x,...F,ref:pt,style:{...St,...E}},e)})}var Vn={div:S("div"),span:S("span"),button:S("button"),a:S("a"),p:S("p"),h1:S("h1"),h2:S("h2"),h3:S("h3"),h4:S("h4"),h5:S("h5"),h6:S("h6"),ul:S("ul"),ol:S("ol"),li:S("li"),section:S("section"),article:S("article"),header:S("header"),footer:S("footer"),nav:S("nav"),main:S("main"),aside:S("aside"),img:S("img"),svg:S("svg"),path:S("path"),circle:S("circle"),rect:S("rect"),g:S("g")};var On=({items:r,keys:e,from:t,to:n,config:i={},reverse:s=false,children:o})=>{let c=useRef(null),[u,a]=useState(()=>r.map(()=>({...t})));return useEffect(()=>{let p=Ce(r.length,i),f=p.subscribe(m=>{a(m.map(h=>({...n,x:h})));});c.current=p;let l=Object.values(n)[0];return p.set(l),()=>{f(),p.destroy();}},[r.length,i.stiffness,i.damping]),useEffect(()=>{let p=Object.values(n)[0];c.current?.set(p);},[n]),jsx(Fragment,{children:r.map((p,f)=>jsx(nt.Fragment,{children:o(u[f],p,s?r.length-1-f:f)},e(p,f)))})};function de({id:r,children:e,isPresent:t,onExitComplete:n,custom:i}){let s=useRef(r);s.current=r;let o=useCallback(()=>{n(s.current);},[n]),c=useMemo(()=>({id:r,isPresent:t,safeToRemove:o,custom:i}),[r,t,o,i]),u=useRef(false);return useEffect(()=>{if(!t&&!u.current){u.current=true;let a=setTimeout(()=>{o();},1e4);return ()=>clearTimeout(a)}t&&(u.current=false);},[t,o]),jsx(O.Provider,{value:c,children:e})}var Hn=typeof window<"u"?useLayoutEffect:useEffect;function lt(r){return r.key!==null?String(r.key):""}function Xn(r){let e={};return Children.forEach(r,t=>{if(isValidElement(t)){let n=lt(t);n&&(e[n]=t);}}),e}function Yn({children:r,custom:e,initial:t=true,mode:n="sync",onExitComplete:i}){let s=useRef(true),[o,c]=useState({}),u=useRef({}),[,a]=useState(0),p=useRef(0),f=Xn(r);Hn(()=>{let d=u.current,b={};for(let y in d)if(!(y in f)){let T=d[y];T&&(b[y]=T);}Object.keys(b).length>0&&(c(y=>({...y,...b})),p.current+=Object.keys(b).length),u.current=f,s.current&&(s.current=false);});let l=d=>{c(b=>{let y={...b};return delete y[d],y}),p.current--,p.current===0&&i&&i(),n==="wait"&&a(b=>b+1);},m=n!=="wait"||Object.keys(o).length===0,h=[];for(let d in o){let b=o[d];b&&h.push(jsx(de,{id:d,isPresent:false,onExitComplete:l,custom:e,children:cloneElement(b,{key:d})},`presence-${d}`));}return m&&Children.forEach(r,d=>{if(isValidElement(d)){let b=lt(d);if(!b){console.warn('AnimatePresence: Every child must have a unique "key" prop.');return}let y=!(s.current&&t===false);h.push(jsx(de,{id:b,isPresent:true,onExitComplete:l,custom:e,children:cloneElement(d,{key:b,...y?{}:{"data-initial-skip":true}})},`presence-${b}`));}}),jsx(Fragment,{children:h})}var Wn={config:{},reducedMotion:"user",initial:true,isReducedMotion:false},je=createContext(Wn);function qn(){return useContext(je)}function Nn(){return typeof window>"u"?false:window.matchMedia?.("(prefers-reduced-motion: reduce)").matches??false}function zn({config:r={},reducedMotion:e="user",initial:t=true,children:n}){let i=useContext(je),s=useMemo(()=>{let o=false;switch(e){case "always":o=true;break;case "never":o=false;break;default:o=Nn();}return {config:{...i.config,...r},reducedMotion:e,initial:t,isReducedMotion:o}},[r,e,t,i.config]);return jsx(je.Provider,{value:s,children:n})}export{Yn as AnimatePresence,Vn as Animated,zn as MotionConfig,ie as MotionValue,de as PresenceChild,O as PresenceContext,Rn as Spring,On as Trail,P as createMotionValue,vn as getReducedMotionPreference,M as isBrowser,Ze as isServer,Ct as mapRange,on as safeCancelAnimationFrame,rn as safeRequestAnimationFrame,nn as shouldSkipAnimation,We as transformValue,Bt as useAnimate,Kt as useCombinedTransform,jt as useDrag,mn as useFocus,Ut as useGesture,gn as useGestureAnimation,Le as useGestureState,fn as useHover,sn as useInView,an as useInViewCallback,un as useInViewMultiple,dn as useInteractionState,Xt as useIsPresent,tn as useIsomorphicLayoutEffect,qn as useMotionConfig,Ke as useMotionValue,Wt as useMotionValueState,qt as useMotionValueSync,Nt as useMotionValues,Ht as usePresence,Yt as usePresenceCustom,me as useReducedMotion,yn as useReducedMotionConfig,Sn as useReducedMotionValue,cn as useScroll,ln as useScrollVelocity,xn as useShouldAnimate,Pt as useSpring,Zt as useSpringTransform,Vt as useSpringValue,Ot as useSprings,pn as useTap,kt as useTrail,zt as useTransform,Jt as useVelocityTransform};//# sourceMappingURL=react.mjs.map
//# sourceMappingURL=react.mjs.map