{"version":3,"sources":["../src/core/config.ts","../src/core/physics.ts","../src/animation/loop.ts","../src/utils/math.ts","../src/utils/warnings.ts","../src/core/spring.ts","../src/core/spring-value.ts","../src/core/spring-group.ts","../src/core/variants.ts","../src/animation/sequence.ts","../src/animation/trail.ts","../src/animation/decay.ts","../src/animation/keyframes.ts","../src/interpolation/interpolate.ts","../src/interpolation/color.ts","../src/gesture/drag.ts","../src/gesture/scroll.ts","../src/gesture/advanced.ts","../src/utils/color.ts","../src/scroll/scroll-linked.ts","../src/animation/timeline.ts","../src/svg/morph.ts","../src/layout/shared.ts","../src/animation/stagger-patterns.ts","../src/core/MotionValue.ts","../src/svg/path.ts","../src/layout/flip.ts"],"names":["defaultConfig","springPresets","physicsPresets","getPhysicsPreset","name","createFeeling","feeling","adjustSpeed","preset","speed","stiffness","damping","adjustBounce","bounce","minDamping","maxDamping","configFromDuration","ms","configFromBounce","simulateSpring","position","velocity","target","config","mass","restSpeed","restDelta","displacement","absDisplacement","absVelocity","dt","springForce","dampingForce","acceleration","newVelocity","newPosition","isRest","calculatePeriod","calculateDampingRatio","isUnderdamped","isCriticallyDamped","ratio","isOverdamped","AnimationState","AnimationLoop","id","cb","now","rawDelta","clampedDelta","listener","toRemove","ref","animation","i","existingId","callback","count","delta","globalLoop","clamp","value","min","max","actualMin","actualMax","lerp","a","b","t","mapRange","inMin","inMax","outMin","outMax","degToRad","degrees","radToDeg","radians","isDev","warnedMessages","warnOnce","message","validateSpringConfig","validateDragConfig","rubberBandFactor","bounds","validateDecayConfig","deceleration","clearWarnings","SpringAnimationImpl","from","to","resolve","temp","_now","result","spring","SpringValueImpl","initial","mergedConfig","originalOnUpdate","originalOnComplete","subscriber","createSpringValue","SpringGroupImpl","initialValues","key","springValue","values","promises","createSpringGroup","resolveVariant","variant","custom","resolved","transition","getVariant","variants","mergeVariants","merged","isTransformProperty","isAnimatable","parseValueWithUnit","match","buildTransformString","transforms","x","y","applyValuesToElement","element","transform","calculateStaggerDelays","options","staggerChildren","staggerDirection","delayChildren","delays","index","createOrchestration","parentAnim","childrenAnims","when","delay","parent","children","anim","variantPresets","createVariantPreset","animate","exit","isVariants","v","isVariant","sequence","animations","createAnimation","parallel","stagger","items","startIndex","indices","used","offset","left","right","getDelay","_i","delayMs","TrailImpl","followDelay","springConfig","targetValue","delayFrames","targetFrame","startFrame","framesToWait","s","unsubscribers","unsubscribe","createTrail","DecayAnimationImpl","decay","keyframes","times","onKeyframe","onComplete","onUpdate","normalizedKeyframes","keyframeCount","kf","currentIndex","isPlaying","isPaused","currentValue","destroyed","createSpring","animateToNext","targetKf","checkComplete","parseKeyframeArray","isKeyframeArray","defaultInterpolateOptions","InterpolationImpl","source","input","output","extrapolate","extrapolateLeft","extrapolateRight","mode","specificMode","fallbackMode","interpolate","ColorInterpolationImpl","colorStrings","c","r","g","color","hexMatch","hex","rgbMatch","rgbaMatch","hslMatch","h","l","gray","hue2rgb","p","q","interpolateColor","colors","defaultDragConfig","DragSpringImpl","newX","newY","snapPoint","factor","snap","gridX","gridY","velocityMagnitude","threshold","nearestPoint","nearestDistance","point","dx","dy","distance","radius","constraints","parentRect","elementRect","padding","constraintRect","offsetX","offsetY","velocityX","velocityY","top","bottom","targetX","targetY","momentumX","momentumY","createDragSpring","defaultScrollConfig","ScrollSpringImpl","container","deltaX","deltaY","maxScrollX","maxScrollY","checkEnd","containerRect","createScrollSpring","getDistance","p1","p2","getAngle","getCenter","rubberBand","createPinchGesture","minScale","maxScale","enableRubberBand","onPinch","onPinchStart","onPinchEnd","enabled","active","initialDistance","initialScale","currentScale","lastScale","startTime","lastTime","touches","scaleSpring","createState","event","first","last","touchArray","origin","handleTouchStart","e","touch","handleTouchMove","currentDistance","newScale","handleTouchEnd","targetScale","createRotateGesture","initialEnabled","onRotate","onRotateStart","onRotateEnd","initialAngle","currentAngle","lastAngle","angleOffset","newAngle","angleDelta","createSwipeGesture","velocityThreshold","distanceThreshold","maxDuration","axis","onSwipe","onSwipeStart","onSwipeEnd","startPoint","lastPoint","pointerId","direction","duration","movement","detectDirection","absX","absY","velX","velY","meetsDistanceX","meetsDistanceY","meetsVelocityX","meetsVelocityY","handlePointerDown","handlePointerMove","handlePointerUp","state","createLongPressGesture","movementTolerance","onLongPress","onPressStart","onPressEnd","triggered","timerId","createGestures","controllers","parseColor","hexToRgb","hslToRgb","rgbToHex","toHex","n","cleanHex","rgbToHsl","lerpColor","colorA","colorB","createScrollProgress","smooth","progress","smoothedProgress","lastScrollY","rafId","subscribers","calculateProgress","scrollY","windowHeight","newProgress","isInView","visibleRatio","rect","elementTop","elementHeight","endPoint","scrollStart","scrollEnd","documentHeight","notify","info","onScroll","initialInfo","createParallax","easing","rootMargin","observer","update","elementCenter","viewportCenter","normalizedDistance","entries","entry","createScrollTrigger","start","end","startOffset","endOffset","onEnter","onLeave","onProgress","once","scrub","isActive","hasEntered","getPosition","pos","startPos","endPos","triggerStart","triggerEnd","startProgress","endProgress","rawProgress","wasActive","createScrollLinkedValue","scrollProgress","inputRange","outputRange","shouldClamp","firstOutput","isColorOutput","firstInput","lastInput","segmentIndex","curr","next","segmentStart","segmentEnd","segmentProgress","startValue","endValue","scrollEasings","timelineIdCounter","createTimeline","defaults","autoplay","repeat","yoyo","repeatDelay","onStart","onRepeat","segments","labels","callbacks","pauses","currentTime","totalDuration","isReversed","repeatCount","lastFrameTime","hasStarted","insertTime","parsePosition","lastSegment","labelMatch","labelName","labelTime","offsetValue","resolveTarget","extractNumericProps","props","applyPropsToElement","cssProps","prop","val","getCurrentElementValues","current","computed","tick","timestamp","deltaTime","callbacksAtTime","pauseCallback","segment","shouldBeActive","timeline","endTime","numericProps","currentValues","originalOnStart","targetValues","fromProps","toProps","fromNumeric","toNumeric","label","time","tween","allTo","targets","tl","parsePath","d","commands","regex","matches","matchItem","typeChar","valuesStr","type","toAbsolute","cmd","absValues","currentY","samplePath","samples","points","svgNS","svg","path","step","interpolatePoint","pointsToPath","firstPoint","createMorph","initialPath","currentPath","fromPoints","toPoints","currentPoints","initialCommands","progressSpring","targetCommands","targetPoints","createMorphSequence","paths","firstPath","morph","targetIndex","targetPath","shapes","cx","cy","width","height","rx","sides","angle","outerR","innerR","size","hw","hh","measureElement","styles","applyTransform","scaleX","scaleY","compensatedRadius","resetTransform","createLayoutGroup","defaultSpring","onAnimationStart","onAnimationComplete","crossfade","elements","previousMeasurements","register","existing","measurement","unregister","group","animateElement","previousMeasurement","currentMeasurement","groupIdCounter","createSharedLayoutContext","groups","groupId","createAutoLayout","root","attribute","debounceTime","layoutConfig","resizeObserver","debounceTimer","scanAndRegister","el","debouncedUpdate","mutations","shouldUpdate","mutation","node","seededRandom","seed","gridDistance","columns","rows","col","row","originCol","originRow","linearStagger","reverseStagger","centerStagger","center","distanceFromCenter","maxDistance","edgeStagger","maxDelay","gridStagger","waveStagger","frequency","amplitude","waveOffset","spiralStagger","startFrom","spiral","visited","idx","originalIndex","spiralPosition","randomStagger","minMultiplier","maxMultiplier","random","multiplier","customStagger","fn","applyStagger","opt","staggerPresets","MotionValue","initialValue","newValue","createMotionValue","transformValue","derived","normalized","createPathAnimation","autoPlay","totalLength","waitForRest","check","getPathLength","preparePathForAnimation","initialProgress","length","getPointAtProgress","createFlip","deltaWidth","deltaHeight","cancelled","originalTransform","originalTransformOrigin","invertedT","cleanup","flip","mutate","flipBatch","firstStates"],"mappings":"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","file":"index.mjs","sourcesContent":["/**\n * Spring configuration interface\n */\nexport interface SpringConfig {\n  /** Spring stiffness (default: 100) */\n  stiffness?: number\n  /** Damping ratio (default: 10) */\n  damping?: number\n  /** Mass (default: 1) */\n  mass?: number\n  /** Initial velocity */\n  velocity?: number\n  /** Speed threshold for considering spring at rest (default: 0.01) */\n  restSpeed?: number\n  /** Position threshold for considering spring at rest (default: 0.01) */\n  restDelta?: number\n  /** Clamp value to [from, to] range */\n  clamp?: boolean\n  /** Callback called on each update */\n  onUpdate?: (value: number) => void\n  /** Callback called when animation starts */\n  onStart?: () => void\n  /** Callback called when animation reaches target */\n  onComplete?: () => void\n  /** Callback called when spring is at rest */\n  onRest?: () => void\n}\n\n/**\n * Default spring configuration\n */\nexport const defaultConfig: SpringConfig = {\n  stiffness: 100,\n  damping: 10,\n  mass: 1,\n  velocity: 0,\n  restSpeed: 0.01,\n  restDelta: 0.01,\n  clamp: false,\n}\n\n/**\n * Spring presets interface\n */\nexport interface SpringPresets {\n  /** Default spring: { stiffness: 100, damping: 10 } */\n  default: SpringConfig\n  /** Gentle spring: { stiffness: 120, damping: 14 } */\n  gentle: SpringConfig\n  /** Wobbly spring: { stiffness: 180, damping: 12 } */\n  wobbly: SpringConfig\n  /** Stiff spring: { stiffness: 210, damping: 20 } */\n  stiff: SpringConfig\n  /** Slow spring: { stiffness: 280, damping: 60 } */\n  slow: SpringConfig\n  /** Molasses spring: { stiffness: 280, damping: 120 } */\n  molasses: SpringConfig\n  /** Bouncy spring: { stiffness: 200, damping: 8 } */\n  bounce: SpringConfig\n  /** No wobble spring: { stiffness: 170, damping: 26 } */\n  noWobble: SpringConfig\n}\n\n/**\n * Built-in spring presets\n */\nexport const springPresets: SpringPresets = {\n  default: { stiffness: 100, damping: 10 },\n  gentle: { stiffness: 120, damping: 14 },\n  wobbly: { stiffness: 180, damping: 12 },\n  stiff: { stiffness: 210, damping: 20 },\n  slow: { stiffness: 280, damping: 60 },\n  molasses: { stiffness: 280, damping: 120 },\n  bounce: { stiffness: 200, damping: 8 },\n  noWobble: { stiffness: 170, damping: 26 },\n}\n\n// ============ Semantic Physics Presets ============\n\n/**\n * Physics presets with semantic, use-case oriented names\n * These presets are designed for specific UI interactions and feel natural\n */\nexport const physicsPresets = {\n  // ---- UI Interactions ----\n\n  /** Button press/release - snappy response */\n  button: { stiffness: 400, damping: 30, mass: 1 },\n\n  /** Toggle switch - quick but smooth */\n  toggle: { stiffness: 500, damping: 35, mass: 0.8 },\n\n  /** Checkbox/Radio - instant feedback */\n  checkbox: { stiffness: 600, damping: 40, mass: 0.5 },\n\n  /** Hover state - subtle and responsive */\n  hover: { stiffness: 300, damping: 25, mass: 0.8 },\n\n  /** Focus ring - gentle attention */\n  focus: { stiffness: 200, damping: 20, mass: 1 },\n\n  // ---- Layout & Navigation ----\n\n  /** Page transitions - smooth and professional */\n  pageTransition: { stiffness: 100, damping: 20, mass: 1.5 },\n\n  /** Modal/Dialog entry - dramatic but controlled */\n  modalEnter: { stiffness: 300, damping: 25, mass: 1 },\n\n  /** Modal/Dialog exit - quick departure */\n  modalExit: { stiffness: 400, damping: 35, mass: 0.8 },\n\n  /** Sidebar slide - smooth glide */\n  sidebar: { stiffness: 200, damping: 28, mass: 1.2 },\n\n  /** Dropdown menu - snappy reveal */\n  dropdown: { stiffness: 400, damping: 30, mass: 0.8 },\n\n  /** Toast notification - attention-grabbing */\n  toast: { stiffness: 350, damping: 25, mass: 0.9 },\n\n  /** Tooltip - quick and subtle */\n  tooltip: { stiffness: 500, damping: 40, mass: 0.6 },\n\n  // ---- Gestures & Drag ----\n\n  /** Drag release - momentum with settle */\n  dragRelease: { stiffness: 150, damping: 20, mass: 1 },\n\n  /** Swipe action - decisive movement */\n  swipe: { stiffness: 250, damping: 22, mass: 0.9 },\n\n  /** Pull to refresh - elastic and responsive */\n  pullToRefresh: { stiffness: 180, damping: 18, mass: 1.2 },\n\n  /** Snap to position - magnetic feel */\n  snap: { stiffness: 400, damping: 35, mass: 0.8 },\n\n  /** Rubber band - iOS-style overscroll */\n  rubberBand: { stiffness: 300, damping: 15, mass: 0.8 },\n\n  // ---- Cards & Items ----\n\n  /** Card flip - dramatic reveal */\n  cardFlip: { stiffness: 150, damping: 18, mass: 1.5 },\n\n  /** Card hover lift - subtle elevation */\n  cardHover: { stiffness: 400, damping: 30, mass: 0.7 },\n\n  /** List item enter - staggered animation */\n  listItem: { stiffness: 300, damping: 28, mass: 0.9 },\n\n  /** Accordion expand - smooth reveal */\n  accordion: { stiffness: 200, damping: 25, mass: 1.1 },\n\n  // ---- Loading & Progress ----\n\n  /** Skeleton shimmer - continuous flow */\n  skeleton: { stiffness: 80, damping: 15, mass: 2 },\n\n  /** Progress bar - steady advancement */\n  progress: { stiffness: 150, damping: 25, mass: 1 },\n\n  /** Spinner rotation - smooth continuous */\n  spinner: { stiffness: 100, damping: 12, mass: 1.5 },\n\n  // ---- Emphasis & Attention ----\n\n  /** Pulse effect - gentle attention */\n  pulse: { stiffness: 120, damping: 10, mass: 1.2 },\n\n  /** Shake effect - error emphasis */\n  shake: { stiffness: 500, damping: 15, mass: 0.6 },\n\n  /** Bounce effect - playful emphasis */\n  bounceAttention: { stiffness: 400, damping: 10, mass: 0.7 },\n\n  /** Pop effect - sudden appearance */\n  pop: { stiffness: 500, damping: 20, mass: 0.6 },\n\n  /** Wiggle effect - playful motion */\n  wiggle: { stiffness: 300, damping: 8, mass: 0.8 },\n\n  // ---- Mobile-Specific ----\n\n  /** iOS spring - Apple-like feel */\n  ios: { stiffness: 300, damping: 20, mass: 1 },\n\n  /** Android spring - Material Design feel */\n  android: { stiffness: 350, damping: 25, mass: 0.9 },\n\n  /** Haptic feedback - quick micro-interaction */\n  haptic: { stiffness: 600, damping: 45, mass: 0.4 },\n\n  // ---- Natural Physics ----\n\n  /** Pendulum - gravity-like swing */\n  pendulum: { stiffness: 50, damping: 5, mass: 2 },\n\n  /** Jelly - soft and wobbly */\n  jelly: { stiffness: 150, damping: 8, mass: 1.5 },\n\n  /** Elastic - stretchy rubber */\n  elastic: { stiffness: 200, damping: 10, mass: 1.2 },\n\n  /** Heavy - weighted and deliberate */\n  heavy: { stiffness: 150, damping: 30, mass: 3 },\n\n  /** Light - airy and quick */\n  light: { stiffness: 400, damping: 25, mass: 0.5 },\n\n  /** Liquid - fluid motion */\n  liquid: { stiffness: 100, damping: 20, mass: 2 },\n\n} as const\n\nexport type PhysicsPresetName = keyof typeof physicsPresets\n\n/**\n * Get a physics preset by name\n */\nexport function getPhysicsPreset(name: PhysicsPresetName): SpringConfig {\n  return { ...physicsPresets[name] }\n}\n\n/**\n * Create a custom preset based on a semantic description\n * @param feeling - How the animation should feel\n */\nexport function createFeeling(feeling: 'snappy' | 'smooth' | 'bouncy' | 'heavy' | 'light' | 'elastic'): SpringConfig {\n  switch (feeling) {\n    case 'snappy':\n      return { stiffness: 400, damping: 30, mass: 0.8 }\n    case 'smooth':\n      return { stiffness: 150, damping: 25, mass: 1.2 }\n    case 'bouncy':\n      return { stiffness: 300, damping: 12, mass: 1 }\n    case 'heavy':\n      return { stiffness: 100, damping: 30, mass: 2.5 }\n    case 'light':\n      return { stiffness: 400, damping: 25, mass: 0.5 }\n    case 'elastic':\n      return { stiffness: 200, damping: 10, mass: 1.2 }\n    default:\n      return { stiffness: 100, damping: 10, mass: 1 }\n  }\n}\n\n/**\n * Adjust a preset for speed\n * @param preset - Base preset config\n * @param speed - Speed multiplier (0.5 = half speed, 2 = double speed)\n */\nexport function adjustSpeed(preset: SpringConfig, speed: number): SpringConfig {\n  const stiffness = (preset.stiffness ?? 100) * speed\n  const damping = (preset.damping ?? 10) * Math.sqrt(speed)\n  return { ...preset, stiffness, damping }\n}\n\n/**\n * Adjust a preset for bounciness\n * @param preset - Base preset config\n * @param bounce - Bounce factor (0 = no bounce, 1 = very bouncy)\n */\nexport function adjustBounce(preset: SpringConfig, bounce: number): SpringConfig {\n  const baseDamping = preset.damping ?? 10\n  const minDamping = 5\n  const maxDamping = 40\n  const damping = maxDamping - (bounce * (maxDamping - minDamping))\n  return { ...preset, damping: Math.max(minDamping, Math.min(maxDamping, damping)) }\n}\n\n/**\n * Create a spring config that settles in approximately the given duration\n * @param ms - Approximate settling time in milliseconds\n * @returns Spring config\n */\nexport function configFromDuration(ms: number): SpringConfig {\n  if (ms < 300) {\n    return { stiffness: 170, damping: 26 }\n  }\n  if (ms < 500) {\n    return { stiffness: 100, damping: 20 }\n  }\n  return { stiffness: 80, damping: 15 }\n}\n\n/**\n * Create a spring config with specific bounce amount\n * @param bounce - Bounce factor (0 = no bounce, 0.5 = 50% overshoot)\n * @returns Spring config\n */\nexport function configFromBounce(bounce: number): SpringConfig {\n  if (bounce <= 0) {\n    return { stiffness: 170, damping: 26 }\n  }\n  if (bounce <= 0.25) {\n    return { stiffness: 200, damping: 12 }\n  }\n  return { stiffness: 200, damping: 8 }\n}\n","import type { SpringConfig } from './config.js'\n\n/**\n * Result of a spring physics simulation step\n */\nexport interface SimulationResult {\n  /** New position */\n  position: number\n  /** New velocity */\n  velocity: number\n  /** Whether the spring is at rest */\n  isRest: boolean\n}\n\n/**\n * Simulate one step of spring physics using semi-implicit Euler integration\n *\n * The spring follows the damped harmonic oscillator equation:\n * F = -k * x - c * v\n * a = F / m\n *\n * Where:\n * - k = stiffness (spring constant)\n * - c = damping coefficient\n * - m = mass\n * - x = displacement from rest (target - position)\n * - v = velocity\n * - a = acceleration\n * - dt = time step (1/60 for 60fps animation)\n *\n * @param position - Current position\n * @param velocity - Current velocity\n * @param target - Target position (rest position)\n * @param config - Spring configuration\n * @returns Simulation result with new position, velocity, and rest state\n */\nexport function simulateSpring(\n  position: number,\n  velocity: number,\n  target: number,\n  config: SpringConfig\n): SimulationResult {\n  const {\n    stiffness = 100,\n    damping = 10,\n    mass = 1,\n    restSpeed = 0.01,\n    restDelta = 0.01,\n  } = config\n\n  // Calculate displacement from target (cached for reuse)\n  const displacement = target - position\n  const absDisplacement = Math.abs(displacement)\n  const absVelocity = Math.abs(velocity)\n\n  // Early exit optimization: if already at rest, skip expensive calculations\n  // This significantly improves performance for springs that have settled\n  if (absDisplacement <= restDelta && absVelocity <= restSpeed) {\n    return {\n      position: target, // Snap to exact target\n      velocity: 0,\n      isRest: true,\n    }\n  }\n\n  // Time step for 60fps animation\n  // This ensures the spring simulation is stable with typical stiffness values\n  const dt = 1 / 60\n\n  // Calculate spring force (Hooke's law: F = -k * x)\n  const springForce = stiffness * displacement\n\n  // Calculate damping force (opposes velocity: F = -c * v)\n  // Optimization: skip multiplication if velocity is negligible\n  const dampingForce = absVelocity > 0.0001 ? damping * velocity : 0\n\n  // Calculate total force and acceleration (Newton's second law: a = F/m)\n  const acceleration = (springForce - dampingForce) / mass\n\n  // Semi-implicit Euler integration\n  // Update velocity first, then use new velocity to update position\n  // This provides better energy conservation than standard Euler\n  const newVelocity = velocity + acceleration * dt\n  const newPosition = position + newVelocity * dt\n\n  // Check if spring is at rest\n  // Spring is at rest when:\n  // 1. Close to target position (displacement < restDelta)\n  // 2. Moving slowly (velocity < restSpeed)\n  const isRest =\n    absDisplacement <= restDelta &&\n    Math.abs(newVelocity) <= restSpeed\n\n  return {\n    position: newPosition,\n    velocity: newVelocity,\n    isRest,\n  }\n}\n\n/**\n * Calculate the period of oscillation for a spring\n * @param stiffness - Spring stiffness\n * @param mass - Spring mass\n * @returns Period in seconds\n */\nexport function calculatePeriod(stiffness: number, mass: number): number {\n  return 2 * Math.PI * Math.sqrt(mass / stiffness)\n}\n\n/**\n * Calculate the damping ratio for a spring\n * @param damping - Damping coefficient\n * @param stiffness - Spring stiffness\n * @param mass - Spring mass\n * @returns Damping ratio\n */\nexport function calculateDampingRatio(\n  damping: number,\n  stiffness: number,\n  mass: number\n): number {\n  return damping / (2 * Math.sqrt(stiffness * mass))\n}\n\n/**\n * Check if a spring is underdamped (will oscillate)\n * @param config - Spring configuration\n * @returns True if underdamped\n */\nexport function isUnderdamped(config: SpringConfig): boolean {\n  const { stiffness = 100, damping = 10, mass = 1 } = config\n  const ratio = calculateDampingRatio(damping, stiffness, mass)\n  return ratio < 1\n}\n\n/**\n * Check if a spring is critically damped (fastest return to rest without oscillation)\n * @param config - Spring configuration\n * @returns True if critically damped\n */\nexport function isCriticallyDamped(config: SpringConfig): boolean {\n  const { stiffness = 100, damping = 10, mass = 1 } = config\n  const ratio = calculateDampingRatio(damping, stiffness, mass)\n  return Math.abs(ratio - 1) < 0.001\n}\n\n/**\n * Check if a spring is overdamped (slow return to rest without oscillation)\n * @param config - Spring configuration\n * @returns True if overdamped\n */\nexport function isOverdamped(config: SpringConfig): boolean {\n  const { stiffness = 100, damping = 10, mass = 1 } = config\n  const ratio = calculateDampingRatio(damping, stiffness, mass)\n  return ratio > 1\n}\n","/**\n * Animation state enum\n */\nexport enum AnimationState {\n  Idle = 'idle',\n  Running = 'running',\n  Paused = 'paused',\n  Complete = 'complete',\n}\n\n/**\n * Interface for objects that can be animated\n */\nexport interface Animatable {\n  /**\n   * Update the animation\n   * @param now - Current timestamp from performance.now()\n   */\n  update(now: number): void\n\n  /**\n   * Check if the animation is complete\n   */\n  isComplete(): boolean\n}\n\n/**\n * Callback type for cleanup notifications\n */\nexport type CleanupCallback = (id: number) => void\n\n/**\n * Maximum allowed delta time (ms) to prevent physics explosions after tab suspension\n * If more time has passed, we clamp to this value for stable simulation\n */\nconst MAX_DELTA_TIME = 64 // ~15fps minimum, prevents huge jumps\n\n/**\n * Global animation loop manager\n * Uses requestAnimationFrame to drive all animations\n * Features:\n * - WeakRef-based animation tracking for memory safety\n * - FinalizationRegistry for cleanup callbacks\n * - Frame-drop resilience with delta time clamping\n * - Single-pass update + cleanup for O(n) performance\n * - Frame event listeners for external monitoring\n */\nclass AnimationLoop {\n  private animations = new Set<WeakRef<Animatable>>()\n  private animationMap = new WeakMap<Animatable, WeakRef<Animatable>>()\n  private rafId: number | null = null\n  private isRunning = false\n  private lastTime: number = 0\n  private nextId = 1\n  private idMap = new WeakMap<Animatable, number>()\n  private frameListeners = new Set<(deltaTime: number) => void>()\n\n  // FinalizationRegistry for automatic cleanup notifications\n  private registry = new FinalizationRegistry<number>((id) => {\n    this.cleanupCallbacks.forEach((cb) => cb(id))\n  })\n  private cleanupCallbacks = new Set<CleanupCallback>()\n\n  /**\n   * Add an animation to the loop\n   * Uses WeakRef to prevent memory leaks if animation is garbage collected\n   * @returns Unique ID for this animation\n   */\n  add(animation: Animatable): number {\n    // Check if already added\n    const existingId = this.idMap.get(animation)\n    if (existingId !== undefined) return existingId\n\n    const id = this.nextId++\n    const ref = new WeakRef(animation)\n    this.animations.add(ref)\n    this.animationMap.set(animation, ref)\n    this.idMap.set(animation, id)\n\n    // Register for finalization callback\n    this.registry.register(animation, id)\n\n    this.start()\n    return id\n  }\n\n  /**\n   * Remove an animation from the loop\n   */\n  remove(animation: Animatable): void {\n    const ref = this.animationMap.get(animation)\n    if (ref) {\n      this.animations.delete(ref)\n      this.animationMap.delete(animation)\n      this.idMap.delete(animation)\n      // Note: unregister not strictly needed as registry uses weak refs\n    }\n    if (this.animations.size === 0) {\n      this.stop()\n    }\n  }\n\n  /**\n   * Register a callback for when animations are garbage collected\n   * Useful for debugging memory leaks\n   */\n  onCleanup(callback: CleanupCallback): () => void {\n    this.cleanupCallbacks.add(callback)\n    return () => this.cleanupCallbacks.delete(callback)\n  }\n\n  /**\n   * Register a callback for each frame\n   * Receives delta time in milliseconds\n   */\n  onFrame(callback: (deltaTime: number) => void): () => void {\n    this.frameListeners.add(callback)\n    return () => this.frameListeners.delete(callback)\n  }\n\n  /**\n   * Start the animation loop\n   */\n  private start(): void {\n    if (this.isRunning) return\n    this.isRunning = true\n    this.lastTime = performance.now()\n    this.tick()\n  }\n\n  /**\n   * Stop the animation loop\n   */\n  private stop(): void {\n    this.isRunning = false\n    if (this.rafId !== null) {\n      cancelAnimationFrame(this.rafId)\n      this.rafId = null\n    }\n  }\n\n  /**\n   * Single animation frame - optimized single-pass update + cleanup\n   * Features:\n   * - WeakRef dereferencing with automatic cleanup of dead refs\n   * - Delta time clamping for frame-drop resilience\n   * - O(n) single-pass performance\n   * - Frame listener notifications\n   */\n  private tick = (): void => {\n    const now = performance.now()\n\n    // Calculate and clamp delta time to prevent physics explosions\n    // This handles tab suspension, debugger pauses, etc.\n    const rawDelta = now - this.lastTime\n    const clampedDelta = Math.min(rawDelta, MAX_DELTA_TIME)\n    this.lastTime = now\n\n    // Notify frame listeners\n    for (const listener of this.frameListeners) {\n      listener(clampedDelta)\n    }\n\n    // Single pass: update all animations and collect refs to remove\n    const toRemove: WeakRef<Animatable>[] = []\n\n    for (const ref of this.animations) {\n      const animation = ref.deref()\n\n      // If WeakRef is dead (animation was garbage collected), mark for removal\n      if (!animation) {\n        toRemove.push(ref)\n        continue\n      }\n\n      animation.update(now)\n\n      if (animation.isComplete()) {\n        toRemove.push(ref)\n        this.animationMap.delete(animation)\n        this.idMap.delete(animation)\n      }\n    }\n\n    // Remove dead/completed refs\n    for (let i = 0; i < toRemove.length; i++) {\n      this.animations.delete(toRemove[i]!)\n    }\n\n    // Continue or stop loop\n    if (this.animations.size > 0) {\n      this.rafId = requestAnimationFrame(this.tick)\n    } else {\n      this.stop()\n    }\n  }\n\n  /**\n   * Get the number of active animations (including potentially dead refs)\n   */\n  get size(): number {\n    return this.animations.size\n  }\n\n  /**\n   * Get count of actually alive animations (for debugging/testing)\n   */\n  getAliveCount(): number {\n    let count = 0\n    for (const ref of this.animations) {\n      if (ref.deref()) count++\n    }\n    return count\n  }\n\n  /**\n   * Get current frame rate (based on last delta)\n   */\n  getFPS(): number {\n    const delta = performance.now() - this.lastTime\n    return delta > 0 ? Math.round(1000 / delta) : 60\n  }\n}\n\n/**\n * Global animation loop instance\n */\nexport const globalLoop = new AnimationLoop()\n","/**\n * Clamp a value between a minimum and maximum\n * @param value - The value to clamp\n * @param min - The minimum allowed value\n * @param max - The maximum allowed value\n * @returns The clamped value\n */\nexport function clamp(value: number, min: number, max: number): number {\n  // Handle inverted min/max (swap them)\n  const actualMin = Math.min(min, max)\n  const actualMax = Math.max(min, max)\n  return Math.max(actualMin, Math.min(actualMax, value))\n}\n\n/**\n * Linear interpolation between two values\n * @param a - The start value\n * @param b - The end value\n * @param t - The interpolation factor (0-1)\n * @returns The interpolated value\n */\nexport function lerp(a: number, b: number, t: number): number {\n  return a + (b - a) * t\n}\n\n/**\n * Map a value from one range to another\n * @param value - The value to map\n * @param inMin - The minimum of the input range\n * @param inMax - The maximum of the input range\n * @param outMin - The minimum of the output range\n * @param outMax - The maximum of the output range\n * @returns The mapped value\n */\nexport function mapRange(\n  value: number,\n  inMin: number,\n  inMax: number,\n  outMin: number,\n  outMax: number\n): number {\n  return ((value - inMin) * (outMax - outMin)) / (inMax - inMin) + outMin\n}\n\n/**\n * Convert degrees to radians\n * @param degrees - The angle in degrees\n * @returns The angle in radians\n */\nexport function degToRad(degrees: number): number {\n  return (degrees * Math.PI) / 180\n}\n\n/**\n * Convert radians to degrees\n * @param radians - The angle in radians\n * @returns The angle in degrees\n */\nexport function radToDeg(radians: number): number {\n  return (radians * 180) / Math.PI\n}\n","/**\n * Development mode warnings for SpringKit\n * These warnings help developers avoid common configuration mistakes\n */\n\nconst isDev = typeof process !== 'undefined' && process.env?.NODE_ENV !== 'production'\nconst warnedMessages = new Set<string>()\n\n/**\n * Log a warning message once (won't repeat the same message)\n */\nfunction warnOnce(message: string): void {\n  if (!isDev || warnedMessages.has(message)) return\n  warnedMessages.add(message)\n  console.warn(`[SpringKit] ${message}`)\n}\n\n/**\n * Validate spring configuration and warn about potential issues\n */\nexport function validateSpringConfig(config: {\n  stiffness?: number\n  damping?: number\n  mass?: number\n}): void {\n  if (!isDev) return\n\n  const { stiffness = 100, damping = 10, mass = 1 } = config\n\n  // Check for extreme stiffness with low damping (unstable oscillation)\n  if (stiffness > 400 && damping < 10) {\n    warnOnce(\n      `High stiffness (${stiffness}) with low damping (${damping}) may cause excessive oscillation. ` +\n      `Consider increasing damping to at least ${Math.round(stiffness / 20)} for smoother animation.`\n    )\n  }\n\n  // Check for very low stiffness (sluggish animation)\n  if (stiffness < 20) {\n    warnOnce(\n      `Very low stiffness (${stiffness}) will result in sluggish animation. ` +\n      `Consider using stiffness >= 50 for more responsive feel.`\n    )\n  }\n\n  // Check for very high damping (overdamped, no spring feel)\n  if (damping > stiffness) {\n    warnOnce(\n      `Damping (${damping}) is higher than stiffness (${stiffness}), ` +\n      `which removes the \"springy\" feel. Consider reducing damping for bouncier animation.`\n    )\n  }\n\n  // Check for zero or negative mass\n  if (mass <= 0) {\n    warnOnce(\n      `Mass must be positive. Got ${mass}. Using default mass of 1.`\n    )\n  }\n\n  // Check for very high mass (slow animation)\n  if (mass > 10) {\n    warnOnce(\n      `High mass (${mass}) will make the animation very slow. ` +\n      `Consider mass between 0.5 and 5 for typical use cases.`\n    )\n  }\n}\n\n/**\n * Validate drag configuration\n */\nexport function validateDragConfig(config: {\n  rubberBandFactor?: number\n  bounds?: {\n    left?: number\n    right?: number\n    top?: number\n    bottom?: number\n  }\n}): void {\n  if (!isDev) return\n\n  const { rubberBandFactor, bounds } = config\n\n  // Check rubber band factor range\n  if (rubberBandFactor !== undefined && (rubberBandFactor < 0 || rubberBandFactor > 1)) {\n    warnOnce(\n      `rubberBandFactor should be between 0 and 1. Got ${rubberBandFactor}. ` +\n      `Values outside this range may cause unexpected behavior.`\n    )\n  }\n\n  // Check for inverted bounds\n  if (bounds) {\n    if (bounds.left !== undefined && bounds.right !== undefined && bounds.left > bounds.right) {\n      warnOnce(\n        `Drag bounds are inverted: left (${bounds.left}) > right (${bounds.right}). ` +\n        `This may cause unexpected behavior.`\n      )\n    }\n    if (bounds.top !== undefined && bounds.bottom !== undefined && bounds.top > bounds.bottom) {\n      warnOnce(\n        `Drag bounds are inverted: top (${bounds.top}) > bottom (${bounds.bottom}). ` +\n        `This may cause unexpected behavior.`\n      )\n    }\n  }\n}\n\n/**\n * Validate decay configuration\n */\nexport function validateDecayConfig(config: {\n  velocity: number\n  deceleration?: number\n}): void {\n  if (!isDev) return\n\n  const { velocity, deceleration = 0.998 } = config\n\n  // Check for zero velocity\n  if (velocity === 0) {\n    warnOnce(\n      `Decay animation started with zero velocity. ` +\n      `The animation will complete immediately.`\n    )\n  }\n\n  // Check deceleration range\n  if (deceleration <= 0 || deceleration >= 1) {\n    warnOnce(\n      `Deceleration should be between 0 and 1 (exclusive). Got ${deceleration}. ` +\n      `Typical values are 0.99-0.999.`\n    )\n  }\n}\n\n/**\n * Clear warned messages (useful for testing)\n */\nexport function clearWarnings(): void {\n  warnedMessages.clear()\n}\n","import type { SpringConfig } from './config.js'\nimport { defaultConfig } from './config.js'\nimport { simulateSpring } from './physics.js'\nimport { globalLoop, type Animatable, AnimationState } from '../animation/loop.js'\nimport { clamp } from '../utils/math.js'\nimport { validateSpringConfig } from '../utils/warnings.js'\n\n/**\n * Spring animation control interface\n */\nexport interface SpringAnimation {\n  /** Start the animation */\n  start(): SpringAnimation\n  /** Stop the animation immediately */\n  stop(): void\n  /** Pause the animation */\n  pause(): void\n  /** Resume the animation */\n  resume(): void\n  /** Reverse the animation direction */\n  reverse(): void\n  /** Update the target value */\n  set(to: number): void\n  /** Update target while preserving current velocity (for smooth interruptions) */\n  setWithVelocity(to: number, velocity?: number): void\n  /** Check if currently animating */\n  isAnimating(): boolean\n  /** Check if paused */\n  isPaused(): boolean\n  /** Check if complete */\n  isComplete(): boolean\n  /** Get current value */\n  getValue(): number\n  /** Get current velocity */\n  getVelocity(): number\n  /** Promise that resolves when complete */\n  finished: Promise<void>\n  /** Clean up resources */\n  destroy(): void\n}\n\n/**\n * Spring animation implementation\n */\nclass SpringAnimationImpl implements SpringAnimation, Animatable {\n  private position: number\n  private velocity: number\n  private target: number\n  private config: SpringConfig & Required<Pick<SpringConfig, 'stiffness' | 'damping' | 'mass' | 'restSpeed' | 'restDelta'>>\n  private state: AnimationState = AnimationState.Idle\n  private resolveComplete: (() => void) | null = null\n  private from: number\n  private to: number\n  private clampedFrom: number\n  private clampedTo: number\n\n  finished: Promise<void>\n\n  constructor(\n    from: number,\n    to: number,\n    config: SpringConfig = {}\n  ) {\n    // Validate config in development mode\n    validateSpringConfig(config)\n\n    this.from = from\n    this.to = to\n    this.clampedFrom = from\n    this.clampedTo = to\n    this.position = from\n    this.velocity = config.velocity ?? 0\n    this.target = to\n    this.config = {\n      ...defaultConfig,\n      ...config,\n      stiffness: config.stiffness ?? defaultConfig.stiffness!,\n      damping: config.damping ?? defaultConfig.damping!,\n      mass: config.mass ?? defaultConfig.mass!,\n      restSpeed: config.restSpeed ?? defaultConfig.restSpeed!,\n      restDelta: config.restDelta ?? defaultConfig.restDelta!,\n    }\n\n    this.finished = new Promise((resolve) => {\n      this.resolveComplete = resolve\n    })\n  }\n\n  start(): SpringAnimation {\n    if (this.state === AnimationState.Running) return this\n\n    this.state = AnimationState.Running\n    this.config.onStart?.()\n    globalLoop.add(this)\n    return this\n  }\n\n  stop(): void {\n    this.state = AnimationState.Idle\n    globalLoop.remove(this)\n  }\n\n  pause(): void {\n    if (this.state === AnimationState.Running) {\n      this.state = AnimationState.Paused\n      globalLoop.remove(this)\n    }\n  }\n\n  resume(): void {\n    if (this.state === AnimationState.Paused) {\n      this.state = AnimationState.Running\n      globalLoop.add(this)\n    }\n  }\n\n  reverse(): void {\n    const temp = this.from\n    this.from = this.to\n    this.to = temp\n    this.clampedFrom = this.from\n    this.clampedTo = this.to\n    this.target = this.to\n  }\n\n  set(to: number): void {\n    this.to = to\n    this.clampedTo = to\n    this.target = to\n  }\n\n  setWithVelocity(to: number, velocity?: number): void {\n    // Update from to current position for smooth continuation\n    this.from = this.position\n    this.clampedFrom = this.position\n    this.to = to\n    this.clampedTo = to\n    this.target = to\n\n    // Use provided velocity or preserve current velocity\n    if (velocity !== undefined) {\n      this.velocity = velocity\n    }\n    // If not running, start the animation\n    if (this.state !== AnimationState.Running) {\n      this.start()\n    }\n  }\n\n  update(_now: number): void {\n    if (this.state !== AnimationState.Running) return\n\n    const result = simulateSpring(\n      this.position,\n      this.velocity,\n      this.target,\n      this.config\n    )\n\n    this.position = result.position\n    this.velocity = result.velocity\n\n    // Handle clamping\n    if (this.config.clamp) {\n      const min = Math.min(this.clampedFrom, this.clampedTo)\n      const max = Math.max(this.clampedFrom, this.clampedTo)\n      this.position = clamp(this.position, min, max)\n    }\n\n    // Emit update\n    this.config.onUpdate?.(this.position)\n\n    // Check rest state\n    if (result.isRest) {\n      this.state = AnimationState.Complete\n      globalLoop.remove(this)\n      this.position = this.target // Ensure we end exactly at target\n      this.config.onUpdate?.(this.position)\n      this.config.onComplete?.()\n      this.config.onRest?.()\n      this.resolveComplete?.()\n    }\n  }\n\n  isAnimating(): boolean {\n    return this.state === AnimationState.Running\n  }\n\n  isPaused(): boolean {\n    return this.state === AnimationState.Paused\n  }\n\n  isComplete(): boolean {\n    return this.state === AnimationState.Complete\n  }\n\n  getValue(): number {\n    return this.position\n  }\n\n  getVelocity(): number {\n    return this.velocity\n  }\n\n  destroy(): void {\n    this.stop()\n    this.config.onUpdate = undefined\n    this.config.onStart = undefined\n    this.config.onComplete = undefined\n    this.config.onRest = undefined\n  }\n}\n\n/**\n * Create a spring animation\n *\n * @param from - Starting value\n * @param to - Target value\n * @param config - Spring configuration\n * @returns Spring animation controller\n *\n * @example\n * ```ts\n * const anim = spring(0, 100, {\n *   onUpdate: (value) => {\n *     element.style.transform = `translateX(${value}px)`\n *   },\n * })\n *\n * anim.start()\n * ```\n */\nexport function spring(\n  from: number,\n  to: number,\n  config?: SpringConfig\n): SpringAnimation {\n  return new SpringAnimationImpl(from, to, config)\n}\n","import type { SpringConfig } from './config.js'\nimport { defaultConfig } from './config.js'\nimport { spring, type SpringAnimation } from './spring.js'\n\n/**\n * Spring value interface\n */\nexport interface SpringValue {\n  /** Get current value */\n  get(): number\n  /** Get current velocity */\n  getVelocity(): number\n  /** Animate to a new value */\n  set(to: number, config?: Partial<SpringConfig>): void\n  /** Set value immediately without animation */\n  jump(to: number): void\n  /** Stop current animation at current position */\n  stop(): void\n  /** Update spring configuration */\n  setConfig(config: Partial<SpringConfig>): void\n  /** Subscribe to value changes */\n  subscribe(callback: (value: number) => void): () => void\n  /** Check if currently animating */\n  isAnimating(): boolean\n  /** Promise that resolves when current animation completes */\n  finished: Promise<void>\n  /** Clean up resources */\n  destroy(): void\n}\n\n/**\n * Spring value implementation\n */\nclass SpringValueImpl implements SpringValue {\n  private value: number\n  private config: SpringConfig\n  private currentAnimation: SpringAnimation | null = null\n  private subscribers = new Set<(value: number) => void>()\n  private resolveComplete: (() => void) | null = null\n  private finishedPromise: Promise<void>\n\n  constructor(initial: number, config: SpringConfig = {}) {\n    this.value = initial\n    this.config = { ...defaultConfig, ...config }\n\n    this.finishedPromise = new Promise((resolve) => {\n      this.resolveComplete = resolve\n    })\n  }\n\n  get(): number {\n    return this.value\n  }\n\n  getVelocity(): number {\n    return this.currentAnimation?.getVelocity() ?? 0\n  }\n\n  set(to: number, config: Partial<SpringConfig> = {}): void {\n    // Cancel existing animation\n    if (this.currentAnimation) {\n      this.currentAnimation.destroy()\n      this.currentAnimation = null\n    }\n\n    // Create new promise for this animation\n    this.finishedPromise = new Promise((resolve) => {\n      this.resolveComplete = resolve\n    })\n\n    // Create new animation\n    const mergedConfig = { ...this.config, ...config }\n    const originalOnUpdate = mergedConfig.onUpdate\n    const originalOnComplete = mergedConfig.onComplete\n\n    this.currentAnimation = spring(this.value, to, {\n      ...mergedConfig,\n      onUpdate: (value) => {\n        this.value = value\n        this.notify()\n        // Also call original onUpdate if provided\n        originalOnUpdate?.(value)\n      },\n      onComplete: () => {\n        originalOnComplete?.()\n        if (this.resolveComplete) {\n          this.resolveComplete()\n        }\n      },\n    })\n\n    this.currentAnimation.start()\n  }\n\n  jump(to: number): void {\n    if (this.currentAnimation) {\n      this.currentAnimation.destroy()\n      this.currentAnimation = null\n    }\n    this.value = to\n    this.notify()\n  }\n\n  stop(): void {\n    if (this.currentAnimation) {\n      this.currentAnimation.destroy()\n      this.currentAnimation = null\n    }\n    if (this.resolveComplete) {\n      this.resolveComplete()\n    }\n  }\n\n  setConfig(config: Partial<SpringConfig>): void {\n    this.config = { ...this.config, ...config }\n  }\n\n  subscribe(callback: (value: number) => void): () => void {\n    this.subscribers.add(callback)\n\n    // Immediately call with current value\n    callback(this.value)\n\n    return () => {\n      this.subscribers.delete(callback)\n    }\n  }\n\n  isAnimating(): boolean {\n    return this.currentAnimation?.isAnimating() ?? false\n  }\n\n  get finished(): Promise<void> {\n    return this.finishedPromise\n  }\n\n  private notify(): void {\n    for (const subscriber of this.subscribers) {\n      subscriber(this.value)\n    }\n  }\n\n  destroy(): void {\n    this.currentAnimation?.destroy()\n    this.currentAnimation = null\n    this.subscribers.clear()\n  }\n}\n\n/**\n * Create a spring value\n *\n * @param initial - Initial value\n * @param config - Spring configuration\n * @returns Spring value controller\n *\n * @example\n * ```ts\n * const x = createSpringValue(0, { stiffness: 100, damping: 10 })\n *\n * x.subscribe((value) => {\n *   element.style.transform = `translateX(${value}px)`\n * })\n *\n * x.set(100) // Animates to 100\n * x.jump(0)  // Jumps to 0 immediately\n * ```\n */\nexport function createSpringValue(\n  initial: number,\n  config?: SpringConfig\n): SpringValue {\n  return new SpringValueImpl(initial, config)\n}\n\n// Re-export for type usage\nexport { SpringValueImpl as SpringValueClass }\n","import type { SpringConfig } from './config.js'\nimport { defaultConfig } from './config.js'\nimport { createSpringValue, type SpringValue } from './spring-value.js'\n\n/**\n * Spring group interface\n */\nexport interface SpringGroup<T extends Record<string, number>> {\n  /** Get all current values */\n  get(): T\n  /** Get a single value by key */\n  getValue(key: keyof T): number\n  /** Animate to new values (partial update) */\n  set(values: Partial<T>, config?: Partial<SpringConfig>): void\n  /** Set values immediately without animation */\n  jump(values: Partial<T>): void\n  /** Subscribe to value changes */\n  subscribe(callback: (values: T) => void): () => void\n  /** Check if any spring is animating */\n  isAnimating(): boolean\n  /** Promise that resolves when all animations complete */\n  finished: Promise<void>\n  /** Clean up resources */\n  destroy(): void\n}\n\n/**\n * Spring group implementation\n */\nclass SpringGroupImpl<T extends Record<string, number>> implements SpringGroup<T> {\n  private values: Map<keyof T, SpringValue>\n  private config: SpringConfig\n  private subscribers = new Set<(values: T) => void>()\n  private resolveComplete: (() => void) | null = null\n  private finishedPromise: Promise<void>\n\n  constructor(initialValues: T, config: SpringConfig = {}) {\n    this.config = { ...defaultConfig, ...config }\n\n    // Create SpringValue for each key\n    this.values = new Map()\n    for (const [key, value] of Object.entries(initialValues)) {\n      const springValue = createSpringValue(value, this.config)\n      springValue.subscribe(() => this.notify())\n      this.values.set(key as keyof T, springValue)\n    }\n\n    this.finishedPromise = Promise.resolve()\n\n    // Initialize promise handler\n    this.resetPromise()\n  }\n\n  private resetPromise(): void {\n    this.finishedPromise = new Promise((resolve) => {\n      this.resolveComplete = resolve\n    })\n  }\n\n  get(): T {\n    const result = {} as T\n    for (const [key, springValue] of this.values) {\n      (result as Record<string, number>)[key as string] = springValue.get()\n    }\n    return result\n  }\n\n  getValue(key: keyof T): number {\n    return this.values.get(key)?.get() ?? 0\n  }\n\n  set(values: Partial<T>, config: Partial<SpringConfig> = {}): void {\n    // Reset promise for new batch of animations\n    this.resetPromise()\n\n    const promises: Promise<void>[] = []\n\n    for (const [key, value] of Object.entries(values)) {\n      const springValue = this.values.get(key as keyof T)\n      if (springValue) {\n        springValue.set(value, config)\n        promises.push(springValue.finished)\n      }\n    }\n\n    // Resolve when all animations complete\n    Promise.all(promises).then(() => {\n      if (this.resolveComplete) {\n        this.resolveComplete()\n      }\n    })\n  }\n\n  jump(values: Partial<T>): void {\n    for (const [key, value] of Object.entries(values)) {\n      const springValue = this.values.get(key as keyof T)\n      if (springValue) {\n        springValue.jump(value)\n      }\n    }\n    // Note: notify() is already called by the spring subscriptions, so we don't call it again\n  }\n\n  subscribe(callback: (values: T) => void): () => void {\n    this.subscribers.add(callback)\n    callback(this.get())\n    return () => this.subscribers.delete(callback)\n  }\n\n  isAnimating(): boolean {\n    for (const springValue of this.values.values()) {\n      if (springValue.isAnimating()) return true\n    }\n    return false\n  }\n\n  get finished(): Promise<void> {\n    return this.finishedPromise\n  }\n\n  private notify(): void {\n    const values = this.get()\n    for (const subscriber of this.subscribers) {\n      subscriber(values)\n    }\n  }\n\n  destroy(): void {\n    for (const springValue of this.values.values()) {\n      springValue.destroy()\n    }\n    this.subscribers.clear()\n  }\n}\n\n/**\n * Create a spring group for animating multiple values together\n *\n * @param initialValues - Initial values object\n * @param config - Spring configuration\n * @returns Spring group controller\n *\n * @example\n * ```ts\n * const group = createSpringGroup(\n *   { x: 0, y: 0, scale: 1 },\n *   { stiffness: 100, damping: 10 }\n * )\n *\n * group.subscribe((values) => {\n *   element.style.transform = `\n *     translate(${values.x}px, ${values.y}px)\n *     scale(${values.scale})\n *   `\n * })\n *\n * group.set({ x: 100, scale: 1.5 })\n * ```\n */\nexport function createSpringGroup<T extends Record<string, number>>(\n  initialValues: T,\n  config?: SpringConfig\n): SpringGroup<T> {\n  return new SpringGroupImpl(initialValues, config)\n}\n\n// Re-export for type usage\nexport { SpringGroupImpl as SpringGroupClass }\n","/**\n * Variants System - Named animation states with cascading support\n *\n * Provides a declarative way to define and orchestrate animations\n * across component hierarchies.\n */\n\nimport type { SpringConfig } from './config.js'\n\n// ============ Types ============\n\n/**\n * Animation values that can be animated\n */\nexport interface AnimationValues {\n  x?: number | string\n  y?: number | string\n  scale?: number\n  scaleX?: number\n  scaleY?: number\n  rotate?: number\n  rotateX?: number\n  rotateY?: number\n  rotateZ?: number\n  skewX?: number\n  skewY?: number\n  opacity?: number\n  width?: number | string\n  height?: number | string\n  backgroundColor?: string\n  borderRadius?: number | string\n  borderColor?: string\n  boxShadow?: string\n  color?: string\n  [key: string]: number | string | VariantTransition | undefined\n}\n\n/**\n * Transition configuration for a variant\n */\nexport interface VariantTransition {\n  /** Spring configuration */\n  spring?: SpringConfig\n  /** Delay before animation starts (ms) */\n  delay?: number\n  /** Stagger children by this amount (ms) */\n  staggerChildren?: number\n  /** Delay children by this amount (ms) */\n  delayChildren?: number\n  /** Animate children before or after parent */\n  when?: 'beforeChildren' | 'afterChildren' | false\n  /** Custom stagger direction */\n  staggerDirection?: 1 | -1\n  /** Duration override for non-spring animations */\n  duration?: number\n  /** Easing function */\n  ease?: (t: number) => number\n}\n\n/**\n * A single variant definition\n */\nexport interface Variant extends AnimationValues {\n  transition?: VariantTransition\n}\n\n/**\n * Map of variant names to their definitions\n */\nexport interface Variants {\n  [key: string]: Variant | ((custom?: unknown) => Variant)\n}\n\n/**\n * Orchestration options for variant animations\n */\nexport interface OrchestrationOptions {\n  /** Delay before starting */\n  delay?: number\n  /** Animate children before or after */\n  when?: 'beforeChildren' | 'afterChildren' | false\n  /** Stagger children animations */\n  staggerChildren?: number\n  /** Delay before children start */\n  delayChildren?: number\n  /** Direction of stagger (-1 for reverse) */\n  staggerDirection?: 1 | -1\n}\n\n/**\n * Resolved variant with all values computed\n */\nexport interface ResolvedVariant {\n  values: AnimationValues\n  transition: VariantTransition\n}\n\n// ============ Variant Resolution ============\n\n/**\n * Resolve a variant definition to concrete values\n */\nexport function resolveVariant(\n  variant: Variant | ((custom?: unknown) => Variant) | undefined,\n  custom?: unknown\n): ResolvedVariant {\n  if (!variant) {\n    return { values: {}, transition: {} }\n  }\n\n  // Handle function variants\n  const resolved = typeof variant === 'function' ? variant(custom) : variant\n\n  // Extract transition from values\n  const { transition = {}, ...values } = resolved\n\n  return { values, transition }\n}\n\n/**\n * Get variant from variants object by name\n */\nexport function getVariant(\n  variants: Variants | undefined,\n  name: string | undefined,\n  custom?: unknown\n): ResolvedVariant {\n  if (!variants || !name) {\n    return { values: {}, transition: {} }\n  }\n\n  return resolveVariant(variants[name], custom)\n}\n\n/**\n * Merge multiple variants together\n */\nexport function mergeVariants(...variants: (Variant | undefined)[]): Variant {\n  const merged: Variant = {}\n\n  for (const variant of variants) {\n    if (variant) {\n      Object.assign(merged, variant)\n      // Merge transitions\n      if (variant.transition) {\n        merged.transition = { ...merged.transition, ...variant.transition }\n      }\n    }\n  }\n\n  return merged\n}\n\n// ============ Animation Value Helpers ============\n\n/**\n * Check if a value is a transform property\n */\nexport function isTransformProperty(key: string): boolean {\n  return [\n    'x', 'y', 'z',\n    'scale', 'scaleX', 'scaleY', 'scaleZ',\n    'rotate', 'rotateX', 'rotateY', 'rotateZ',\n    'skew', 'skewX', 'skewY',\n    'perspective',\n    'transformOrigin',\n  ].includes(key)\n}\n\n/**\n * Check if a value is animatable\n */\nexport function isAnimatable(value: unknown): value is number | string {\n  return typeof value === 'number' || typeof value === 'string'\n}\n\n/**\n * Parse a value with unit (e.g., \"100px\" -> { value: 100, unit: \"px\" })\n */\nexport function parseValueWithUnit(value: string | number): { value: number; unit: string } {\n  if (typeof value === 'number') {\n    return { value, unit: '' }\n  }\n\n  const match = value.match(/^(-?[\\d.]+)(.*)$/)\n  if (match && match[1]) {\n    return { value: parseFloat(match[1]), unit: match[2] || '' }\n  }\n\n  return { value: 0, unit: '' }\n}\n\n/**\n * Build transform string from values\n */\nexport function buildTransformString(values: AnimationValues): string {\n  const transforms: string[] = []\n\n  if (values.x !== undefined || values.y !== undefined) {\n    const x = values.x ?? 0\n    const y = values.y ?? 0\n    transforms.push(`translate(${x}px, ${y}px)`)\n  }\n\n  if (values.scale !== undefined) {\n    transforms.push(`scale(${values.scale})`)\n  } else {\n    if (values.scaleX !== undefined) {\n      transforms.push(`scaleX(${values.scaleX})`)\n    }\n    if (values.scaleY !== undefined) {\n      transforms.push(`scaleY(${values.scaleY})`)\n    }\n  }\n\n  if (values.rotate !== undefined) {\n    transforms.push(`rotate(${values.rotate}deg)`)\n  }\n  if (values.rotateX !== undefined) {\n    transforms.push(`rotateX(${values.rotateX}deg)`)\n  }\n  if (values.rotateY !== undefined) {\n    transforms.push(`rotateY(${values.rotateY}deg)`)\n  }\n  if (values.rotateZ !== undefined) {\n    transforms.push(`rotateZ(${values.rotateZ}deg)`)\n  }\n\n  if (values.skewX !== undefined) {\n    transforms.push(`skewX(${values.skewX}deg)`)\n  }\n  if (values.skewY !== undefined) {\n    transforms.push(`skewY(${values.skewY}deg)`)\n  }\n\n  return transforms.join(' ')\n}\n\n/**\n * Apply animation values to an element's style\n */\nexport function applyValuesToElement(element: HTMLElement, values: AnimationValues): void {\n  const transform = buildTransformString(values)\n  if (transform) {\n    element.style.transform = transform\n  }\n\n  // Apply non-transform properties\n  if (values.opacity !== undefined) {\n    element.style.opacity = String(values.opacity)\n  }\n  if (values.backgroundColor !== undefined) {\n    element.style.backgroundColor = values.backgroundColor\n  }\n  if (values.borderRadius !== undefined) {\n    element.style.borderRadius =\n      typeof values.borderRadius === 'number' ? `${values.borderRadius}px` : values.borderRadius\n  }\n  if (values.borderColor !== undefined) {\n    element.style.borderColor = values.borderColor\n  }\n  if (values.boxShadow !== undefined) {\n    element.style.boxShadow = values.boxShadow\n  }\n  if (values.color !== undefined) {\n    element.style.color = values.color\n  }\n  if (values.width !== undefined) {\n    element.style.width =\n      typeof values.width === 'number' ? `${values.width}px` : values.width\n  }\n  if (values.height !== undefined) {\n    element.style.height =\n      typeof values.height === 'number' ? `${values.height}px` : values.height\n  }\n}\n\n// ============ Orchestration ============\n\n/**\n * Calculate stagger delays for children\n */\nexport function calculateStaggerDelays(\n  count: number,\n  options: OrchestrationOptions\n): number[] {\n  const { staggerChildren = 0, staggerDirection = 1, delayChildren = 0 } = options\n\n  const delays: number[] = []\n  for (let i = 0; i < count; i++) {\n    const index = staggerDirection === -1 ? count - 1 - i : i\n    delays.push(delayChildren + index * staggerChildren)\n  }\n\n  return delays\n}\n\n/**\n * Create an orchestrated animation sequence\n */\nexport interface OrchestrationSequence {\n  /** Execute parent animation */\n  parent: () => Promise<void>\n  /** Execute children animations */\n  children: () => Promise<void>\n  /** Execute all with proper ordering */\n  execute: () => Promise<void>\n}\n\nexport function createOrchestration(\n  parentAnim: () => Promise<void>,\n  childrenAnims: (() => Promise<void>)[],\n  options: OrchestrationOptions = {}\n): OrchestrationSequence {\n  const { when = false, delay = 0 } = options\n  const delays = calculateStaggerDelays(childrenAnims.length, options)\n\n  const parent = async () => {\n    if (delay > 0) {\n      await new Promise((resolve) => setTimeout(resolve, delay))\n    }\n    await parentAnim()\n  }\n\n  const children = async () => {\n    await Promise.all(\n      childrenAnims.map((anim, i) =>\n        new Promise<void>((resolve) => {\n          setTimeout(async () => {\n            await anim()\n            resolve()\n          }, delays[i])\n        })\n      )\n    )\n  }\n\n  const execute = async () => {\n    switch (when) {\n      case 'beforeChildren':\n        await parent()\n        await children()\n        break\n      case 'afterChildren':\n        await children()\n        await parent()\n        break\n      default:\n        // Run in parallel\n        await Promise.all([parent(), children()])\n    }\n  }\n\n  return { parent, children, execute }\n}\n\n// ============ Variant Presets ============\n\n/**\n * Common animation presets\n */\nexport const variantPresets: Record<string, { initial: Variant; animate: Variant; exit: Variant }> = {\n  /** Fade in from invisible */\n  fadeIn: {\n    initial: { opacity: 0 },\n    animate: { opacity: 1 },\n    exit: { opacity: 0 },\n  },\n\n  /** Fade in and slide up */\n  fadeInUp: {\n    initial: { opacity: 0, y: 20 },\n    animate: { opacity: 1, y: 0 },\n    exit: { opacity: 0, y: -20 },\n  },\n\n  /** Fade in and slide down */\n  fadeInDown: {\n    initial: { opacity: 0, y: -20 },\n    animate: { opacity: 1, y: 0 },\n    exit: { opacity: 0, y: 20 },\n  },\n\n  /** Fade in and slide from left */\n  fadeInLeft: {\n    initial: { opacity: 0, x: -20 },\n    animate: { opacity: 1, x: 0 },\n    exit: { opacity: 0, x: 20 },\n  },\n\n  /** Fade in and slide from right */\n  fadeInRight: {\n    initial: { opacity: 0, x: 20 },\n    animate: { opacity: 1, x: 0 },\n    exit: { opacity: 0, x: -20 },\n  },\n\n  /** Scale up from small */\n  scaleIn: {\n    initial: { opacity: 0, scale: 0.8 },\n    animate: { opacity: 1, scale: 1 },\n    exit: { opacity: 0, scale: 0.8 },\n  },\n\n  /** Pop in with overshoot */\n  popIn: {\n    initial: { opacity: 0, scale: 0.5 },\n    animate: {\n      opacity: 1,\n      scale: 1,\n      transition: { spring: { stiffness: 400, damping: 15 } },\n    },\n    exit: { opacity: 0, scale: 0.5 },\n  },\n\n  /** Slide in from bottom (percentage-based) */\n  slideUp: {\n    initial: { y: 100, opacity: 0 },\n    animate: { y: 0, opacity: 1 },\n    exit: { y: 100, opacity: 0 },\n  },\n\n  /** Slide in from top */\n  slideDown: {\n    initial: { y: -100, opacity: 0 },\n    animate: { y: 0, opacity: 1 },\n    exit: { y: -100, opacity: 0 },\n  },\n\n  /** Slide in from left */\n  slideLeft: {\n    initial: { x: -100, opacity: 0 },\n    animate: { x: 0, opacity: 1 },\n    exit: { x: -100, opacity: 0 },\n  },\n\n  /** Slide in from right */\n  slideRight: {\n    initial: { x: 100, opacity: 0 },\n    animate: { x: 0, opacity: 1 },\n    exit: { x: 100, opacity: 0 },\n  },\n\n  /** Container with staggered children */\n  staggerContainer: {\n    initial: {},\n    animate: {\n      transition: {\n        staggerChildren: 0.1,\n        delayChildren: 0.1,\n      },\n    },\n    exit: {\n      transition: {\n        staggerChildren: 0.05,\n        staggerDirection: -1,\n      },\n    },\n  },\n\n  /** Item for staggered lists */\n  staggerItem: {\n    initial: { opacity: 0, y: 20 },\n    animate: { opacity: 1, y: 0 },\n    exit: { opacity: 0, y: -20 },\n  },\n}\n\n/**\n * Create a custom variant preset\n */\nexport function createVariantPreset(\n  initial: Variant,\n  animate: Variant,\n  exit?: Variant\n): { initial: Variant; animate: Variant; exit: Variant } {\n  return {\n    initial,\n    animate,\n    exit: exit || initial,\n  }\n}\n\n// ============ Type Guards ============\n\n/**\n * Check if a value is a Variants object\n */\nexport function isVariants(value: unknown): value is Variants {\n  return (\n    typeof value === 'object' &&\n    value !== null &&\n    !Array.isArray(value) &&\n    Object.values(value).every(\n      (v) => typeof v === 'object' || typeof v === 'function'\n    )\n  )\n}\n\n/**\n * Check if a value is a Variant\n */\nexport function isVariant(value: unknown): value is Variant {\n  return typeof value === 'object' && value !== null && !Array.isArray(value)\n}\n","import type { SpringAnimation } from '../core/spring.js'\n\n/**\n * Stagger options interface\n */\nexport interface StaggerOptions {\n  /** Delay between animations (ms) or function returning delay */\n  delay?: number | ((index: number) => number)\n  /** Where to start staggering from */\n  from?: 'first' | 'last' | 'center' | number\n}\n\n/**\n * Run animations one after another (sequentially)\n *\n * @param animations - Array of functions that create animations\n * @returns Promise that resolves when all animations complete\n *\n * @example\n * ```ts\n * await sequence([\n *   () => spring(0, 100, { onUpdate: updateOpacity }).start(),\n *   () => spring(0, 200, { onUpdate: updateX }).start(),\n *   () => spring(0, 50, { onUpdate: updateY }).start(),\n * ])\n *\n * console.log('All animations complete!')\n * ```\n */\nexport async function sequence(\n  animations: Array<() => SpringAnimation>\n): Promise<void> {\n  for (const createAnimation of animations) {\n    const anim = createAnimation()\n    await anim.finished\n  }\n}\n\n/**\n * Run animations simultaneously (in parallel)\n *\n * @param animations - Array of functions that create animations\n * @returns Promise that resolves when all animations complete\n *\n * @example\n * ```ts\n * await parallel([\n *   () => spring(0, 100, { onUpdate: updateOpacity }).start(),\n *   () => spring(0, 200, { onUpdate: updateX }).start(),\n *   () => spring(1, 2, { onUpdate: updateScale }).start(),\n * ])\n *\n * console.log('All animations complete!')\n * ```\n */\nexport async function parallel(\n  animations: Array<() => SpringAnimation>\n): Promise<void> {\n  const promises = animations.map((createAnimation) => {\n    const anim = createAnimation()\n    return anim.finished\n  })\n  await Promise.all(promises)\n}\n\n/**\n * Run animations with staggered delays\n *\n * @param items - Array of items to animate\n * @param animate - Function that creates an animation for each item\n * @param options - Stagger options\n * @returns Promise that resolves when all animations complete\n *\n * @example\n * ```ts\n * const elements = document.querySelectorAll('.item')\n *\n * await stagger(\n *   elements,\n *   (element, index) => {\n *     return spring(0, 1, {\n *       onUpdate: (value) => {\n *         element.style.opacity = String(value)\n *       },\n *     }).start()\n *   },\n *   { delay: 50 }\n * )\n * ```\n */\nexport async function stagger<T>(\n  items: T[],\n  animate: (item: T, index: number) => SpringAnimation,\n  options: StaggerOptions = {}\n): Promise<void> {\n  const { delay = 0, from = 'first' } = options\n\n  // Calculate start index based on 'from' option\n  let startIndex = 0\n  if (from === 'last') startIndex = items.length - 1\n  else if (from === 'center') startIndex = Math.floor(items.length / 2)\n  else if (typeof from === 'number') startIndex = from\n\n  // Build index order from start point outward\n  const indices: number[] = []\n  const used = new Set<number>()\n\n  indices.push(startIndex)\n  used.add(startIndex)\n\n  for (let offset = 1; offset < items.length; offset++) {\n    const left = startIndex - offset\n    const right = startIndex + offset\n\n    // Add right first if it exists\n    if (right < items.length && !used.has(right)) {\n      indices.push(right)\n      used.add(right)\n    }\n\n    // Then add left if it exists\n    if (left >= 0 && !used.has(left)) {\n      indices.push(left)\n      used.add(left)\n    }\n  }\n\n  // All indices are already added by the main loop above\n  // No need for defensive fallback as the logic is complete\n\n  // Start animations with delay\n  const getDelay = typeof delay === 'function' ? delay : (_i: number) => delay\n  const animations: SpringAnimation[] = []\n\n  for (let i = 0; i < indices.length; i++) {\n    const index = indices[i]!\n    const anim = animate(items[index]!, index)\n    animations.push(anim)\n\n    const delayMs = getDelay(i)\n\n    if (delayMs > 0) {\n      setTimeout(() => {\n        anim.start()\n      }, delayMs)\n    } else {\n      anim.start()\n    }\n  }\n\n  await Promise.all(animations.map((a) => a.finished))\n}\n","import type { SpringConfig } from '../core/config.js'\nimport { defaultConfig } from '../core/config.js'\nimport { createSpringValue, type SpringValue } from '../core/spring-value.js'\n\n/**\n * Trail configuration interface\n */\nexport interface TrailConfig extends SpringConfig {\n  /** Frames delay between items following each other */\n  followDelay?: number\n}\n\n/**\n * Trail interface\n */\nexport interface Trail {\n  /** Set the leader value (followers will follow with delay) */\n  set(value: number): void\n  /** Set all values immediately without animation */\n  jump(value: number): void\n  /** Get all current values */\n  getValues(): number[]\n  /** Subscribe to value changes */\n  subscribe(callback: (values: number[]) => void): () => void\n  /** Clean up resources */\n  destroy(): void\n}\n\n/**\n * Trail implementation\n * Creates a chain of springs where each spring follows the previous one\n */\nclass TrailImpl implements Trail {\n  private springs: SpringValue[]\n  private leader: SpringValue\n  private followDelay: number\n  private subscribers = new Set<(values: number[]) => void>()\n  private frameCount: number = 0\n  private pendingUpdates: Map<number, number> = new Map()\n\n  constructor(count: number, config: TrailConfig = {}) {\n    const { followDelay = 2, ...springConfig } = config\n\n    this.followDelay = followDelay\n\n    // Create leader spring\n    this.leader = createSpringValue(0, springConfig)\n\n    // Create follower springs\n    this.springs = []\n    for (let i = 0; i < count; i++) {\n      const spring = createSpringValue(0, springConfig)\n      this.springs.push(spring)\n    }\n\n    // Connect leader to followers with delay\n    this.leader.subscribe(() => {\n      this.frameCount++\n      this.scheduleFollowerUpdates()\n    })\n  }\n\n  private scheduleFollowerUpdates(): void {\n    const targetValue = this.leader.get()\n\n    for (let i = 0; i < this.springs.length; i++) {\n      const delayFrames = (i + 1) * this.followDelay\n      const targetFrame = this.frameCount + delayFrames\n\n      // Store the pending update\n      this.pendingUpdates.set(i, targetFrame)\n\n      // Schedule the update\n      this.scheduleFollowerUpdate(i, targetValue, targetFrame, delayFrames)\n    }\n  }\n\n  private scheduleFollowerUpdate(\n    index: number,\n    targetValue: number,\n    targetFrame: number,\n    delayFrames: number\n  ): void {\n    const startFrame = this.frameCount\n    const framesToWait = targetFrame - startFrame\n\n    if (framesToWait <= 0) {\n      // Update immediately if delay has passed\n      this.springs[index]!.set(targetValue)\n    } else {\n      // Use setTimeout for delay (approximately 16ms per frame at 60fps)\n      const delayMs = Math.max(framesToWait * 16, 0)\n\n      setTimeout(() => {\n        // Only update if this is still the current pending update\n        const currentTarget = this.pendingUpdates.get(index)\n        if (currentTarget === targetFrame) {\n          this.springs[index]!.set(targetValue)\n        }\n      }, delayMs)\n    }\n  }\n\n  set(value: number): void {\n    this.leader.set(value)\n  }\n\n  jump(value: number): void {\n    this.leader.jump(value)\n    for (const spring of this.springs) {\n      spring.jump(value)\n    }\n  }\n\n  getValues(): number[] {\n    return this.springs.map((s) => s.get())\n  }\n\n  subscribe(callback: (values: number[]) => void): () => void {\n    this.subscribers.add(callback)\n\n    // Subscribe to each follower spring\n    const unsubscribers: (() => void)[] = []\n    for (const spring of this.springs) {\n      unsubscribers.push(\n        spring.subscribe(() => {\n          this.notify()\n        })\n      )\n    }\n\n    // Immediately call with current values\n    callback(this.getValues())\n\n    // Return unsubscribe function\n    return () => {\n      this.subscribers.delete(callback)\n      for (const unsubscribe of unsubscribers) {\n        unsubscribe()\n      }\n    }\n  }\n\n  private notify(): void {\n    const values = this.getValues()\n    for (const subscriber of this.subscribers) {\n      subscriber(values)\n    }\n  }\n\n  destroy(): void {\n    this.leader.destroy()\n    for (const spring of this.springs) {\n      spring.destroy()\n    }\n    this.subscribers.clear()\n    this.pendingUpdates.clear()\n  }\n}\n\n/**\n * Create a trail animation\n *\n * @param count - Number of items in the trail\n * @param config - Trail configuration\n * @returns Trail controller\n *\n * @example\n * ```ts\n * const trail = createTrail(5, {\n *   stiffness: 200,\n *   damping: 25,\n *   followDelay: 3,\n * })\n *\n * trail.subscribe((values) => {\n *   elements.forEach((el, i) => {\n *     el.style.transform = `translateX(${values[i]}px)`\n *   })\n * })\n *\n * trail.set(100) // First item moves immediately, others follow\n * ```\n */\nexport function createTrail(count: number, config?: TrailConfig): Trail {\n  return new TrailImpl(count, config)\n}\n","import { globalLoop, type Animatable, AnimationState } from './loop.js'\nimport { clamp } from '../utils/math.js'\nimport { validateDecayConfig } from '../utils/warnings.js'\n\n/**\n * Decay animation configuration interface\n */\nexport interface DecayConfig {\n  /** Initial velocity */\n  velocity: number\n  /** Deceleration factor (0-1, higher = slower decay) */\n  deceleration?: number\n  /** Optional clamp range [min, max] */\n  clamp?: [number, number]\n  /** Callback called on each update */\n  onUpdate?: (value: number) => void\n  /** Callback called when complete */\n  onComplete?: () => void\n}\n\n/**\n * Decay animation interface\n */\nexport interface DecayAnimation {\n  /** Start the decay animation */\n  start(): DecayAnimation\n  /** Stop the decay animation */\n  stop(): void\n  /** Promise that resolves when complete */\n  finished: Promise<void>\n}\n\n/**\n * Decay animation implementation\n * Simulates natural momentum/deceleration\n */\nclass DecayAnimationImpl implements DecayAnimation, Animatable {\n  private value: number\n  private velocity: number\n  private deceleration: number\n  private clampRange: [number, number] | undefined\n  private state: AnimationState = AnimationState.Idle\n  private rafId: number | null = null\n  private resolveComplete: (() => void) | null = null\n  private config: DecayConfig\n\n  finished: Promise<void>\n\n  constructor(config: DecayConfig) {\n    // Validate config in development mode\n    validateDecayConfig(config)\n\n    this.value = 0\n    this.velocity = config.velocity\n    this.deceleration = config.deceleration ?? 0.998\n    this.clampRange = config.clamp\n    this.state = AnimationState.Idle\n    this.config = config\n\n    this.finished = new Promise((resolve) => {\n      this.resolveComplete = resolve\n    })\n  }\n\n  start(): DecayAnimation {\n    if (this.state === AnimationState.Running) return this\n    this.state = AnimationState.Running\n    globalLoop.add(this)\n    return this\n  }\n\n  stop(): void {\n    this.state = AnimationState.Idle\n    globalLoop.remove(this)\n  }\n\n  update(_now: number): void {\n    if (this.state !== AnimationState.Running) return\n\n    // Apply deceleration\n    this.velocity *= this.deceleration\n    this.value += this.velocity\n\n    // Apply clamp\n    if (this.clampRange) {\n      const [min, max] = this.clampRange\n      this.value = clamp(this.value, min, max)\n\n      // Stop if we hit a boundary with velocity in that direction\n      if ((this.value <= min && this.velocity < 0) || (this.value >= max && this.velocity > 0)) {\n        this.velocity = 0\n      }\n    }\n\n    this.config.onUpdate?.(this.value)\n\n    // Check if stopped\n    if (Math.abs(this.velocity) < 0.01) {\n      this.state = AnimationState.Complete\n      globalLoop.remove(this)\n      this.config.onComplete?.()\n      this.resolveComplete?.()\n    }\n  }\n\n  isComplete(): boolean {\n    return this.state === AnimationState.Complete\n  }\n\n  destroy(): void {\n    this.stop()\n    this.config.onUpdate = undefined\n    this.config.onComplete = undefined\n  }\n}\n\n/**\n * Create a decay animation\n *\n * @param config - Decay configuration\n * @returns Decay animation controller\n *\n * @example\n * ```ts\n * const anim = decay({\n *   velocity: 1000,\n *   onUpdate: (value) => {\n *     element.style.transform = `translateX(${value}px)`\n *   },\n * })\n *\n * anim.start()\n * ```\n */\nexport function decay(config: DecayConfig): DecayAnimation {\n  return new DecayAnimationImpl(config)\n}\n","import { createSpringValue } from '../core/spring-value.js'\nimport type { SpringConfig } from '../types.js'\n\n/**\n * Keyframe definition with optional per-keyframe config\n */\nexport interface Keyframe<T = number> {\n  /** Target value at this keyframe */\n  value: T\n  /** Time position (0-1) for this keyframe. If not provided, evenly distributed */\n  at?: number\n  /** Spring config override for transition TO this keyframe */\n  config?: SpringConfig\n}\n\n/**\n * Options for keyframe animation\n */\nexport interface KeyframesOptions {\n  /** Default spring configuration */\n  config?: SpringConfig\n  /** Time positions for keyframes (0-1). Length must match values array */\n  times?: number[]\n  /** Callback for each keyframe transition start */\n  onKeyframe?: (index: number) => void\n  /** Callback when all keyframes complete */\n  onComplete?: () => void\n  /** Callback for value updates */\n  onUpdate?: (value: number) => void\n}\n\n/**\n * Keyframes animation controller\n */\nexport interface KeyframesAnimation {\n  /** Start the animation */\n  play: () => Promise<void>\n  /** Pause the animation */\n  pause: () => void\n  /** Resume a paused animation */\n  resume: () => void\n  /** Stop and reset to initial value */\n  stop: () => void\n  /** Get current value */\n  get: () => number\n  /** Get current keyframe index */\n  getCurrentKeyframe: () => number\n  /** Check if animation is playing */\n  isPlaying: () => boolean\n  /** Jump to specific keyframe */\n  jumpTo: (index: number) => void\n  /** Destroy and cleanup */\n  destroy: () => void\n}\n\n/**\n * Create a keyframe-based spring animation.\n * Animates through a sequence of values using spring physics.\n *\n * @example Basic keyframes\n * ```ts\n * const anim = keyframes([0, 100, 50, 100], {\n *   config: { stiffness: 200, damping: 20 },\n *   onUpdate: (value) => element.style.opacity = value / 100,\n * })\n * await anim.play()\n * ```\n *\n * @example With time positions\n * ```ts\n * const anim = keyframes([0, 100, 0], {\n *   times: [0, 0.3, 1], // 100 at 30%, back to 0 at 100%\n *   onUpdate: (value) => console.log(value),\n * })\n * ```\n *\n * @example With per-keyframe configs\n * ```ts\n * const anim = keyframes([\n *   { value: 0 },\n *   { value: 100, config: { stiffness: 500 } }, // Quick to 100\n *   { value: 50, config: { stiffness: 100 } },  // Slow to 50\n * ])\n * ```\n */\nexport function keyframes(\n  values: (number | Keyframe<number>)[],\n  options: KeyframesOptions = {}\n): KeyframesAnimation {\n  const {\n    config = {},\n    times,\n    onKeyframe,\n    onComplete,\n    onUpdate,\n  } = options\n\n  // Normalize keyframes\n  const normalizedKeyframes = values.map((v, i): Keyframe<number> => {\n    if (typeof v === 'number') {\n      return {\n        value: v,\n        at: times?.[i],\n      }\n    }\n    return { ...v, at: v.at ?? times?.[i] }\n  })\n\n  // Fill in missing time positions (evenly distributed)\n  const keyframeCount = normalizedKeyframes.length\n  normalizedKeyframes.forEach((kf, i) => {\n    if (kf.at === undefined) {\n      kf.at = keyframeCount > 1 ? i / (keyframeCount - 1) : 0\n    }\n  })\n\n  // Sort by time position\n  normalizedKeyframes.sort((a, b) => (a.at ?? 0) - (b.at ?? 0))\n\n  // State\n  let currentIndex = 0\n  let isPlaying = false\n  let isPaused = false\n  let spring: ReturnType<typeof createSpringValue> | null = null\n  let currentValue = normalizedKeyframes[0]?.value ?? 0\n  let destroyed = false\n\n  const createSpring = () => {\n    if (spring) {\n      spring.destroy()\n    }\n\n    const currentKf = normalizedKeyframes[currentIndex]\n    const springConfig = currentKf?.config ?? config\n\n    spring = createSpringValue(currentValue, springConfig)\n    spring.subscribe((value) => {\n      currentValue = value\n      onUpdate?.(value)\n    })\n  }\n\n  const animateToNext = async (): Promise<boolean> => {\n    if (destroyed || isPaused) return false\n    if (currentIndex >= normalizedKeyframes.length - 1) return false\n\n    currentIndex++\n    const targetKf = normalizedKeyframes[currentIndex]\n    if (!targetKf) return false\n\n    // Create new spring with keyframe-specific config if needed\n    if (targetKf.config) {\n      createSpring()\n    }\n\n    onKeyframe?.(currentIndex)\n\n    if (spring) {\n      spring.set(targetKf.value)\n\n      // Wait for spring to settle\n      await new Promise<void>((resolve) => {\n        const checkComplete = () => {\n          if (destroyed || isPaused) {\n            resolve()\n            return\n          }\n\n          if (spring && !spring.isAnimating()) {\n            resolve()\n          } else {\n            requestAnimationFrame(checkComplete)\n          }\n        }\n        // Give spring time to start\n        setTimeout(checkComplete, 16)\n      })\n    }\n\n    return true\n  }\n\n  const animation: KeyframesAnimation = {\n    play: async () => {\n      if (destroyed) return\n      if (isPlaying) return\n\n      isPlaying = true\n      isPaused = false\n\n      // Reset if at end\n      if (currentIndex >= normalizedKeyframes.length - 1) {\n        currentIndex = 0\n        currentValue = normalizedKeyframes[0]?.value ?? 0\n      }\n\n      createSpring()\n      onKeyframe?.(0)\n\n      // Animate through all keyframes\n      while (await animateToNext()) {\n        // Continue to next keyframe\n      }\n\n      if (!isPaused && !destroyed) {\n        isPlaying = false\n        onComplete?.()\n      }\n    },\n\n    pause: () => {\n      isPaused = true\n      isPlaying = false\n      if (spring) {\n        spring.stop()\n      }\n    },\n\n    resume: () => {\n      if (!isPaused || destroyed) return\n      isPaused = false\n      isPlaying = true\n\n      // Continue from current position\n      const continueAnimation = async () => {\n        while (await animateToNext()) {\n          // Continue to next keyframe\n        }\n\n        if (!isPaused && !destroyed) {\n          isPlaying = false\n          onComplete?.()\n        }\n      }\n\n      continueAnimation()\n    },\n\n    stop: () => {\n      isPaused = false\n      isPlaying = false\n      currentIndex = 0\n      currentValue = normalizedKeyframes[0]?.value ?? 0\n\n      if (spring) {\n        spring.jump(currentValue)\n      }\n    },\n\n    get: () => currentValue,\n\n    getCurrentKeyframe: () => currentIndex,\n\n    isPlaying: () => isPlaying,\n\n    jumpTo: (index: number) => {\n      if (index < 0 || index >= normalizedKeyframes.length) return\n\n      currentIndex = index\n      const targetValue = normalizedKeyframes[index]?.value ?? 0\n      currentValue = targetValue\n\n      if (spring) {\n        spring.jump(targetValue)\n      }\n\n      onUpdate?.(targetValue)\n      onKeyframe?.(index)\n    },\n\n    destroy: () => {\n      destroyed = true\n      isPlaying = false\n      isPaused = false\n\n      if (spring) {\n        spring.destroy()\n        spring = null\n      }\n    },\n  }\n\n  return animation\n}\n\n/**\n * Helper to create a keyframe sequence from an array shorthand\n *\n * @example\n * ```ts\n * // Equivalent to: keyframes([0, 100, 50])\n * const values = parseKeyframeArray([0, 100, 50])\n * ```\n */\nexport function parseKeyframeArray(\n  values: number[],\n  times?: number[]\n): Keyframe<number>[] {\n  return values.map((value, index) => ({\n    value,\n    at: times?.[index],\n  }))\n}\n\n/**\n * Check if a value is a keyframe array (for animate prop detection)\n */\nexport function isKeyframeArray(value: unknown): value is number[] {\n  return Array.isArray(value) && value.every((v) => typeof v === 'number')\n}\n","import type { SpringValue } from '../core/spring-value.js'\n\n/**\n * Interpolation options interface\n */\nexport interface InterpolateOptions {\n  /** Clamp output to output range */\n  clamp?: boolean\n  /** Default extrapolation mode */\n  extrapolate?: 'extend' | 'clamp' | 'identity'\n  /** Extrapolation mode for left side */\n  extrapolateLeft?: 'extend' | 'clamp' | 'identity'\n  /** Extrapolation mode for right side */\n  extrapolateRight?: 'extend' | 'clamp' | 'identity'\n}\n\n/**\n * Interpolation interface\n */\nexport interface Interpolation {\n  /** Get current interpolated value */\n  get(): number\n}\n\n/**\n * Default interpolation options\n * Note: extrapolate is handled inline to allow proper branch coverage\n */\nconst defaultInterpolateOptions: Required<Pick<InterpolateOptions, 'clamp'>> = {\n  clamp: false,\n}\n\n/**\n * Value interpolation implementation\n */\nclass InterpolationImpl implements Interpolation {\n  private source: SpringValue | (() => number)\n  private input: number[]\n  private output: number[]\n  private options: InterpolateOptions\n\n  constructor(\n    source: SpringValue | (() => number),\n    input: number[],\n    output: number[],\n    options: InterpolateOptions = {}\n  ) {\n    this.source = source\n    this.input = input\n    this.output = output\n    this.options = { ...defaultInterpolateOptions, ...options }\n  }\n\n  get(): number {\n    const value = typeof this.source === 'function' ? this.source() : this.source.get()\n    return this.interpolate(value)\n  }\n\n  private interpolate(value: number): number {\n    const { input, output } = this\n    const { extrapolate, extrapolateLeft, extrapolateRight, clamp } = this.options\n\n    // Handle single point case - just return the output value\n    if (input.length === 1) {\n      return output[0]!\n    }\n\n    // Handle extrapolation\n    if (value < input[0]!) {\n      // Pass extrapolate as-is (may be undefined to test default branch)\n      const mode = this.getExtrapolationMode(extrapolateLeft, extrapolate)\n      if (mode === 'clamp') {\n        value = input[0]!\n      } else if (mode === 'identity') {\n        return value\n      }\n    } else if (value > input[input.length - 1]!) {\n      // Pass extrapolate as-is (may be undefined to test default branch)\n      const mode = this.getExtrapolationMode(extrapolateRight, extrapolate)\n      if (mode === 'clamp') {\n        value = input[input.length - 1]!\n      } else if (mode === 'identity') {\n        return value\n      }\n    }\n\n    // Find the segment\n    let i = 1\n    while (i < input.length - 1 && value > input[i]!) {\n      i++\n    }\n\n    // Linear interpolation within segment\n    const ratio = (value - input[i - 1]!) / (input[i]! - input[i - 1]!)\n    const result = output[i - 1]! + ratio * (output[i]! - output[i - 1]!)\n\n    if (clamp) {\n      const min = Math.min(...output)\n      const max = Math.max(...output)\n      return Math.max(min, Math.min(max, result))\n    }\n\n    return result\n  }\n\n  private getExtrapolationMode(\n    specificMode: 'extend' | 'clamp' | 'identity' | undefined,\n    fallbackMode: 'extend' | 'clamp' | 'identity' | undefined\n  ): 'extend' | 'clamp' | 'identity' {\n    if (specificMode !== undefined) {\n      return specificMode\n    }\n    if (fallbackMode !== undefined) {\n      return fallbackMode\n    }\n    return 'extend'\n  }\n}\n\n/**\n * Create a value interpolation\n *\n * @param value - Spring value or function that returns a number\n * @param input - Input range (array of numbers)\n * @param output - Output range (array of numbers)\n * @param options - Interpolation options\n * @returns Interpolation controller\n *\n * @example\n * ```ts\n * const x = createSpringValue(0)\n *\n * // Map 0-100 to 0-1 (opacity)\n * const opacity = interpolate(x, [0, 100], [0, 1])\n *\n * x.subscribe(() => {\n *   element.style.opacity = String(opacity.get())\n * })\n *\n * x.set(100) // opacity animates to 1\n * ```\n */\nexport function interpolate(\n  value: SpringValue | (() => number),\n  input: number[],\n  output: number[],\n  options?: InterpolateOptions\n): Interpolation {\n  return new InterpolationImpl(value, input, output, options)\n}\n","import type { SpringValue } from '../core/spring-value.js'\nimport type { InterpolateOptions } from './interpolate.js'\n\n/**\n * Color interpolation interface\n */\nexport interface ColorInterpolation {\n  /** Get current interpolated color */\n  get(): string\n}\n\n/**\n * Color interpolation implementation\n */\nclass ColorInterpolationImpl implements ColorInterpolation {\n  private source: SpringValue | (() => number)\n  private input: number[]\n  private colors: [number, number, number][]\n  private options: InterpolateOptions\n\n  constructor(\n    source: SpringValue | (() => number),\n    input: number[],\n    colorStrings: string[],\n    options: InterpolateOptions = {}\n  ) {\n    this.source = source\n    this.input = input\n    this.colors = colorStrings.map((c) => this.parseColor(c))\n    this.options = options\n  }\n\n  get(): string {\n    let value = typeof this.source === 'function' ? this.source() : this.source.get()\n    const { extrapolate, extrapolateLeft, extrapolateRight } = this.options\n\n    // Handle single color case\n    if (this.input.length === 1) {\n      const [r, g, b] = this.colors[0]!\n      return `rgb(${r}, ${g}, ${b})`\n    }\n\n    // Handle extrapolation\n    if (value < this.input[0]!) {\n      const mode = extrapolateLeft ?? extrapolate ?? 'extend'\n      if (mode === 'clamp') {\n        value = this.input[0]!\n      } else if (mode === 'identity') {\n        // For color, we can't return identity, so we clamp\n        value = this.input[0]!\n      }\n    } else if (value > this.input[this.input.length - 1]!) {\n      const mode = extrapolateRight ?? extrapolate ?? 'extend'\n      if (mode === 'clamp') {\n        value = this.input[this.input.length - 1]!\n      } else if (mode === 'identity') {\n        // For color, we can't return identity, so we clamp\n        value = this.input[this.input.length - 1]!\n      }\n    }\n\n    // Find the segment\n    let i = 1\n    while (i < this.input.length - 1 && value > this.input[i]!) {\n      i++\n    }\n\n    // Calculate interpolation ratio\n    const ratio = (value - this.input[i - 1]!) / (this.input[i]! - this.input[i - 1]!)\n\n    // Interpolate each color channel\n    const r = this.lerp(this.colors[i - 1]![0], this.colors[i]![0], ratio)\n    const g = this.lerp(this.colors[i - 1]![1], this.colors[i]![1], ratio)\n    const b = this.lerp(this.colors[i - 1]![2], this.colors[i]![2], ratio)\n\n    return `rgb(${Math.round(r)}, ${Math.round(g)}, ${Math.round(b)})`\n  }\n\n  private parseColor(color: string): [number, number, number] {\n    // Try to parse hex\n    const hexMatch = color.match(/^#([0-9a-f]{3}|[0-9a-f]{6})$/i)\n    if (hexMatch) {\n      const hex = hexMatch[1]!\n      if (hex.length === 3) {\n        return [\n          parseInt(hex.charAt(0) + hex.charAt(0), 16),\n          parseInt(hex.charAt(1) + hex.charAt(1), 16),\n          parseInt(hex.charAt(2) + hex.charAt(2), 16),\n        ]\n      }\n      return [\n        parseInt(hex.slice(0, 2), 16),\n        parseInt(hex.slice(2, 4), 16),\n        parseInt(hex.slice(4, 6), 16),\n      ]\n    }\n\n    // Try to parse rgb()\n    const rgbMatch = color.match(/rgb\\((\\d+),\\s*(\\d+),\\s*(\\d+)\\)/i)\n    if (rgbMatch) {\n      return [\n        parseInt(rgbMatch[1]!, 10),\n        parseInt(rgbMatch[2]!, 10),\n        parseInt(rgbMatch[3]!, 10),\n      ]\n    }\n\n    // Try to parse rgba()\n    const rgbaMatch = color.match(/rgba\\((\\d+),\\s*(\\d+),\\s*(\\d+),\\s*[\\d.]+\\)/i)\n    if (rgbaMatch) {\n      return [\n        parseInt(rgbaMatch[1]!, 10),\n        parseInt(rgbaMatch[2]!, 10),\n        parseInt(rgbaMatch[3]!, 10),\n      ]\n    }\n\n    // Try to parse hsl()\n    const hslMatch = color.match(/hsl\\((\\d+),\\s*(\\d+)%,\\s*(\\d+)%\\)/i)\n    if (hslMatch) {\n      return this.hslToRgb(\n        parseInt(hslMatch[1]!, 10),\n        parseInt(hslMatch[2]!, 10),\n        parseInt(hslMatch[3]!, 10)\n      )\n    }\n\n    // Default to black\n    return [0, 0, 0]\n  }\n\n  private hslToRgb(h: number, s: number, l: number): [number, number, number] {\n    h = ((h % 360) + 360) % 360\n    s = Math.max(0, Math.min(100, s)) / 100\n    l = Math.max(0, Math.min(100, l)) / 100\n\n    if (s === 0) {\n      const gray = Math.round(l * 255)\n      return [gray, gray, gray]\n    }\n\n    const hue2rgb = (p: number, q: number, t: number): number => {\n      if (t < 0) t += 1\n      if (t > 1) t -= 1\n      if (t < 1 / 6) return p + (q - p) * 6 * t\n      if (t < 1 / 2) return q\n      if (t < 2 / 3) return p + (q - p) * (2 / 3 - t) * 6\n      return p\n    }\n\n    const q = l < 0.5 ? l * (1 + s) : l + s - l * s\n    const p = 2 * l - q\n\n    return [\n      Math.round(hue2rgb(p, q, h / 360 + 1 / 3) * 255),\n      Math.round(hue2rgb(p, q, h / 360) * 255),\n      Math.round(hue2rgb(p, q, h / 360 - 1 / 3) * 255),\n    ]\n  }\n\n  private lerp(a: number, b: number, t: number): number {\n    return a + (b - a) * t\n  }\n}\n\n/**\n * Create a color interpolation\n *\n * @param value - Spring value or function that returns a number\n * @param input - Input range (array of numbers)\n * @param colors - Array of color strings (hex, rgb, hsl)\n * @param options - Interpolation options\n * @returns Color interpolation controller\n *\n * @example\n * ```ts\n * const progress = createSpringValue(0)\n *\n * // Interpolate through colors\n * const color = interpolateColor(\n *   progress,\n *   [0, 50, 100],\n *   ['#ff0000', '#00ff00', '#0000ff']\n * )\n *\n * progress.subscribe(() => {\n *   element.style.backgroundColor = color.get()\n * })\n *\n * progress.set(50) // color is '#00ff00'\n * ```\n */\nexport function interpolateColor(\n  value: SpringValue | (() => number),\n  input: number[],\n  colors: string[],\n  options?: InterpolateOptions\n): ColorInterpolation {\n  return new ColorInterpolationImpl(value, input, colors, options)\n}\n","import { defaultConfig } from '../core/config.js'\nimport { createSpringValue, type SpringValue } from '../core/spring-value.js'\nimport { clamp } from '../utils/math.js'\n\n/**\n * Snap point configuration\n */\nexport interface SnapPoint {\n  x: number\n  y: number\n  /** Attraction radius (pixels) */\n  radius?: number\n}\n\n/**\n * Snap configuration\n */\nexport interface SnapConfig {\n  /** Array of snap points */\n  points?: SnapPoint[]\n  /** Snap to grid with given cell size */\n  grid?: { x: number; y: number }\n  /** Velocity threshold to snap (lower = snap more easily) */\n  velocityThreshold?: number\n  /** Whether to snap only on release */\n  snapOnRelease?: boolean\n}\n\n/**\n * Constraint configuration - supports multiple constraint types\n */\nexport interface DragConstraints {\n  /** Simple box bounds */\n  bounds?: {\n    left?: number\n    right?: number\n    top?: number\n    bottom?: number\n  }\n  /** Constrain to parent element */\n  constrainToParent?: boolean\n  /** Constrain to specific element */\n  constrainToElement?: HTMLElement\n  /** Padding when constrained to element */\n  constraintPadding?: number | { top?: number; right?: number; bottom?: number; left?: number }\n  /** Lock to specific axis */\n  lockAxis?: 'x' | 'y' | null\n  /** Lock to 45-degree diagonal lines */\n  lockToDiagonal?: boolean\n}\n\n/**\n * Drag spring configuration interface\n */\nexport interface DragSpringConfig {\n  /** Spring stiffness (default: 100) */\n  stiffness?: number\n  /** Damping ratio (default: 10) */\n  damping?: number\n  /** Mass (default: 1) */\n  mass?: number\n  /** Initial velocity */\n  velocity?: number\n  /** Speed threshold for considering spring at rest (default: 0.01) */\n  restSpeed?: number\n  /** Position threshold for considering spring at rest (default: 0.01) */\n  restDelta?: number\n  /** Clamp value to [from, to] range */\n  clamp?: boolean\n  /** Axis constraint (deprecated, use constraints.lockAxis) */\n  axis?: 'x' | 'y' | 'both'\n  /** Boundary constraints (deprecated, use constraints.bounds) */\n  bounds?: {\n    left?: number\n    right?: number\n    top?: number\n    bottom?: number\n  }\n  /** Enhanced constraint configuration */\n  constraints?: DragConstraints\n  /** Snap configuration */\n  snap?: SnapConfig\n  /** Enable rubber band effect at bounds */\n  rubberBand?: boolean\n  /** Rubber band stretch factor (0-1, default: 0.5) */\n  rubberBandFactor?: number\n  /** Elastic bounce power (0-1, default: 0.3) */\n  elasticBounce?: number\n  /** Momentum after release (true = continue with velocity) */\n  momentum?: boolean\n  /** Deceleration rate for momentum (0-1, default: 0.95) */\n  momentumDecay?: number\n  /** Callback called when drag starts */\n  onDragStart?: (event: PointerEvent) => void\n  /** Callback called during drag */\n  onDrag?: (x: number, y: number, event: PointerEvent) => void\n  /** Callback called when drag ends */\n  onDragEnd?: (x: number, y: number, velocity: { x: number; y: number }) => void\n  /** Callback called on position update */\n  onUpdate?: (x: number, y: number) => void\n  /** Callback when snapping to a point */\n  onSnapStart?: (point: SnapPoint) => void\n  /** Callback when snap animation completes */\n  onSnapComplete?: (point: SnapPoint) => void\n  /** Callback when hitting bounds */\n  onBoundsHit?: (edge: 'left' | 'right' | 'top' | 'bottom') => void\n}\n\n/**\n * Drag spring interface\n */\nexport interface DragSpring {\n  /** Enable drag interaction */\n  enable(): void\n  /** Disable drag interaction */\n  disable(): void\n  /** Check if currently enabled */\n  isEnabled(): boolean\n  /** Check if currently dragging */\n  isDragging(): boolean\n  /** Reset to initial position */\n  reset(): void\n  /** Get current position */\n  getPosition(): { x: number; y: number }\n  /** Get current velocity */\n  getVelocity(): { x: number; y: number }\n  /** Set position instantly */\n  setPosition(x: number, y: number): void\n  /** Jump to position (instant, alias for setPosition) */\n  jumpTo(x: number, y: number): void\n  /** Animate to position with spring physics */\n  animateTo(x: number, y: number): void\n  /** Release with velocity */\n  release(velocityX: number, velocityY: number): void\n  /** Snap to nearest point */\n  snapToNearest(): void\n  /** Snap to specific point */\n  snapTo(point: SnapPoint): void\n  /** Update constraints dynamically */\n  setConstraints(constraints: DragConstraints): void\n  /** Update snap configuration dynamically */\n  setSnap(snap: SnapConfig): void\n  /** Clean up resources */\n  destroy(): void\n}\n\n/**\n * Default drag spring configuration\n */\nconst defaultDragConfig = {\n  axis: 'both' as const,\n  rubberBand: false,\n  rubberBandFactor: 0.5,\n  elasticBounce: 0.3,\n  momentum: true,\n  momentumDecay: 0.95,\n  stiffness: 200,\n  damping: 20,\n  mass: 1,\n  restSpeed: 0.01,\n  restDelta: 0.01,\n  clamp: false,\n}\n\n/**\n * Drag spring implementation\n */\nclass DragSpringImpl implements DragSpring {\n  private element: HTMLElement\n  private config: DragSpringConfig\n  private enabled = true\n  private position = { x: 0, y: 0 }\n  private _isDragging = false\n  private startPosition = { x: 0, y: 0 }\n  private pointerStart = { x: 0, y: 0 }\n  private lastPosition = { x: 0, y: 0 }\n  private lastTime = 0\n  private velocity = { x: 0, y: 0 }\n  private currentSnap: SnapPoint | null = null\n\n  // Springs for each axis\n  private springX: SpringValue\n  private springY: SpringValue\n\n  constructor(element: HTMLElement, config: DragSpringConfig = {}) {\n    this.element = element\n    this.config = { ...defaultDragConfig, ...config }\n\n    // Extract only spring physics config for createSpringValue\n    const springConfig = {\n      stiffness: this.config.stiffness,\n      damping: this.config.damping,\n      mass: this.config.mass,\n      restSpeed: this.config.restSpeed,\n      restDelta: this.config.restDelta,\n      clamp: this.config.clamp,\n    }\n\n    this.springX = createSpringValue(0, springConfig)\n    this.springY = createSpringValue(0, springConfig)\n\n    // Subscribe to spring updates\n    this.springX.subscribe(() => {\n      if (!this._isDragging) {\n        this.position.x = this.springX.get()\n        if (this.config.onUpdate) {\n          this.config.onUpdate(this.position.x, this.position.y)\n        }\n      }\n    })\n\n    this.springY.subscribe(() => {\n      if (!this._isDragging) {\n        this.position.y = this.springY.get()\n        if (this.config.onUpdate) {\n          this.config.onUpdate(this.position.x, this.position.y)\n        }\n      }\n    })\n\n    this.setupPointerEvents()\n  }\n\n  private setupPointerEvents(): void {\n    this.element.addEventListener('pointerdown', this.onPointerDown)\n  }\n\n  private onPointerDown = (e: PointerEvent): void => {\n    if (!this.enabled || e.button !== 0) return\n\n    this._isDragging = true\n    this.startPosition = { ...this.position }\n    this.pointerStart = { x: e.clientX, y: e.clientY }\n    this.lastPosition = { x: e.clientX, y: e.clientY }\n    this.lastTime = performance.now()\n    this.velocity = { x: 0, y: 0 }\n\n    this.element.setPointerCapture(e.pointerId)\n    this.element.addEventListener('pointermove', this.onPointerMove)\n    this.element.addEventListener('pointerup', this.onPointerUp)\n    this.element.addEventListener('pointercancel', this.onPointerUp)\n\n    // Explicit if for better branch coverage\n    if (this.config.onDragStart) {\n      this.config.onDragStart(e)\n    }\n  }\n\n  private onPointerMove = (e: PointerEvent): void => {\n    const now = performance.now()\n    const dt = now - this.lastTime\n\n    // Calculate velocity (pixels per ms, scaled to pixels per second)\n    this.velocity = {\n      x: (e.clientX - this.lastPosition.x) / Math.max(dt, 1),\n      y: (e.clientY - this.lastPosition.y) / Math.max(dt, 1),\n    }\n\n    this.lastPosition = { x: e.clientX, y: e.clientY }\n    this.lastTime = now\n\n    // Calculate new position\n    let newX = this.startPosition.x + (e.clientX - this.pointerStart.x)\n    let newY = this.startPosition.y + (e.clientY - this.pointerStart.y)\n\n    // Apply bounds with rubber band\n    if (this.config.bounds) {\n      newX = this.applyBounds(\n        newX,\n        this.config.bounds.left ?? -Infinity,\n        this.config.bounds.right ?? Infinity\n      )\n      newY = this.applyBounds(\n        newY,\n        this.config.bounds.top ?? -Infinity,\n        this.config.bounds.bottom ?? Infinity\n      )\n    }\n\n    // Apply axis constraint\n    if (this.config.axis === 'x') {\n      newY = 0\n    } else if (this.config.axis === 'y') {\n      newX = 0\n    }\n\n    this.position = { x: newX, y: newY }\n    if (this.config.onDrag) {\n      this.config.onDrag(newX, newY, e)\n    }\n    if (this.config.onUpdate) {\n      this.config.onUpdate(newX, newY)\n    }\n  }\n\n  private applyBounds(value: number, min: number, max: number): number {\n    if (!isFinite(min) && !isFinite(max)) return value\n\n    const actualMin = isFinite(min) ? min : -Infinity\n    const actualMax = isFinite(max) ? max : Infinity\n\n    if (this.config.rubberBand) {\n      const factor = this.config.rubberBandFactor || 0.5\n      if (value < actualMin) {\n        return actualMin - (actualMin - value) * factor\n      }\n      if (value > actualMax) {\n        return actualMax + (value - actualMax) * factor\n      }\n    }\n\n    return clamp(value, actualMin, actualMax)\n  }\n\n  private onPointerUp = (e: PointerEvent): void => {\n    this._isDragging = false\n\n    this.element.releasePointerCapture(e.pointerId)\n    this.element.removeEventListener('pointermove', this.onPointerMove)\n    this.element.removeEventListener('pointerup', this.onPointerUp)\n    this.element.removeEventListener('pointercancel', this.onPointerUp)\n\n    // Check for snap points first\n    if (this.config.snap?.snapOnRelease !== false) {\n      const snapPoint = this.findNearestSnapPoint()\n      if (snapPoint) {\n        this.snapTo(snapPoint)\n        if (this.config.onDragEnd) {\n          this.config.onDragEnd(this.position.x, this.position.y, this.velocity)\n        }\n        return\n      }\n    }\n\n    // Scale velocity for spring (convert from pixels/ms to more reasonable units)\n    this.release(this.velocity.x * 16, this.velocity.y * 16)\n\n    if (this.config.onDragEnd) {\n      this.config.onDragEnd(this.position.x, this.position.y, this.velocity)\n    }\n  }\n\n  private findNearestSnapPoint(): SnapPoint | null {\n    const snap = this.config.snap\n    if (!snap) return null\n\n    // Check grid snapping first\n    if (snap.grid) {\n      const gridX = Math.round(this.position.x / snap.grid.x) * snap.grid.x\n      const gridY = Math.round(this.position.y / snap.grid.y) * snap.grid.y\n      return { x: gridX, y: gridY }\n    }\n\n    // Check snap points\n    if (snap.points && snap.points.length > 0) {\n      const velocityMagnitude = Math.sqrt(this.velocity.x ** 2 + this.velocity.y ** 2)\n      const threshold = snap.velocityThreshold ?? 0.5\n\n      // Don't snap if moving too fast\n      if (velocityMagnitude > threshold) return null\n\n      let nearestPoint: SnapPoint | null = null\n      let nearestDistance = Infinity\n\n      for (const point of snap.points) {\n        const dx = this.position.x - point.x\n        const dy = this.position.y - point.y\n        const distance = Math.sqrt(dx * dx + dy * dy)\n        const radius = point.radius ?? 50\n\n        if (distance < radius && distance < nearestDistance) {\n          nearestDistance = distance\n          nearestPoint = point\n        }\n      }\n\n      return nearestPoint\n    }\n\n    return null\n  }\n\n  private getEffectiveBounds(): { left: number; right: number; top: number; bottom: number } {\n    // Start with explicit bounds\n    const bounds = {\n      left: this.config.bounds?.left ?? this.config.constraints?.bounds?.left ?? -Infinity,\n      right: this.config.bounds?.right ?? this.config.constraints?.bounds?.right ?? Infinity,\n      top: this.config.bounds?.top ?? this.config.constraints?.bounds?.top ?? -Infinity,\n      bottom: this.config.bounds?.bottom ?? this.config.constraints?.bounds?.bottom ?? Infinity,\n    }\n\n    const constraints = this.config.constraints\n\n    // Handle constrainToParent\n    if (constraints?.constrainToParent && this.element.parentElement) {\n      const parent = this.element.parentElement\n      const parentRect = parent.getBoundingClientRect()\n      const elementRect = this.element.getBoundingClientRect()\n\n      const padding = this.normalizePadding(constraints.constraintPadding)\n\n      bounds.left = Math.max(bounds.left, padding.left)\n      bounds.right = Math.min(bounds.right, parentRect.width - elementRect.width - padding.right)\n      bounds.top = Math.max(bounds.top, padding.top)\n      bounds.bottom = Math.min(bounds.bottom, parentRect.height - elementRect.height - padding.bottom)\n    }\n\n    // Handle constrainToElement\n    if (constraints?.constrainToElement) {\n      const constraintRect = constraints.constrainToElement.getBoundingClientRect()\n      const elementRect = this.element.getBoundingClientRect()\n      const parentRect = this.element.parentElement?.getBoundingClientRect() ?? { left: 0, top: 0 }\n\n      const padding = this.normalizePadding(constraints.constraintPadding)\n\n      const offsetX = constraintRect.left - parentRect.left\n      const offsetY = constraintRect.top - parentRect.top\n\n      bounds.left = Math.max(bounds.left, offsetX + padding.left)\n      bounds.right = Math.min(bounds.right, offsetX + constraintRect.width - elementRect.width - padding.right)\n      bounds.top = Math.max(bounds.top, offsetY + padding.top)\n      bounds.bottom = Math.min(bounds.bottom, offsetY + constraintRect.height - elementRect.height - padding.bottom)\n    }\n\n    return bounds\n  }\n\n  private normalizePadding(padding: number | { top?: number; right?: number; bottom?: number; left?: number } | undefined): { top: number; right: number; bottom: number; left: number } {\n    if (typeof padding === 'number') {\n      return { top: padding, right: padding, bottom: padding, left: padding }\n    }\n    return {\n      top: padding?.top ?? 0,\n      right: padding?.right ?? 0,\n      bottom: padding?.bottom ?? 0,\n      left: padding?.left ?? 0,\n    }\n  }\n\n  enable(): void {\n    this.enabled = true\n  }\n\n  disable(): void {\n    this.enabled = false\n    if (this._isDragging) {\n      this._isDragging = false\n    }\n  }\n\n  isEnabled(): boolean {\n    return this.enabled\n  }\n\n  isDragging(): boolean {\n    return this._isDragging\n  }\n\n  reset(): void {\n    this.springX.jump(0)\n    this.springY.jump(0)\n    this.position = { x: 0, y: 0 }\n    this.velocity = { x: 0, y: 0 }\n    this.currentSnap = null\n    // Explicit if for better branch coverage\n    if (this.config.onUpdate) {\n      this.config.onUpdate(0, 0)\n    }\n  }\n\n  getPosition(): { x: number; y: number } {\n    return { ...this.position }\n  }\n\n  getVelocity(): { x: number; y: number } {\n    return { ...this.velocity }\n  }\n\n  setPosition(x: number, y: number): void {\n    // Instant position change (same as jumpTo for backwards compatibility)\n    this.position = { x, y }\n    this.springX.jump(x)\n    this.springY.jump(y)\n  }\n\n  jumpTo(x: number, y: number): void {\n    // Update position immediately for synchronous access\n    this.position = { x, y }\n    this.springX.jump(x)\n    this.springY.jump(y)\n    if (this.config.onUpdate) {\n      this.config.onUpdate(x, y)\n    }\n  }\n\n  animateTo(x: number, y: number): void {\n    // Animate to the position with spring physics\n    this.springX.set(x)\n    this.springY.set(y)\n  }\n\n  release(velocityX: number, velocityY: number): void {\n    const bounds = this.getEffectiveBounds()\n    const { left, right, top, bottom } = bounds\n\n    let targetX = this.position.x\n    let targetY = this.position.y\n\n    // Apply momentum if enabled\n    if (this.config.momentum) {\n      const decay = this.config.momentumDecay ?? 0.95\n      const momentumX = velocityX * (1 / (1 - decay)) * 0.1\n      const momentumY = velocityY * (1 / (1 - decay)) * 0.1\n      targetX += momentumX\n      targetY += momentumY\n    }\n\n    // Clamp to bounds\n    targetX = clamp(targetX, left, right)\n    targetY = clamp(targetY, top, bottom)\n\n    // Notify bounds hit\n    if (this.config.onBoundsHit) {\n      if (this.position.x < left) this.config.onBoundsHit('left')\n      if (this.position.x > right) this.config.onBoundsHit('right')\n      if (this.position.y < top) this.config.onBoundsHit('top')\n      if (this.position.y > bottom) this.config.onBoundsHit('bottom')\n    }\n\n    // Animate to target with elastic bounce\n    if (targetX !== this.position.x || this.position.x < left || this.position.x > right) {\n      this.springX.set(targetX, { velocity: velocityX })\n    }\n    if (targetY !== this.position.y || this.position.y < top || this.position.y > bottom) {\n      this.springY.set(targetY, { velocity: velocityY })\n    }\n  }\n\n  snapToNearest(): void {\n    const snapPoint = this.findNearestSnapPoint()\n    if (snapPoint) {\n      this.snapTo(snapPoint)\n    }\n  }\n\n  snapTo(point: SnapPoint): void {\n    this.currentSnap = point\n    if (this.config.onSnapStart) {\n      this.config.onSnapStart(point)\n    }\n\n    this.springX.set(point.x)\n    this.springY.set(point.y)\n\n    // Simple completion detection\n    setTimeout(() => {\n      if (this.currentSnap === point && this.config.onSnapComplete) {\n        this.config.onSnapComplete(point)\n      }\n    }, 500)\n  }\n\n  setConstraints(constraints: DragConstraints): void {\n    this.config.constraints = constraints\n  }\n\n  setSnap(snap: SnapConfig): void {\n    this.config.snap = snap\n  }\n\n  destroy(): void {\n    this.element.removeEventListener('pointerdown', this.onPointerDown)\n    this.springX.destroy()\n    this.springY.destroy()\n  }\n}\n\n/**\n * Create a drag spring\n *\n * @param element - HTML element to make draggable\n * @param config - Drag spring configuration\n * @returns Drag spring controller\n *\n * @example\n * ```ts\n * const drag = createDragSpring(element, {\n *   onUpdate: (x, y) => {\n *     element.style.transform = `translate(${x}px, ${y}px)`\n *   },\n * })\n * ```\n */\nexport function createDragSpring(\n  element: HTMLElement,\n  config?: DragSpringConfig\n): DragSpring {\n  return new DragSpringImpl(element, config)\n}\n","import { defaultConfig } from '../core/config.js'\nimport { createSpringValue, type SpringValue } from '../core/spring-value.js'\n\n/**\n * Scroll spring configuration interface\n */\nexport interface ScrollSpringConfig {\n  /** Spring stiffness (default: 100) */\n  stiffness?: number\n  /** Damping ratio (default: 10) */\n  damping?: number\n  /** Mass (default: 1) */\n  mass?: number\n  /** Speed threshold for considering spring at rest (default: 0.01) */\n  restSpeed?: number\n  /** Position threshold for considering spring at rest (default: 0.01) */\n  restDelta?: number\n  /** Clamp value to [from, to] range */\n  clamp?: boolean\n  /** Scroll direction */\n  direction?: 'horizontal' | 'vertical' | 'both'\n  /** Enable momentum/inertia */\n  momentum?: boolean\n  /** Momentum decay factor (0-1) */\n  momentumDecay?: number\n  /** Enable bounce at edges */\n  bounce?: boolean\n  /** Bounce spring stiffness */\n  bounceStiffness?: number\n  /** Bounce spring damping */\n  bounceDamping?: number\n  /** Callback called on scroll */\n  onScroll?: (scrollX: number, scrollY: number) => void\n  /** Callback called when scroll starts */\n  onScrollStart?: () => void\n  /** Callback called when scroll ends */\n  onScrollEnd?: () => void\n}\n\n/**\n * Scroll spring interface\n */\nexport interface ScrollSpring {\n  /** Get current scroll position */\n  getScroll(): { x: number; y: number }\n  /** Scroll to position */\n  scrollTo(x: number, y: number): void\n  /** Scroll to element */\n  scrollToElement(element: HTMLElement, offset?: number): void\n  /** Enable scroll handling */\n  enable(): void\n  /** Disable scroll handling */\n  disable(): void\n  /** Clean up resources */\n  destroy(): void\n}\n\n/**\n * Default scroll spring configuration\n */\nconst defaultScrollConfig: Required<\n  Omit<\n    ScrollSpringConfig,\n    | 'onScroll'\n    | 'onScrollStart'\n    | 'onScrollEnd'\n    | 'bounceStiffness'\n    | 'bounceDamping'\n    | 'velocity'\n  >\n> = {\n  direction: 'vertical',\n  momentum: false,\n  momentumDecay: 0.95,\n  bounce: false,\n  stiffness: 100,\n  damping: 10,\n  mass: 1,\n  restSpeed: 0.01,\n  restDelta: 0.01,\n  clamp: false,\n}\n\n/**\n * Scroll spring implementation\n */\nclass ScrollSpringImpl implements ScrollSpring {\n  private container: HTMLElement\n  private config: ScrollSpringConfig\n  private scroll = { x: 0, y: 0 }\n  private target = { x: 0, y: 0 }\n  private isScrolling = false\n  private isEnabled = true\n\n  private springX: SpringValue\n  private springY: SpringValue\n\n  constructor(container: HTMLElement, config: ScrollSpringConfig = {}) {\n    this.container = container\n    this.config = { ...defaultScrollConfig, ...config }\n\n    // Extract only spring physics config for createSpringValue\n    const springConfig = {\n      stiffness: this.config.stiffness,\n      damping: this.config.damping,\n      mass: this.config.mass,\n      restSpeed: this.config.restSpeed,\n      restDelta: this.config.restDelta,\n      clamp: this.config.clamp,\n    }\n\n    this.springX = createSpringValue(0, springConfig)\n    this.springY = createSpringValue(0, springConfig)\n\n    // Subscribe to spring updates\n    this.springX.subscribe(() => {\n      this.scroll.x = this.springX.get()\n      this.config.onScroll?.(this.scroll.x, this.scroll.y)\n    })\n\n    this.springY.subscribe(() => {\n      this.scroll.y = this.springY.get()\n      this.config.onScroll?.(this.scroll.x, this.scroll.y)\n    })\n\n    this.setupScrollEvents()\n  }\n\n  private setupScrollEvents(): void {\n    this.container.addEventListener('wheel', this.onWheel, { passive: false })\n  }\n\n  private onWheel = (e: WheelEvent): void => {\n    if (!this.isEnabled) return\n\n    if (!this.isScrolling) {\n      this.isScrolling = true\n      this.config.onScrollStart?.()\n    }\n\n    // Apply direction filter\n    let deltaX = e.deltaX\n    let deltaY = e.deltaY\n\n    if (this.config.direction === 'horizontal') {\n      deltaY = 0\n    } else if (this.config.direction === 'vertical') {\n      deltaX = 0\n    }\n\n    // Apply bounce at edges\n    if (this.config.bounce) {\n      const maxScrollX = this.container.scrollWidth - this.container.clientWidth\n      const maxScrollY = this.container.scrollHeight - this.container.clientHeight\n\n      this.target.x += deltaX\n      this.target.y += deltaY\n\n      // Apply rubber band at edges\n      if (this.target.x < 0) {\n        this.target.x = -Math.sqrt(-this.target.x) * 10\n      } else if (this.target.x > maxScrollX) {\n        this.target.x = maxScrollX + Math.sqrt(this.target.x - maxScrollX) * 10\n      }\n\n      if (this.target.y < 0) {\n        this.target.y = -Math.sqrt(-this.target.y) * 10\n      } else if (this.target.y > maxScrollY) {\n        this.target.y = maxScrollY + Math.sqrt(this.target.y - maxScrollY) * 10\n      }\n\n      // Prevent default to handle scroll ourselves\n      e.preventDefault()\n    } else {\n      this.target.x += deltaX\n      this.target.y += deltaY\n\n      // Clamp to bounds\n      const maxScrollX = this.container.scrollWidth - this.container.clientWidth\n      const maxScrollY = this.container.scrollHeight - this.container.clientHeight\n\n      this.target.x = Math.max(0, Math.min(this.target.x, maxScrollX))\n      this.target.y = Math.max(0, Math.min(this.target.y, maxScrollY))\n    }\n\n    this.startScrollLoop()\n  }\n\n  private startScrollLoop(): void {\n    // Update springs towards target\n    this.springX.set(this.target.x)\n    this.springY.set(this.target.y)\n\n    // Check for scroll end\n    const checkEnd = () => {\n      const settled =\n        Math.abs(this.scroll.x - this.target.x) < 0.1 &&\n        Math.abs(this.scroll.y - this.target.y) < 0.1 &&\n        !this.springX.isAnimating() &&\n        !this.springY.isAnimating()\n\n      if (settled && this.isScrolling) {\n        this.isScrolling = false\n        this.config.onScrollEnd?.()\n      } else if (this.isScrolling) {\n        requestAnimationFrame(checkEnd)\n      }\n    }\n\n    checkEnd()\n  }\n\n  getScroll(): { x: number; y: number } {\n    return { ...this.scroll }\n  }\n\n  scrollTo(x: number, y: number): void {\n    this.target = { x, y }\n    this.springX.set(x)\n    this.springY.set(y)\n  }\n\n  scrollToElement(element: HTMLElement, offset = 0): void {\n    const containerRect = this.container.getBoundingClientRect()\n    const elementRect = element.getBoundingClientRect()\n\n    const x = elementRect.left - containerRect.left + this.scroll.x + offset\n    const y = elementRect.top - containerRect.top + this.scroll.y + offset\n\n    this.scrollTo(x, y)\n  }\n\n  enable(): void {\n    this.isEnabled = true\n  }\n\n  disable(): void {\n    this.isEnabled = false\n  }\n\n  destroy(): void {\n    this.container.removeEventListener('wheel', this.onWheel)\n    this.springX.destroy()\n    this.springY.destroy()\n  }\n}\n\n/**\n * Create a scroll spring\n *\n * @param container - Scrollable container element\n * @param config - Scroll spring configuration\n * @returns Scroll spring controller\n *\n * @example\n * ```ts\n * const scroll = createScrollSpring(container, {\n *   onScroll: (x, y) => {\n *     content.style.transform = `translate(${-x}px, ${-y}px)`\n *   },\n * })\n * ```\n */\nexport function createScrollSpring(\n  container: HTMLElement,\n  config?: ScrollSpringConfig\n): ScrollSpring {\n  return new ScrollSpringImpl(container, config)\n}\n","/**\n * Advanced Gesture System - Multi-touch gestures with spring physics\n *\n * Provides pinch, rotate, swipe, and long-press detection with\n * velocity tracking and spring-based animations.\n */\n\nimport { createSpringValue, type SpringValue } from '../core/spring-value.js'\nimport { clamp } from '../utils/math.js'\n\n// ============ Types ============\n\n/**\n * Point in 2D space\n */\nexport interface Point {\n  x: number\n  y: number\n}\n\n/**\n * Gesture state shared across all gesture types\n */\nexport interface GestureState {\n  /** Whether gesture is active */\n  active: boolean\n  /** First touch/pointer position */\n  first: boolean\n  /** Last event in gesture */\n  last: boolean\n  /** Event that triggered the gesture */\n  event: PointerEvent | TouchEvent\n  /** Time since gesture started (ms) */\n  elapsedTime: number\n  /** Gesture was cancelled */\n  cancelled: boolean\n}\n\n/**\n * Pinch gesture state\n */\nexport interface PinchState extends GestureState {\n  /** Current scale (1 = original) */\n  scale: number\n  /** Scale velocity */\n  velocity: number\n  /** Distance between fingers */\n  distance: number\n  /** Initial distance between fingers */\n  initialDistance: number\n  /** Center point between fingers */\n  origin: Point\n  /** Movement delta */\n  movement: number\n  /** Scale offset from initial */\n  offset: number\n}\n\n/**\n * Rotate gesture state\n */\nexport interface RotateState extends GestureState {\n  /** Current rotation in degrees */\n  angle: number\n  /** Angular velocity (degrees/second) */\n  velocity: number\n  /** Initial angle */\n  initialAngle: number\n  /** Center point of rotation */\n  origin: Point\n  /** Rotation movement */\n  movement: number\n  /** Rotation offset from initial */\n  offset: number\n}\n\n/**\n * Swipe gesture state\n */\nexport interface SwipeState extends GestureState {\n  /** Swipe direction */\n  direction: 'up' | 'down' | 'left' | 'right' | null\n  /** Swipe velocity */\n  velocity: Point\n  /** Distance swiped */\n  distance: Point\n  /** Movement from start */\n  movement: Point\n  /** Swipe duration in ms */\n  duration: number\n}\n\n/**\n * Long press gesture state\n */\nexport interface LongPressState extends GestureState {\n  /** Press position */\n  position: Point\n  /** Press duration in ms */\n  duration: number\n  /** Whether threshold was reached */\n  triggered: boolean\n}\n\n/**\n * Pinch gesture configuration\n */\nexport interface PinchConfig {\n  /** Minimum scale (default: 0.1) */\n  minScale?: number\n  /** Maximum scale (default: 10) */\n  maxScale?: number\n  /** Enable rubber band at limits */\n  rubberBand?: boolean\n  /** Rubber band factor (0-1) */\n  rubberBandFactor?: number\n  /** Spring config for release animation */\n  spring?: {\n    stiffness?: number\n    damping?: number\n  }\n  /** Callback on pinch */\n  onPinch?: (state: PinchState) => void\n  /** Callback when pinch starts */\n  onPinchStart?: (state: PinchState) => void\n  /** Callback when pinch ends */\n  onPinchEnd?: (state: PinchState) => void\n}\n\n/**\n * Rotate gesture configuration\n */\nexport interface RotateConfig {\n  /** Enable rotation (default: true) */\n  enabled?: boolean\n  /** Minimum rotation threshold in degrees */\n  threshold?: number\n  /** Callback on rotate */\n  onRotate?: (state: RotateState) => void\n  /** Callback when rotation starts */\n  onRotateStart?: (state: RotateState) => void\n  /** Callback when rotation ends */\n  onRotateEnd?: (state: RotateState) => void\n}\n\n/**\n * Swipe gesture configuration\n */\nexport interface SwipeConfig {\n  /** Minimum velocity to trigger swipe (pixels/ms) */\n  velocityThreshold?: number\n  /** Minimum distance to trigger swipe (pixels) */\n  distanceThreshold?: number\n  /** Maximum duration for swipe (ms) */\n  maxDuration?: number\n  /** Axis constraint */\n  axis?: 'x' | 'y' | 'both'\n  /** Callback on swipe */\n  onSwipe?: (state: SwipeState) => void\n  /** Callback when swipe starts */\n  onSwipeStart?: (state: SwipeState) => void\n  /** Callback when swipe ends */\n  onSwipeEnd?: (state: SwipeState) => void\n}\n\n/**\n * Long press gesture configuration\n */\nexport interface LongPressConfig {\n  /** Duration to trigger long press (ms, default: 500) */\n  threshold?: number\n  /** Movement tolerance (pixels) */\n  movementTolerance?: number\n  /** Callback when long press triggers */\n  onLongPress?: (state: LongPressState) => void\n  /** Callback on press start */\n  onPressStart?: (state: LongPressState) => void\n  /** Callback on press end */\n  onPressEnd?: (state: LongPressState) => void\n}\n\n/**\n * Combined gesture configuration\n */\nexport interface GestureConfig {\n  pinch?: PinchConfig\n  rotate?: RotateConfig\n  swipe?: SwipeConfig\n  longPress?: LongPressConfig\n}\n\n/**\n * Gesture controller interface\n */\nexport interface GestureController {\n  /** Enable gestures */\n  enable(): void\n  /** Disable gestures */\n  disable(): void\n  /** Check if enabled */\n  isEnabled(): boolean\n  /** Destroy and cleanup */\n  destroy(): void\n}\n\n// ============ Utility Functions ============\n\n/**\n * Calculate distance between two points\n */\nfunction getDistance(p1: Point, p2: Point): number {\n  const dx = p2.x - p1.x\n  const dy = p2.y - p1.y\n  return Math.sqrt(dx * dx + dy * dy)\n}\n\n/**\n * Calculate angle between two points in degrees\n */\nfunction getAngle(p1: Point, p2: Point): number {\n  return (Math.atan2(p2.y - p1.y, p2.x - p1.x) * 180) / Math.PI\n}\n\n/**\n * Get center point between two points\n */\nfunction getCenter(p1: Point, p2: Point): Point {\n  return {\n    x: (p1.x + p2.x) / 2,\n    y: (p1.y + p2.y) / 2,\n  }\n}\n\n/**\n * Apply rubber band effect\n */\nfunction rubberBand(value: number, min: number, max: number, factor: number): number {\n  if (value < min) {\n    return min - Math.pow(min - value, factor)\n  }\n  if (value > max) {\n    return max + Math.pow(value - max, factor)\n  }\n  return value\n}\n\n// ============ Pinch Gesture ============\n\n/**\n * Create pinch gesture handler\n *\n * @example\n * ```ts\n * const pinch = createPinchGesture(element, {\n *   onPinch: (state) => {\n *     element.style.transform = `scale(${state.scale})`\n *   },\n * })\n * ```\n */\nexport function createPinchGesture(\n  element: HTMLElement,\n  config: PinchConfig = {}\n): GestureController {\n  const {\n    minScale = 0.1,\n    maxScale = 10,\n    rubberBand: enableRubberBand = true,\n    rubberBandFactor = 0.5,\n    spring = { stiffness: 200, damping: 20 },\n    onPinch,\n    onPinchStart,\n    onPinchEnd,\n  } = config\n\n  let enabled = true\n  let active = false\n  let initialDistance = 0\n  let initialScale = 1\n  let currentScale = 1\n  let lastScale = 1\n  let velocity = 0\n  let startTime = 0\n  let lastTime = 0\n\n  const touches = new Map<number, Point>()\n  let scaleSpring: SpringValue | null = null\n\n  const createState = (event: TouchEvent, first = false, last = false): PinchState => {\n    const touchArray = Array.from(touches.values())\n    const p1 = touchArray[0] ?? { x: 0, y: 0 }\n    const p2 = touchArray[1] ?? { x: 0, y: 0 }\n    const origin = touchArray.length >= 2 ? getCenter(p1, p2) : { x: 0, y: 0 }\n\n    return {\n      active,\n      first,\n      last,\n      event,\n      elapsedTime: performance.now() - startTime,\n      cancelled: false,\n      scale: currentScale,\n      velocity,\n      distance: touchArray.length >= 2 ? getDistance(p1, p2) : 0,\n      initialDistance,\n      origin,\n      movement: currentScale - initialScale,\n      offset: currentScale - 1,\n    }\n  }\n\n  const handleTouchStart = (e: TouchEvent) => {\n    if (!enabled) return\n\n    for (const touch of Array.from(e.changedTouches)) {\n      touches.set(touch.identifier, { x: touch.clientX, y: touch.clientY })\n    }\n\n    if (touches.size === 2) {\n      const touchArray = Array.from(touches.values())\n      const p1 = touchArray[0]!\n      const p2 = touchArray[1]!\n      initialDistance = getDistance(p1, p2)\n      initialScale = currentScale\n      startTime = performance.now()\n      lastTime = startTime\n      active = true\n\n      // Cancel any spring animation\n      scaleSpring?.destroy()\n      scaleSpring = null\n\n      onPinchStart?.(createState(e, true, false))\n    }\n  }\n\n  const handleTouchMove = (e: TouchEvent) => {\n    if (!enabled || !active) return\n\n    for (const touch of Array.from(e.changedTouches)) {\n      if (touches.has(touch.identifier)) {\n        touches.set(touch.identifier, { x: touch.clientX, y: touch.clientY })\n      }\n    }\n\n    if (touches.size >= 2) {\n      const touchArray = Array.from(touches.values())\n      const p1 = touchArray[0]!\n      const p2 = touchArray[1]!\n      const currentDistance = getDistance(p1, p2)\n      const now = performance.now()\n      const dt = now - lastTime\n\n      // Calculate new scale\n      let newScale = initialScale * (currentDistance / initialDistance)\n\n      // Apply rubber band at limits\n      if (enableRubberBand) {\n        newScale = rubberBand(newScale, minScale, maxScale, rubberBandFactor)\n      } else {\n        newScale = clamp(newScale, minScale, maxScale)\n      }\n\n      // Calculate velocity\n      velocity = dt > 0 ? ((newScale - lastScale) / dt) * 1000 : 0\n      lastScale = currentScale\n      currentScale = newScale\n      lastTime = now\n\n      onPinch?.(createState(e, false, false))\n      e.preventDefault()\n    }\n  }\n\n  const handleTouchEnd = (e: TouchEvent) => {\n    for (const touch of Array.from(e.changedTouches)) {\n      touches.delete(touch.identifier)\n    }\n\n    if (active && touches.size < 2) {\n      active = false\n\n      // Spring back to limits if out of bounds\n      if (currentScale < minScale || currentScale > maxScale) {\n        const targetScale = clamp(currentScale, minScale, maxScale)\n        scaleSpring = createSpringValue(currentScale, {\n          stiffness: spring.stiffness,\n          damping: spring.damping,\n        })\n\n        scaleSpring.subscribe(() => {\n          currentScale = scaleSpring!.get()\n          onPinch?.(createState(e, false, false))\n        })\n\n        scaleSpring.set(targetScale)\n      }\n\n      onPinchEnd?.(createState(e, false, true))\n    }\n  }\n\n  element.addEventListener('touchstart', handleTouchStart, { passive: false })\n  element.addEventListener('touchmove', handleTouchMove, { passive: false })\n  element.addEventListener('touchend', handleTouchEnd)\n  element.addEventListener('touchcancel', handleTouchEnd)\n\n  return {\n    enable: () => { enabled = true },\n    disable: () => { enabled = false },\n    isEnabled: () => enabled,\n    destroy: () => {\n      element.removeEventListener('touchstart', handleTouchStart)\n      element.removeEventListener('touchmove', handleTouchMove)\n      element.removeEventListener('touchend', handleTouchEnd)\n      element.removeEventListener('touchcancel', handleTouchEnd)\n      scaleSpring?.destroy()\n    },\n  }\n}\n\n// ============ Rotate Gesture ============\n\n/**\n * Create rotate gesture handler\n *\n * @example\n * ```ts\n * const rotate = createRotateGesture(element, {\n *   onRotate: (state) => {\n *     element.style.transform = `rotate(${state.angle}deg)`\n *   },\n * })\n * ```\n */\nexport function createRotateGesture(\n  element: HTMLElement,\n  config: RotateConfig = {}\n): GestureController {\n  const {\n    enabled: initialEnabled = true,\n    threshold = 0,\n    onRotate,\n    onRotateStart,\n    onRotateEnd,\n  } = config\n\n  let enabled = initialEnabled\n  let active = false\n  let initialAngle = 0\n  let currentAngle = 0\n  let lastAngle = 0\n  let velocity = 0\n  let startTime = 0\n  let lastTime = 0\n  let angleOffset = 0\n\n  const touches = new Map<number, Point>()\n\n  const createState = (event: TouchEvent, first = false, last = false): RotateState => {\n    const touchArray = Array.from(touches.values())\n    const p1 = touchArray[0] ?? { x: 0, y: 0 }\n    const p2 = touchArray[1] ?? { x: 0, y: 0 }\n    const origin = touchArray.length >= 2 ? getCenter(p1, p2) : { x: 0, y: 0 }\n\n    return {\n      active,\n      first,\n      last,\n      event,\n      elapsedTime: performance.now() - startTime,\n      cancelled: false,\n      angle: currentAngle,\n      velocity,\n      initialAngle,\n      origin,\n      movement: currentAngle - initialAngle,\n      offset: angleOffset,\n    }\n  }\n\n  const handleTouchStart = (e: TouchEvent) => {\n    if (!enabled) return\n\n    for (const touch of Array.from(e.changedTouches)) {\n      touches.set(touch.identifier, { x: touch.clientX, y: touch.clientY })\n    }\n\n    if (touches.size === 2) {\n      const touchArray = Array.from(touches.values())\n      const p1 = touchArray[0]!\n      const p2 = touchArray[1]!\n      initialAngle = getAngle(p1, p2)\n      startTime = performance.now()\n      lastTime = startTime\n      lastAngle = currentAngle\n      active = true\n\n      onRotateStart?.(createState(e, true, false))\n    }\n  }\n\n  const handleTouchMove = (e: TouchEvent) => {\n    if (!enabled || !active) return\n\n    for (const touch of Array.from(e.changedTouches)) {\n      if (touches.has(touch.identifier)) {\n        touches.set(touch.identifier, { x: touch.clientX, y: touch.clientY })\n      }\n    }\n\n    if (touches.size >= 2) {\n      const touchArray = Array.from(touches.values())\n      const p1 = touchArray[0]!\n      const p2 = touchArray[1]!\n      const newAngle = getAngle(p1, p2)\n      const now = performance.now()\n      const dt = now - lastTime\n\n      // Calculate angle delta (handle wrap-around)\n      let angleDelta = newAngle - initialAngle\n      if (angleDelta > 180) angleDelta -= 360\n      if (angleDelta < -180) angleDelta += 360\n\n      // Apply threshold\n      if (Math.abs(angleDelta) >= threshold) {\n        currentAngle = angleOffset + angleDelta\n\n        // Calculate velocity\n        velocity = dt > 0 ? ((currentAngle - lastAngle) / dt) * 1000 : 0\n        lastAngle = currentAngle\n        lastTime = now\n\n        onRotate?.(createState(e, false, false))\n      }\n\n      e.preventDefault()\n    }\n  }\n\n  const handleTouchEnd = (e: TouchEvent) => {\n    for (const touch of Array.from(e.changedTouches)) {\n      touches.delete(touch.identifier)\n    }\n\n    if (active && touches.size < 2) {\n      active = false\n      angleOffset = currentAngle\n      onRotateEnd?.(createState(e, false, true))\n    }\n  }\n\n  element.addEventListener('touchstart', handleTouchStart, { passive: false })\n  element.addEventListener('touchmove', handleTouchMove, { passive: false })\n  element.addEventListener('touchend', handleTouchEnd)\n  element.addEventListener('touchcancel', handleTouchEnd)\n\n  return {\n    enable: () => { enabled = true },\n    disable: () => { enabled = false },\n    isEnabled: () => enabled,\n    destroy: () => {\n      element.removeEventListener('touchstart', handleTouchStart)\n      element.removeEventListener('touchmove', handleTouchMove)\n      element.removeEventListener('touchend', handleTouchEnd)\n      element.removeEventListener('touchcancel', handleTouchEnd)\n    },\n  }\n}\n\n// ============ Swipe Gesture ============\n\n/**\n * Create swipe gesture handler\n *\n * @example\n * ```ts\n * const swipe = createSwipeGesture(element, {\n *   onSwipe: (state) => {\n *     if (state.direction === 'left') {\n *       goToNextSlide()\n *     }\n *   },\n * })\n * ```\n */\nexport function createSwipeGesture(\n  element: HTMLElement,\n  config: SwipeConfig = {}\n): GestureController {\n  const {\n    velocityThreshold = 0.5,\n    distanceThreshold = 50,\n    maxDuration = 300,\n    axis = 'both',\n    onSwipe,\n    onSwipeStart,\n    onSwipeEnd,\n  } = config\n\n  let enabled = true\n  let active = false\n  let startPoint: Point = { x: 0, y: 0 }\n  let lastPoint: Point = { x: 0, y: 0 }\n  let startTime = 0\n  let lastTime = 0\n  let pointerId: number | null = null\n\n  const createState = (\n    event: PointerEvent,\n    first = false,\n    last = false,\n    direction: SwipeState['direction'] = null\n  ): SwipeState => {\n    const now = performance.now()\n    const duration = now - startTime\n    const dt = now - lastTime\n\n    const movement = {\n      x: event.clientX - startPoint.x,\n      y: event.clientY - startPoint.y,\n    }\n\n    const velocity = {\n      x: dt > 0 ? (event.clientX - lastPoint.x) / dt : 0,\n      y: dt > 0 ? (event.clientY - lastPoint.y) / dt : 0,\n    }\n\n    return {\n      active,\n      first,\n      last,\n      event,\n      elapsedTime: duration,\n      cancelled: false,\n      direction,\n      velocity,\n      distance: movement,\n      movement,\n      duration,\n    }\n  }\n\n  const detectDirection = (movement: Point, velocity: Point): SwipeState['direction'] => {\n    const absX = Math.abs(movement.x)\n    const absY = Math.abs(movement.y)\n    const velX = Math.abs(velocity.x)\n    const velY = Math.abs(velocity.y)\n\n    // Check if meets thresholds\n    const meetsDistanceX = absX >= distanceThreshold\n    const meetsDistanceY = absY >= distanceThreshold\n    const meetsVelocityX = velX >= velocityThreshold\n    const meetsVelocityY = velY >= velocityThreshold\n\n    // Determine primary direction based on axis constraint\n    if (axis === 'x' || (axis === 'both' && absX > absY)) {\n      if ((meetsDistanceX || meetsVelocityX)) {\n        return movement.x > 0 ? 'right' : 'left'\n      }\n    }\n\n    if (axis === 'y' || (axis === 'both' && absY > absX)) {\n      if ((meetsDistanceY || meetsVelocityY)) {\n        return movement.y > 0 ? 'down' : 'up'\n      }\n    }\n\n    return null\n  }\n\n  const handlePointerDown = (e: PointerEvent) => {\n    if (!enabled || pointerId !== null) return\n\n    pointerId = e.pointerId\n    startPoint = { x: e.clientX, y: e.clientY }\n    lastPoint = { ...startPoint }\n    startTime = performance.now()\n    lastTime = startTime\n    active = true\n\n    element.setPointerCapture(e.pointerId)\n    onSwipeStart?.(createState(e, true, false))\n  }\n\n  const handlePointerMove = (e: PointerEvent) => {\n    if (!enabled || !active || e.pointerId !== pointerId) return\n\n    const now = performance.now()\n    lastPoint = { x: e.clientX, y: e.clientY }\n    lastTime = now\n  }\n\n  const handlePointerUp = (e: PointerEvent) => {\n    if (!active || e.pointerId !== pointerId) return\n\n    active = false\n    pointerId = null\n\n    const duration = performance.now() - startTime\n\n    // Only detect swipe if within max duration\n    if (duration <= maxDuration) {\n      const movement = {\n        x: e.clientX - startPoint.x,\n        y: e.clientY - startPoint.y,\n      }\n      const dt = performance.now() - lastTime\n      const velocity = {\n        x: dt > 0 ? (e.clientX - lastPoint.x) / dt : 0,\n        y: dt > 0 ? (e.clientY - lastPoint.y) / dt : 0,\n      }\n\n      const direction = detectDirection(movement, velocity)\n      const state = createState(e, false, true, direction)\n\n      if (direction) {\n        onSwipe?.(state)\n      }\n      onSwipeEnd?.(state)\n    } else {\n      onSwipeEnd?.(createState(e, false, true, null))\n    }\n\n    element.releasePointerCapture(e.pointerId)\n  }\n\n  element.addEventListener('pointerdown', handlePointerDown)\n  element.addEventListener('pointermove', handlePointerMove)\n  element.addEventListener('pointerup', handlePointerUp)\n  element.addEventListener('pointercancel', handlePointerUp)\n\n  return {\n    enable: () => { enabled = true },\n    disable: () => { enabled = false },\n    isEnabled: () => enabled,\n    destroy: () => {\n      element.removeEventListener('pointerdown', handlePointerDown)\n      element.removeEventListener('pointermove', handlePointerMove)\n      element.removeEventListener('pointerup', handlePointerUp)\n      element.removeEventListener('pointercancel', handlePointerUp)\n    },\n  }\n}\n\n// ============ Long Press Gesture ============\n\n/**\n * Create long press gesture handler\n *\n * @example\n * ```ts\n * const longPress = createLongPressGesture(element, {\n *   threshold: 500,\n *   onLongPress: (state) => {\n *     showContextMenu(state.position)\n *   },\n * })\n * ```\n */\nexport function createLongPressGesture(\n  element: HTMLElement,\n  config: LongPressConfig = {}\n): GestureController {\n  const {\n    threshold = 500,\n    movementTolerance = 10,\n    onLongPress,\n    onPressStart,\n    onPressEnd,\n  } = config\n\n  let enabled = true\n  let active = false\n  let triggered = false\n  let startPoint: Point = { x: 0, y: 0 }\n  let startTime = 0\n  let timerId: ReturnType<typeof setTimeout> | null = null\n  let pointerId: number | null = null\n\n  const createState = (event: PointerEvent, first = false, last = false): LongPressState => ({\n    active,\n    first,\n    last,\n    event,\n    elapsedTime: performance.now() - startTime,\n    cancelled: false,\n    position: startPoint,\n    duration: performance.now() - startTime,\n    triggered,\n  })\n\n  const handlePointerDown = (e: PointerEvent) => {\n    if (!enabled || pointerId !== null) return\n\n    pointerId = e.pointerId\n    startPoint = { x: e.clientX, y: e.clientY }\n    startTime = performance.now()\n    active = true\n    triggered = false\n\n    element.setPointerCapture(e.pointerId)\n    onPressStart?.(createState(e, true, false))\n\n    // Start timer for long press\n    timerId = setTimeout(() => {\n      if (active && !triggered) {\n        triggered = true\n        onLongPress?.(createState(e, false, false))\n      }\n    }, threshold)\n  }\n\n  const handlePointerMove = (e: PointerEvent) => {\n    if (!active || e.pointerId !== pointerId) return\n\n    // Check if moved beyond tolerance\n    const dx = e.clientX - startPoint.x\n    const dy = e.clientY - startPoint.y\n    const distance = Math.sqrt(dx * dx + dy * dy)\n\n    if (distance > movementTolerance) {\n      // Cancel long press\n      if (timerId) {\n        clearTimeout(timerId)\n        timerId = null\n      }\n    }\n  }\n\n  const handlePointerUp = (e: PointerEvent) => {\n    if (!active || e.pointerId !== pointerId) return\n\n    active = false\n    pointerId = null\n\n    if (timerId) {\n      clearTimeout(timerId)\n      timerId = null\n    }\n\n    onPressEnd?.(createState(e, false, true))\n    element.releasePointerCapture(e.pointerId)\n  }\n\n  element.addEventListener('pointerdown', handlePointerDown)\n  element.addEventListener('pointermove', handlePointerMove)\n  element.addEventListener('pointerup', handlePointerUp)\n  element.addEventListener('pointercancel', handlePointerUp)\n\n  return {\n    enable: () => { enabled = true },\n    disable: () => { enabled = false },\n    isEnabled: () => enabled,\n    destroy: () => {\n      if (timerId) clearTimeout(timerId)\n      element.removeEventListener('pointerdown', handlePointerDown)\n      element.removeEventListener('pointermove', handlePointerMove)\n      element.removeEventListener('pointerup', handlePointerUp)\n      element.removeEventListener('pointercancel', handlePointerUp)\n    },\n  }\n}\n\n// ============ Combined Gesture Handler ============\n\n/**\n * Create combined gesture handler for multiple gesture types\n *\n * @example\n * ```ts\n * const gestures = createGestures(element, {\n *   pinch: {\n *     onPinch: (state) => console.log('Scale:', state.scale),\n *   },\n *   rotate: {\n *     onRotate: (state) => console.log('Angle:', state.angle),\n *   },\n *   swipe: {\n *     onSwipe: (state) => console.log('Direction:', state.direction),\n *   },\n * })\n * ```\n */\nexport function createGestures(\n  element: HTMLElement,\n  config: GestureConfig\n): GestureController {\n  const controllers: GestureController[] = []\n\n  if (config.pinch) {\n    controllers.push(createPinchGesture(element, config.pinch))\n  }\n  if (config.rotate) {\n    controllers.push(createRotateGesture(element, config.rotate))\n  }\n  if (config.swipe) {\n    controllers.push(createSwipeGesture(element, config.swipe))\n  }\n  if (config.longPress) {\n    controllers.push(createLongPressGesture(element, config.longPress))\n  }\n\n  return {\n    enable: () => controllers.forEach(c => c.enable()),\n    disable: () => controllers.forEach(c => c.disable()),\n    isEnabled: () => controllers.every(c => c.isEnabled()),\n    destroy: () => controllers.forEach(c => c.destroy()),\n  }\n}\n","import type { SpringValue } from '../core/spring-value.js'\n\n/**\n * RGB color representation\n */\nexport interface RGB {\n  r: number\n  g: number\n  b: number\n}\n\n/**\n * HSL color representation\n */\nexport interface HSL {\n  h: number\n  s: number\n  l: number\n}\n\n/**\n * Parse a color string to RGB\n * Supports hex (#rgb, #rrggbb), rgb(), and named colors\n * @param color - The color string to parse\n * @returns The RGB representation\n */\nexport function parseColor(color: string): RGB {\n  // Try hex format first\n  const hexMatch = color.match(/^#([0-9a-f]{3}|[0-9a-f]{6})$/i)\n  if (hexMatch) {\n    return hexToRgb(color)\n  }\n\n  // Try rgb() format\n  const rgbMatch = color.match(/rgb\\((\\d+),\\s*(\\d+),\\s*(\\d+)\\)/i)\n  if (rgbMatch) {\n    return {\n      r: parseInt(rgbMatch[1]!, 10),\n      g: parseInt(rgbMatch[2]!, 10),\n      b: parseInt(rgbMatch[3]!, 10),\n    }\n  }\n\n  // Try rgba() format\n  const rgbaMatch = color.match(/rgba\\((\\d+),\\s*(\\d+),\\s*(\\d+),\\s*[\\d.]+\\)/i)\n  if (rgbaMatch) {\n    return {\n      r: parseInt(rgbaMatch[1]!, 10),\n      g: parseInt(rgbaMatch[2]!, 10),\n      b: parseInt(rgbaMatch[3]!, 10),\n    }\n  }\n\n  // Try hsl() format\n  const hslMatch = color.match(/hsl\\((\\d+),\\s*(\\d+)%,\\s*(\\d+)%\\)/i)\n  if (hslMatch) {\n    return hslToRgb(\n      parseInt(hslMatch[1]!, 10),\n      parseInt(hslMatch[2]!, 10),\n      parseInt(hslMatch[3]!, 10)\n    )\n  }\n\n  // Default to black for unknown formats\n  return { r: 0, g: 0, b: 0 }\n}\n\n/**\n * Convert RGB to hex color string\n * @param r - Red component (0-255)\n * @param g - Green component (0-255)\n * @param b - Blue component (0-255)\n * @returns Hex color string\n */\nexport function rgbToHex(r: number, g: number, b: number): string {\n  const toHex = (n: number): string => {\n    const clamped = Math.round(Math.max(0, Math.min(255, n)))\n    return clamped.toString(16).padStart(2, '0')\n  }\n  return `#${toHex(r)}${toHex(g)}${toHex(b)}`\n}\n\n/**\n * Convert hex color string to RGB\n * @param hex - Hex color string (with or without #)\n * @returns RGB representation\n */\nexport function hexToRgb(hex: string): RGB {\n  const cleanHex = hex.replace('#', '')\n\n  if (cleanHex.length === 3) {\n    return {\n      r: parseInt(cleanHex.charAt(0) + cleanHex.charAt(0), 16),\n      g: parseInt(cleanHex.charAt(1) + cleanHex.charAt(1), 16),\n      b: parseInt(cleanHex.charAt(2) + cleanHex.charAt(2), 16),\n    }\n  }\n\n  return {\n    r: parseInt(cleanHex.slice(0, 2), 16),\n    g: parseInt(cleanHex.slice(2, 4), 16),\n    b: parseInt(cleanHex.slice(4, 6), 16),\n  }\n}\n\n/**\n * Convert HSL to RGB\n * @param h - Hue (0-360)\n * @param s - Saturation (0-100)\n * @param l - Lightness (0-100)\n * @returns RGB representation\n */\nexport function hslToRgb(h: number, s: number, l: number): RGB {\n  h = ((h % 360) + 360) % 360\n  s = Math.max(0, Math.min(100, s)) / 100\n  l = Math.max(0, Math.min(100, l)) / 100\n\n  if (s === 0) {\n    const gray = Math.round(l * 255)\n    return { r: gray, g: gray, b: gray }\n  }\n\n  const hue2rgb = (p: number, q: number, t: number): number => {\n    if (t < 0) t += 1\n    if (t > 1) t -= 1\n    if (t < 1 / 6) return p + (q - p) * 6 * t\n    if (t < 1 / 2) return q\n    if (t < 2 / 3) return p + (q - p) * (2 / 3 - t) * 6\n    return p\n  }\n\n  const q = l < 0.5 ? l * (1 + s) : l + s - l * s\n  const p = 2 * l - q\n\n  return {\n    r: Math.round(hue2rgb(p, q, h / 360 + 1 / 3) * 255),\n    g: Math.round(hue2rgb(p, q, h / 360) * 255),\n    b: Math.round(hue2rgb(p, q, h / 360 - 1 / 3) * 255),\n  }\n}\n\n/**\n * Convert RGB to HSL\n * @param r - Red component (0-255)\n * @param g - Green component (0-255)\n * @param b - Blue component (0-255)\n * @returns HSL representation\n */\nexport function rgbToHsl(r: number, g: number, b: number): HSL {\n  r = Math.max(0, Math.min(255, r)) / 255\n  g = Math.max(0, Math.min(255, g)) / 255\n  b = Math.max(0, Math.min(255, b)) / 255\n\n  const max = Math.max(r, g, b)\n  const min = Math.min(r, g, b)\n  const delta = max - min\n\n  let h = 0\n  let s = 0\n\n  if (delta !== 0) {\n    s = (max + min) / 2 > 0.5\n      ? delta / (2 - max - min)\n      : delta / (max + min)\n\n    if (max === r) {\n      h = ((g - b) / delta + (g < b ? 6 : 0)) / 6\n    } else if (max === g) {\n      h = ((b - r) / delta + 2) / 6\n    } else {\n      h = ((r - g) / delta + 4) / 6\n    }\n  }\n\n  return {\n    h: Math.round(h * 360),\n    s: Math.round(s * 100),\n    l: Math.round(((max + min) / 2) * 100),\n  }\n}\n","/**\n * Scroll-linked animations - Bind animations directly to scroll position\n *\n * Unlike spring-based scroll animations, these animations are directly\n * tied to scroll progress (0-1) for precise control.\n */\n\nimport { clamp, lerp } from '../utils/math.js'\nimport { parseColor, rgbToHex } from '../utils/color.js'\n\n/**\n * Simple color lerp for scroll-linked animations\n */\nfunction lerpColor(colorA: string, colorB: string, t: number): string {\n  const a = parseColor(colorA)\n  const b = parseColor(colorB)\n  return rgbToHex(\n    Math.round(lerp(a.r, b.r, t)),\n    Math.round(lerp(a.g, b.g, t)),\n    Math.round(lerp(a.b, b.b, t))\n  )\n}\n\n/**\n * Scroll progress info passed to callbacks\n */\nexport interface ScrollInfo {\n  /** Progress from 0 to 1 */\n  progress: number\n  /** Absolute scroll position in pixels */\n  scrollY: number\n  /** Scroll velocity in pixels per second */\n  velocity: number\n  /** Scroll direction: 1 = down, -1 = up, 0 = stationary */\n  direction: -1 | 0 | 1\n  /** Whether element is in viewport */\n  isInView: boolean\n  /** How much of the element is visible (0-1) */\n  visibleRatio: number\n}\n\n/**\n * Scroll trigger configuration\n */\nexport interface ScrollTriggerConfig {\n  /** Start trigger position: 'top', 'center', 'bottom', or pixel value */\n  start?: 'top' | 'center' | 'bottom' | number\n  /** End trigger position: 'top', 'center', 'bottom', or pixel value */\n  end?: 'top' | 'center' | 'bottom' | number\n  /** Offset from start position in pixels */\n  startOffset?: number\n  /** Offset from end position in pixels */\n  endOffset?: number\n  /** Callback when entering viewport */\n  onEnter?: (info: ScrollInfo) => void\n  /** Callback when leaving viewport */\n  onLeave?: (info: ScrollInfo) => void\n  /** Callback on progress update */\n  onProgress?: (info: ScrollInfo) => void\n  /** Only trigger once */\n  once?: boolean\n  /** Scrub animation to scroll (true = instant, number = smoothing factor) */\n  scrub?: boolean | number\n}\n\n/**\n * Parallax configuration\n */\nexport interface ParallaxConfig {\n  /** Speed multiplier (negative = opposite direction) */\n  speed?: number\n  /** Direction of parallax effect */\n  direction?: 'vertical' | 'horizontal'\n  /** Easing function */\n  easing?: (t: number) => number\n  /** Root margin for intersection observer */\n  rootMargin?: string\n}\n\n/**\n * Scroll-linked value configuration\n */\nexport interface ScrollLinkedConfig {\n  /** Input range (scroll positions or progress values) */\n  inputRange: number[]\n  /** Output range (values to interpolate between) */\n  outputRange: (number | string)[]\n  /** Clamp output to range */\n  clamp?: boolean\n  /** Use smooth interpolation */\n  smooth?: number\n  /** Easing function */\n  easing?: (t: number) => number\n}\n\n/**\n * Scroll progress tracker\n */\nexport interface ScrollProgress {\n  /** Get current progress (0-1) */\n  get(): number\n  /** Get current scroll info */\n  getInfo(): ScrollInfo\n  /** Subscribe to progress changes */\n  subscribe(callback: (info: ScrollInfo) => void): () => void\n  /** Destroy and cleanup */\n  destroy(): void\n}\n\n/**\n * Parallax controller\n */\nexport interface Parallax {\n  /** Get current offset */\n  getOffset(): number\n  /** Update parallax (call on scroll) */\n  update(): void\n  /** Destroy and cleanup */\n  destroy(): void\n}\n\n/**\n * Scroll trigger controller\n */\nexport interface ScrollTrigger {\n  /** Check if currently active */\n  isActive(): boolean\n  /** Get current progress within trigger range */\n  getProgress(): number\n  /** Refresh trigger calculations */\n  refresh(): void\n  /** Destroy and cleanup */\n  destroy(): void\n}\n\n/**\n * Scroll-linked value controller\n */\nexport interface ScrollLinkedValue {\n  /** Get current interpolated value */\n  get(): number | string\n  /** Subscribe to value changes */\n  subscribe(callback: (value: number | string) => void): () => void\n  /** Destroy and cleanup */\n  destroy(): void\n}\n\n// ============ Implementation ============\n\n/**\n * Create scroll progress tracker for an element\n */\nexport function createScrollProgress(\n  element?: HTMLElement | null,\n  options: {\n    offset?: ['start' | 'center' | 'end', 'start' | 'center' | 'end']\n    smooth?: number\n  } = {}\n): ScrollProgress {\n  const { offset = ['start', 'end'], smooth = 0 } = options\n\n  let progress = 0\n  let smoothedProgress = 0\n  let lastScrollY = 0\n  let lastTime = performance.now()\n  let velocity = 0\n  let direction: -1 | 0 | 1 = 0\n  let rafId: number | null = null\n  const subscribers = new Set<(info: ScrollInfo) => void>()\n\n  const calculateProgress = (): ScrollInfo => {\n    const scrollY = window.scrollY\n    const windowHeight = window.innerHeight\n    const now = performance.now()\n    const dt = Math.max(now - lastTime, 1)\n\n    // Calculate velocity and direction\n    velocity = ((scrollY - lastScrollY) / dt) * 1000\n    direction = scrollY > lastScrollY ? 1 : scrollY < lastScrollY ? -1 : 0\n    lastScrollY = scrollY\n    lastTime = now\n\n    let newProgress: number\n    let isInView = true\n    let visibleRatio = 1\n\n    if (element) {\n      const rect = element.getBoundingClientRect()\n      const elementTop = rect.top + scrollY\n      const elementHeight = rect.height\n\n      // Calculate start and end points based on offset\n      const startPoint = offset[0] === 'start' ? elementTop :\n                        offset[0] === 'center' ? elementTop + elementHeight / 2 :\n                        elementTop + elementHeight\n\n      const endPoint = offset[1] === 'start' ? windowHeight :\n                      offset[1] === 'center' ? windowHeight / 2 :\n                      0\n\n      const scrollStart = startPoint - windowHeight\n      const scrollEnd = startPoint - endPoint\n\n      newProgress = clamp((scrollY - scrollStart) / (scrollEnd - scrollStart), 0, 1)\n\n      // Check if in view\n      isInView = rect.top < windowHeight && rect.bottom > 0\n      visibleRatio = isInView ?\n        clamp((Math.min(rect.bottom, windowHeight) - Math.max(rect.top, 0)) / rect.height, 0, 1) : 0\n    } else {\n      // Track overall page scroll\n      const documentHeight = document.documentElement.scrollHeight - windowHeight\n      newProgress = documentHeight > 0 ? clamp(scrollY / documentHeight, 0, 1) : 0\n    }\n\n    // Apply smoothing\n    if (smooth > 0) {\n      smoothedProgress = lerp(smoothedProgress, newProgress, 1 - smooth)\n      progress = smoothedProgress\n    } else {\n      progress = newProgress\n    }\n\n    return {\n      progress,\n      scrollY,\n      velocity,\n      direction,\n      isInView,\n      visibleRatio,\n    }\n  }\n\n  const notify = (info: ScrollInfo) => {\n    subscribers.forEach(cb => cb(info))\n  }\n\n  const onScroll = () => {\n    if (rafId) return\n    rafId = requestAnimationFrame(() => {\n      rafId = null\n      const info = calculateProgress()\n      notify(info)\n    })\n  }\n\n  // Initial calculation\n  const initialInfo = calculateProgress()\n\n  window.addEventListener('scroll', onScroll, { passive: true })\n  window.addEventListener('resize', onScroll, { passive: true })\n\n  return {\n    get: () => progress,\n    getInfo: () => calculateProgress(),\n    subscribe: (callback) => {\n      subscribers.add(callback)\n      callback(initialInfo)\n      return () => subscribers.delete(callback)\n    },\n    destroy: () => {\n      if (rafId) cancelAnimationFrame(rafId)\n      window.removeEventListener('scroll', onScroll)\n      window.removeEventListener('resize', onScroll)\n      subscribers.clear()\n    },\n  }\n}\n\n/**\n * Create parallax effect for an element\n *\n * @example\n * ```ts\n * const parallax = createParallax(element, { speed: 0.5 })\n * // Element moves at 50% scroll speed\n * ```\n */\nexport function createParallax(\n  element: HTMLElement,\n  config: ParallaxConfig = {}\n): Parallax {\n  const {\n    speed = 0.5,\n    direction = 'vertical',\n    easing = (t: number) => t,\n    rootMargin = '0px',\n  } = config\n\n  let offset = 0\n  let isInView = false\n  let observer: IntersectionObserver | null = null\n\n  const update = () => {\n    if (!isInView) return\n\n    const rect = element.getBoundingClientRect()\n    const windowHeight = window.innerHeight\n\n    // Calculate how far through the viewport the element is\n    const elementCenter = rect.top + rect.height / 2\n    const viewportCenter = windowHeight / 2\n    const distanceFromCenter = elementCenter - viewportCenter\n\n    // Apply speed and easing\n    const normalizedDistance = distanceFromCenter / windowHeight\n    const easedDistance = easing(Math.abs(normalizedDistance)) * Math.sign(normalizedDistance)\n    offset = easedDistance * speed * 100\n\n    // Apply transform\n    if (direction === 'vertical') {\n      element.style.transform = `translate3d(0, ${offset}px, 0)`\n    } else {\n      element.style.transform = `translate3d(${offset}px, 0, 0)`\n    }\n  }\n\n  // Use IntersectionObserver for performance\n  observer = new IntersectionObserver(\n    (entries) => {\n      const entry = entries[0]\n      if (entry) {\n        isInView = entry.isIntersecting\n        if (isInView) update()\n      }\n    },\n    { rootMargin }\n  )\n  observer.observe(element)\n\n  const onScroll = () => {\n    if (isInView) {\n      requestAnimationFrame(update)\n    }\n  }\n\n  window.addEventListener('scroll', onScroll, { passive: true })\n\n  return {\n    getOffset: () => offset,\n    update,\n    destroy: () => {\n      observer?.disconnect()\n      window.removeEventListener('scroll', onScroll)\n      element.style.transform = ''\n    },\n  }\n}\n\n/**\n * Create scroll trigger for precise scroll-based animations\n *\n * @example\n * ```ts\n * const trigger = createScrollTrigger(element, {\n *   start: 'top',\n *   end: 'bottom',\n *   onProgress: (info) => {\n *     element.style.opacity = String(info.progress)\n *   },\n * })\n * ```\n */\nexport function createScrollTrigger(\n  element: HTMLElement,\n  config: ScrollTriggerConfig = {}\n): ScrollTrigger {\n  const {\n    start = 'top',\n    end = 'bottom',\n    startOffset = 0,\n    endOffset = 0,\n    onEnter,\n    onLeave,\n    onProgress,\n    once = false,\n    scrub = false,\n  } = config\n\n  let isActive = false\n  let progress = 0\n  let hasEntered = false\n  let smoothedProgress = 0\n  let rafId: number | null = null\n\n  const getPosition = (pos: 'top' | 'center' | 'bottom' | number, rect: DOMRect): number => {\n    if (typeof pos === 'number') return pos\n    switch (pos) {\n      case 'top': return rect.top\n      case 'center': return rect.top + rect.height / 2\n      case 'bottom': return rect.bottom\n    }\n  }\n\n  const calculateProgress = (): ScrollInfo => {\n    const rect = element.getBoundingClientRect()\n    const windowHeight = window.innerHeight\n\n    const startPos = getPosition(start, rect) + startOffset\n    const endPos = getPosition(end, rect) + endOffset\n\n    // Calculate progress based on viewport position\n    const triggerStart = windowHeight\n    const triggerEnd = 0\n\n    const startProgress = (triggerStart - startPos) / (triggerStart - triggerEnd)\n    const endProgress = (triggerStart - endPos) / (triggerStart - triggerEnd)\n\n    const rawProgress = clamp(startProgress / (endProgress || 1), 0, 1)\n\n    // Apply scrub smoothing\n    if (typeof scrub === 'number' && scrub > 0) {\n      smoothedProgress = lerp(smoothedProgress, rawProgress, 1 - scrub)\n      progress = smoothedProgress\n    } else {\n      progress = rawProgress\n    }\n\n    const isInView = rect.top < windowHeight && rect.bottom > 0\n    const nowActive = progress > 0 && progress < 1\n\n    return {\n      progress,\n      scrollY: window.scrollY,\n      velocity: 0,\n      direction: 0,\n      isInView,\n      visibleRatio: isInView ? clamp((Math.min(rect.bottom, windowHeight) - Math.max(rect.top, 0)) / rect.height, 0, 1) : 0,\n    }\n  }\n\n  const onScroll = () => {\n    if (rafId) return\n    rafId = requestAnimationFrame(() => {\n      rafId = null\n      const info = calculateProgress()\n\n      // Check for enter/leave\n      const wasActive = isActive\n      isActive = info.progress > 0 && info.progress < 1\n\n      if (!wasActive && isActive && (!once || !hasEntered)) {\n        hasEntered = true\n        onEnter?.(info)\n      }\n\n      if (wasActive && !isActive) {\n        onLeave?.(info)\n      }\n\n      if (isActive || scrub) {\n        onProgress?.(info)\n      }\n    })\n  }\n\n  window.addEventListener('scroll', onScroll, { passive: true })\n  window.addEventListener('resize', onScroll, { passive: true })\n\n  // Initial check\n  onScroll()\n\n  return {\n    isActive: () => isActive,\n    getProgress: () => progress,\n    refresh: () => {\n      calculateProgress()\n    },\n    destroy: () => {\n      if (rafId) cancelAnimationFrame(rafId)\n      window.removeEventListener('scroll', onScroll)\n      window.removeEventListener('resize', onScroll)\n    },\n  }\n}\n\n/**\n * Create a scroll-linked interpolated value\n *\n * @example\n * ```ts\n * const opacity = createScrollLinkedValue(scrollProgress, {\n *   inputRange: [0, 0.5, 1],\n *   outputRange: [0, 1, 0],\n * })\n *\n * opacity.subscribe((value) => {\n *   element.style.opacity = String(value)\n * })\n * ```\n */\nexport function createScrollLinkedValue(\n  scrollProgress: ScrollProgress,\n  config: ScrollLinkedConfig\n): ScrollLinkedValue {\n  const { inputRange, outputRange, clamp: shouldClamp = true, easing } = config\n\n  if (inputRange.length !== outputRange.length) {\n    throw new Error('inputRange and outputRange must have the same length')\n  }\n\n  const firstOutput = outputRange[0]\n  const isColorOutput = typeof firstOutput === 'string' &&\n    (firstOutput.startsWith('#') || firstOutput.startsWith('rgb') || firstOutput.startsWith('hsl'))\n\n  let currentValue: number | string = firstOutput ?? 0\n  const subscribers = new Set<(value: number | string) => void>()\n\n  const interpolate = (progress: number): number | string => {\n    let p = progress\n    if (easing) p = easing(p)\n    const firstInput = inputRange[0] ?? 0\n    const lastInput = inputRange[inputRange.length - 1] ?? 1\n    if (shouldClamp) p = clamp(p, firstInput, lastInput)\n\n    // Find the segment\n    let segmentIndex = 0\n    for (let i = 0; i < inputRange.length - 1; i++) {\n      const curr = inputRange[i] ?? 0\n      const next = inputRange[i + 1] ?? 1\n      if (p >= curr && p <= next) {\n        segmentIndex = i\n        break\n      }\n      if (p > next) {\n        segmentIndex = i + 1\n      }\n    }\n\n    const segmentStart = inputRange[segmentIndex] ?? 0\n    const segmentEnd = inputRange[segmentIndex + 1] ?? segmentStart\n    const segmentProgress = segmentEnd !== segmentStart\n      ? (p - segmentStart) / (segmentEnd - segmentStart)\n      : 0\n\n    const startValue = outputRange[segmentIndex] ?? 0\n    const endValue = outputRange[segmentIndex + 1] ?? startValue\n\n    if (isColorOutput && typeof startValue === 'string' && typeof endValue === 'string') {\n      return lerpColor(startValue, endValue, segmentProgress)\n    }\n\n    return lerp(startValue as number, endValue as number, segmentProgress)\n  }\n\n  const unsubscribe = scrollProgress.subscribe((info) => {\n    currentValue = interpolate(info.progress)\n    subscribers.forEach(cb => cb(currentValue))\n  })\n\n  return {\n    get: () => currentValue,\n    subscribe: (callback) => {\n      subscribers.add(callback)\n      callback(currentValue)\n      return () => subscribers.delete(callback)\n    },\n    destroy: () => {\n      unsubscribe()\n      subscribers.clear()\n    },\n  }\n}\n\n/**\n * Easing functions for scroll-linked animations\n */\nexport const scrollEasings = {\n  linear: (t: number) => t,\n  easeIn: (t: number) => t * t,\n  easeOut: (t: number) => t * (2 - t),\n  easeInOut: (t: number) => t < 0.5 ? 2 * t * t : -1 + (4 - 2 * t) * t,\n  easeInCubic: (t: number) => t * t * t,\n  easeOutCubic: (t: number) => (--t) * t * t + 1,\n  easeInOutCubic: (t: number) => t < 0.5 ? 4 * t * t * t : (t - 1) * (2 * t - 2) * (2 * t - 2) + 1,\n  easeInQuart: (t: number) => t * t * t * t,\n  easeOutQuart: (t: number) => 1 - (--t) * t * t * t,\n  easeInOutQuart: (t: number) => t < 0.5 ? 8 * t * t * t * t : 1 - 8 * (--t) * t * t * t,\n}\n","/**\n * Timeline API - GSAP-inspired animation sequencing with spring physics\n *\n * Create complex, coordinated animations with precise control over\n * timing, sequencing, and playback.\n */\n\nimport { createSpringValue, type SpringValue } from '../core/spring-value.js'\nimport { createSpringGroup, type SpringGroup } from '../core/spring-group.js'\nimport type { SpringConfig } from '../core/config.js'\nimport { clamp } from '../utils/math.js'\n\n// ============ Types ============\n\n/**\n * Animation target - can be element, selector, or values object\n */\nexport type TimelineTarget = HTMLElement | string | Record<string, number>\n\n/**\n * Animation values (numeric properties to animate)\n */\nexport interface TimelineValues {\n  [key: string]: number | undefined\n}\n\n/**\n * Timeline animation options\n */\nexport interface TimelineOptions {\n  /** Animation duration override (not used with springs, but for timing) */\n  duration?: number\n  /** Delay before animation starts */\n  delay?: number\n  /** Spring configuration */\n  spring?: SpringConfig\n  /** Easing function (for non-spring animations) */\n  ease?: (t: number) => number\n  /** Callback when animation starts */\n  onStart?: () => void\n  /** Callback on each update */\n  onUpdate?: (progress: number) => void\n  /** Callback when animation completes */\n  onComplete?: () => void\n}\n\n/**\n * Animation properties - combines values with options\n */\nexport type TimelineProps = TimelineValues & TimelineOptions\n\n/**\n * Position in timeline - can be absolute, relative, or label\n */\nexport type TimelinePosition = number | string | `+=${number}` | `-=${number}` | `<` | `>`\n\n/**\n * Timeline segment representing a single animation\n */\ninterface TimelineSegment {\n  id: string\n  target: TimelineTarget\n  props: TimelineProps\n  startTime: number\n  endTime: number\n  spring: SpringGroup<Record<string, number>> | null\n  isActive: boolean\n  isComplete: boolean\n}\n\n/**\n * Timeline configuration\n */\nexport interface TimelineConfig {\n  /** Default spring configuration for all animations */\n  defaults?: SpringConfig\n  /** Whether to autoplay on creation */\n  autoplay?: boolean\n  /** Repeat count (-1 = infinite) */\n  repeat?: number\n  /** Yoyo (reverse on repeat) */\n  yoyo?: boolean\n  /** Delay between repeats */\n  repeatDelay?: number\n  /** Callback when timeline starts */\n  onStart?: () => void\n  /** Callback on each frame */\n  onUpdate?: (progress: number) => void\n  /** Callback when timeline completes */\n  onComplete?: () => void\n  /** Callback on repeat */\n  onRepeat?: (iteration: number) => void\n}\n\n/**\n * Timeline controller interface\n */\nexport interface Timeline {\n  /** Add animation to end of timeline */\n  to(target: TimelineTarget, props: TimelineProps, position?: TimelinePosition): Timeline\n  /** Add animation from initial values */\n  from(target: TimelineTarget, props: TimelineProps, position?: TimelinePosition): Timeline\n  /** Add animation from/to values */\n  fromTo(target: TimelineTarget, fromProps: TimelineProps, toProps: TimelineProps, position?: TimelinePosition): Timeline\n  /** Add a label at current position */\n  addLabel(label: string, position?: TimelinePosition): Timeline\n  /** Add a callback at position */\n  call(callback: () => void, position?: TimelinePosition): Timeline\n  /** Set properties instantly (no animation) */\n  set(target: TimelineTarget, props: TimelineProps, position?: TimelinePosition): Timeline\n  /** Add pause at position */\n  addPause(position?: TimelinePosition, callback?: () => void): Timeline\n\n  /** Play timeline */\n  play(): Timeline\n  /** Pause timeline */\n  pause(): Timeline\n  /** Resume from pause */\n  resume(): Timeline\n  /** Reverse timeline */\n  reverse(): Timeline\n  /** Restart timeline */\n  restart(): Timeline\n  /** Seek to position */\n  seek(position: number | string): Timeline\n  /** Kill timeline and cleanup */\n  kill(): void\n\n  /** Get current time */\n  time(): number\n  /** Get total duration */\n  duration(): number\n  /** Get current progress (0-1) */\n  progress(): number\n  /** Check if playing */\n  isPlaying(): boolean\n  /** Check if reversed */\n  isReversed(): boolean\n\n  /** Get timeline by ID */\n  getById(id: string): TimelineSegment | undefined\n}\n\n// ============ Implementation ============\n\nlet timelineIdCounter = 0\n\n/**\n * Create a new timeline\n *\n * @example\n * ```ts\n * const tl = createTimeline()\n *   .to(element, { x: 100, opacity: 1 })\n *   .to(element, { y: 50 }, '+=0.2')\n *   .to(element, { scale: 1.2 }, '<')\n *\n * tl.play()\n * ```\n */\nexport function createTimeline(config: TimelineConfig = {}): Timeline {\n  const {\n    defaults = {},\n    autoplay = false,\n    repeat = 0,\n    yoyo = false,\n    repeatDelay = 0,\n    onStart,\n    onUpdate,\n    onComplete,\n    onRepeat,\n  } = config\n\n  const segments: TimelineSegment[] = []\n  const labels = new Map<string, number>()\n  const callbacks = new Map<number, (() => void)[]>()\n  const pauses = new Map<number, (() => void) | undefined>()\n\n  let currentTime = 0\n  let totalDuration = 0\n  let isPlaying = false\n  let isReversed = false\n  let isPaused = false\n  let repeatCount = 0\n  let rafId: number | null = null\n  let lastFrameTime = 0\n  let hasStarted = false\n  let insertTime = 0\n\n  // ============ Utility Functions ============\n\n  const parsePosition = (position?: TimelinePosition): number => {\n    if (position === undefined) {\n      return insertTime\n    }\n\n    if (typeof position === 'number') {\n      return position\n    }\n\n    // Relative to previous animation\n    if (position === '<') {\n      const lastSegment = segments[segments.length - 1]\n      return lastSegment ? lastSegment.startTime : 0\n    }\n\n    if (position === '>') {\n      return insertTime\n    }\n\n    // Relative offset\n    if (position.startsWith('+=')) {\n      return insertTime + parseFloat(position.slice(2))\n    }\n\n    if (position.startsWith('-=')) {\n      return insertTime - parseFloat(position.slice(2))\n    }\n\n    // Label reference\n    if (labels.has(position)) {\n      return labels.get(position)!\n    }\n\n    // Label with offset\n    const labelMatch = position.match(/^([a-zA-Z_]\\w*)([+-]=?\\d*\\.?\\d+)?$/)\n    if (labelMatch) {\n      const labelName = labelMatch[1]\n      const offset = labelMatch[2]\n      const labelTime = labelName ? (labels.get(labelName) ?? 0) : 0\n      if (offset) {\n        const offsetValue = parseFloat(offset.replace('=', ''))\n        return labelTime + offsetValue\n      }\n      return labelTime\n    }\n\n    return insertTime\n  }\n\n  const resolveTarget = (target: TimelineTarget): HTMLElement | null => {\n    if (typeof target === 'string') {\n      return document.querySelector(target)\n    }\n    if (target instanceof HTMLElement) {\n      return target\n    }\n    return null\n  }\n\n  const extractNumericProps = (props: TimelineProps): Record<string, number> => {\n    const result: Record<string, number> = {}\n    for (const [key, value] of Object.entries(props)) {\n      if (typeof value === 'number' && !['duration', 'delay'].includes(key)) {\n        result[key] = value\n      }\n    }\n    return result\n  }\n\n  const applyPropsToElement = (element: HTMLElement, props: Record<string, number>) => {\n    const transforms: string[] = []\n    const cssProps: Record<string, string> = {}\n\n    for (const [key, value] of Object.entries(props)) {\n      switch (key) {\n        case 'x':\n          transforms.push(`translateX(${value}px)`)\n          break\n        case 'y':\n          transforms.push(`translateY(${value}px)`)\n          break\n        case 'z':\n          transforms.push(`translateZ(${value}px)`)\n          break\n        case 'scale':\n          transforms.push(`scale(${value})`)\n          break\n        case 'scaleX':\n          transforms.push(`scaleX(${value})`)\n          break\n        case 'scaleY':\n          transforms.push(`scaleY(${value})`)\n          break\n        case 'rotate':\n        case 'rotation':\n          transforms.push(`rotate(${value}deg)`)\n          break\n        case 'rotateX':\n          transforms.push(`rotateX(${value}deg)`)\n          break\n        case 'rotateY':\n          transforms.push(`rotateY(${value}deg)`)\n          break\n        case 'rotateZ':\n          transforms.push(`rotateZ(${value}deg)`)\n          break\n        case 'skewX':\n          transforms.push(`skewX(${value}deg)`)\n          break\n        case 'skewY':\n          transforms.push(`skewY(${value}deg)`)\n          break\n        case 'opacity':\n          cssProps.opacity = String(value)\n          break\n        default:\n          // Assume pixels for numeric values\n          cssProps[key] = typeof value === 'number' ? `${value}px` : String(value)\n      }\n    }\n\n    if (transforms.length > 0) {\n      element.style.transform = transforms.join(' ')\n    }\n\n    for (const [prop, val] of Object.entries(cssProps)) {\n      ;(element.style as unknown as Record<string, string>)[prop] = val\n    }\n  }\n\n  const getCurrentElementValues = (element: HTMLElement, props: Record<string, number>): Record<string, number> => {\n    const current: Record<string, number> = {}\n    const computed = getComputedStyle(element)\n\n    for (const key of Object.keys(props)) {\n      switch (key) {\n        case 'opacity':\n          current[key] = parseFloat(computed.opacity) || 1\n          break\n        case 'x':\n        case 'y':\n        case 'z':\n        case 'scale':\n        case 'scaleX':\n        case 'scaleY':\n        case 'rotate':\n        case 'rotation':\n        case 'rotateX':\n        case 'rotateY':\n        case 'rotateZ':\n        case 'skewX':\n        case 'skewY':\n          // Parse from transform matrix - simplified, defaults to 0 or 1\n          current[key] = key.startsWith('scale') ? 1 : 0\n          break\n        default:\n          current[key] = parseFloat(computed.getPropertyValue(key)) || 0\n      }\n    }\n\n    return current\n  }\n\n  // ============ Animation Loop ============\n\n  const tick = (timestamp: number) => {\n    if (!isPlaying || isPaused) return\n\n    const deltaTime = lastFrameTime ? (timestamp - lastFrameTime) / 1000 : 0\n    lastFrameTime = timestamp\n\n    // Update time\n    currentTime += isReversed ? -deltaTime : deltaTime\n    currentTime = clamp(currentTime, 0, totalDuration)\n\n    // Check for callbacks\n    const callbacksAtTime = callbacks.get(Math.floor(currentTime * 1000))\n    if (callbacksAtTime) {\n      callbacksAtTime.forEach(cb => cb())\n    }\n\n    // Check for pauses\n    const pauseCallback = pauses.get(Math.floor(currentTime * 1000))\n    if (pauseCallback !== undefined) {\n      isPaused = true\n      pauseCallback?.()\n      return\n    }\n\n    // Update segments\n    for (const segment of segments) {\n      const segmentProgress = clamp(\n        (currentTime - segment.startTime) / (segment.endTime - segment.startTime),\n        0,\n        1\n      )\n\n      const shouldBeActive = currentTime >= segment.startTime && currentTime <= segment.endTime\n\n      if (shouldBeActive && !segment.isActive) {\n        segment.isActive = true\n        segment.props.onStart?.()\n      }\n\n      if (segment.isActive && segment.spring) {\n        segment.props.onUpdate?.(segmentProgress)\n      }\n\n      if (shouldBeActive && segmentProgress >= 1 && !segment.isComplete) {\n        segment.isComplete = true\n        segment.props.onComplete?.()\n      }\n    }\n\n    onUpdate?.(currentTime / totalDuration)\n\n    // Check for completion\n    if ((isReversed && currentTime <= 0) || (!isReversed && currentTime >= totalDuration)) {\n      if (repeat === -1 || repeatCount < repeat) {\n        repeatCount++\n        onRepeat?.(repeatCount)\n\n        if (yoyo) {\n          isReversed = !isReversed\n        } else {\n          currentTime = 0\n          segments.forEach(s => {\n            s.isActive = false\n            s.isComplete = false\n          })\n        }\n\n        if (repeatDelay > 0) {\n          setTimeout(() => {\n            rafId = requestAnimationFrame(tick)\n          }, repeatDelay * 1000)\n          return\n        }\n      } else {\n        isPlaying = false\n        onComplete?.()\n        return\n      }\n    }\n\n    rafId = requestAnimationFrame(tick)\n  }\n\n  // ============ Public API ============\n\n  const timeline: Timeline = {\n    to(target, props, position) {\n      const startTime = parsePosition(position) + (props.delay || 0)\n      const duration = props.duration || 0.5\n      const endTime = startTime + duration\n\n      const element = resolveTarget(target)\n      const numericProps = extractNumericProps(props)\n\n      const segment: TimelineSegment = {\n        id: `segment_${timelineIdCounter++}`,\n        target,\n        props,\n        startTime,\n        endTime,\n        spring: null,\n        isActive: false,\n        isComplete: false,\n      }\n\n      if (element && Object.keys(numericProps).length > 0) {\n        const currentValues = getCurrentElementValues(element, numericProps)\n        const springConfig: SpringConfig = { ...defaults, ...props.spring }\n\n        segment.spring = createSpringGroup(currentValues, springConfig)\n\n        segment.spring.subscribe((values: Record<string, number>) => {\n          applyPropsToElement(element, values)\n        })\n\n        // Set target values when segment becomes active\n        const originalOnStart = segment.props.onStart\n        segment.props.onStart = () => {\n          segment.spring?.set(numericProps)\n          originalOnStart?.()\n        }\n      }\n\n      segments.push(segment)\n      insertTime = endTime\n      totalDuration = Math.max(totalDuration, endTime)\n\n      return timeline\n    },\n\n    from(target, props, position) {\n      const startTime = parsePosition(position) + (props.delay || 0)\n      const duration = props.duration || 0.5\n      const endTime = startTime + duration\n\n      const element = resolveTarget(target)\n      const numericProps = extractNumericProps(props)\n\n      const segment: TimelineSegment = {\n        id: `segment_${timelineIdCounter++}`,\n        target,\n        props,\n        startTime,\n        endTime,\n        spring: null,\n        isActive: false,\n        isComplete: false,\n      }\n\n      if (element && Object.keys(numericProps).length > 0) {\n        const targetValues = getCurrentElementValues(element, numericProps)\n        const springConfig: SpringConfig = { ...defaults, ...props.spring }\n\n        // Start from props, animate to current\n        segment.spring = createSpringGroup(numericProps, springConfig)\n        applyPropsToElement(element, numericProps)\n\n        segment.spring.subscribe((values: Record<string, number>) => {\n          applyPropsToElement(element, values)\n        })\n\n        const originalOnStart = segment.props.onStart\n        segment.props.onStart = () => {\n          segment.spring?.set(targetValues)\n          originalOnStart?.()\n        }\n      }\n\n      segments.push(segment)\n      insertTime = endTime\n      totalDuration = Math.max(totalDuration, endTime)\n\n      return timeline\n    },\n\n    fromTo(target, fromProps, toProps, position) {\n      const startTime = parsePosition(position) + (toProps.delay || 0)\n      const duration = toProps.duration || 0.5\n      const endTime = startTime + duration\n\n      const element = resolveTarget(target)\n      const fromNumeric = extractNumericProps(fromProps)\n      const toNumeric = extractNumericProps(toProps)\n\n      const segment: TimelineSegment = {\n        id: `segment_${timelineIdCounter++}`,\n        target,\n        props: toProps,\n        startTime,\n        endTime,\n        spring: null,\n        isActive: false,\n        isComplete: false,\n      }\n\n      if (element && Object.keys(toNumeric).length > 0) {\n        const springConfig: SpringConfig = { ...defaults, ...toProps.spring }\n\n        segment.spring = createSpringGroup(fromNumeric, springConfig)\n        applyPropsToElement(element, fromNumeric)\n\n        segment.spring.subscribe((values: Record<string, number>) => {\n          applyPropsToElement(element, values)\n        })\n\n        const originalOnStart = segment.props.onStart\n        segment.props.onStart = () => {\n          segment.spring?.set(toNumeric)\n          originalOnStart?.()\n        }\n      }\n\n      segments.push(segment)\n      insertTime = endTime\n      totalDuration = Math.max(totalDuration, endTime)\n\n      return timeline\n    },\n\n    addLabel(label, position) {\n      const time = parsePosition(position)\n      labels.set(label, time)\n      return timeline\n    },\n\n    call(callback, position) {\n      const time = Math.floor(parsePosition(position) * 1000)\n      if (!callbacks.has(time)) {\n        callbacks.set(time, [])\n      }\n      callbacks.get(time)!.push(callback)\n      return timeline\n    },\n\n    set(target, props, position) {\n      const element = resolveTarget(target)\n      if (element) {\n        const time = parsePosition(position)\n        this.call(() => {\n          applyPropsToElement(element, extractNumericProps(props))\n        }, time)\n      }\n      return timeline\n    },\n\n    addPause(position, callback) {\n      const time = Math.floor(parsePosition(position) * 1000)\n      pauses.set(time, callback)\n      return timeline\n    },\n\n    play() {\n      if (!hasStarted) {\n        hasStarted = true\n        onStart?.()\n      }\n      isPlaying = true\n      isPaused = false\n      lastFrameTime = 0\n      rafId = requestAnimationFrame(tick)\n      return timeline\n    },\n\n    pause() {\n      isPaused = true\n      if (rafId) {\n        cancelAnimationFrame(rafId)\n        rafId = null\n      }\n      return timeline\n    },\n\n    resume() {\n      if (isPaused) {\n        isPaused = false\n        lastFrameTime = 0\n        rafId = requestAnimationFrame(tick)\n      }\n      return timeline\n    },\n\n    reverse() {\n      isReversed = !isReversed\n      return timeline\n    },\n\n    restart() {\n      currentTime = isReversed ? totalDuration : 0\n      repeatCount = 0\n      hasStarted = false\n      segments.forEach(s => {\n        s.isActive = false\n        s.isComplete = false\n      })\n      return this.play()\n    },\n\n    seek(position) {\n      if (typeof position === 'string') {\n        currentTime = labels.get(position) ?? 0\n      } else {\n        currentTime = clamp(position, 0, totalDuration)\n      }\n      return timeline\n    },\n\n    kill() {\n      isPlaying = false\n      if (rafId) {\n        cancelAnimationFrame(rafId)\n        rafId = null\n      }\n      segments.forEach(s => s.spring?.destroy())\n      segments.length = 0\n      labels.clear()\n      callbacks.clear()\n      pauses.clear()\n    },\n\n    time: () => currentTime,\n    duration: () => totalDuration,\n    progress: () => totalDuration > 0 ? currentTime / totalDuration : 0,\n    isPlaying: () => isPlaying && !isPaused,\n    isReversed: () => isReversed,\n\n    getById(id) {\n      return segments.find(s => s.id === id)\n    },\n  }\n\n  if (autoplay) {\n    timeline.play()\n  }\n\n  return timeline\n}\n\n/**\n * Create a simple tween (single animation)\n */\nexport function tween(\n  target: TimelineTarget,\n  props: TimelineProps\n): Timeline {\n  return createTimeline().to(target, props).play()\n}\n\n/**\n * Create a timeline that animates all targets simultaneously\n */\nexport function allTo(\n  targets: TimelineTarget[],\n  props: TimelineProps\n): Timeline {\n  const tl = createTimeline()\n  targets.forEach((target, i) => {\n    tl.to(target, props, i === 0 ? 0 : '<')\n  })\n  return tl.play()\n}\n","/**\n * SVG Morphing - Smooth path shape interpolation with spring physics\n *\n * Enables morphing between SVG paths with automatic path normalization\n * and spring-based animation.\n */\n\nimport { createSpringValue, type SpringValue } from '../core/spring-value.js'\nimport type { SpringConfig } from '../core/config.js'\nimport { lerp, clamp } from '../utils/math.js'\n\n// ============ Types ============\n\n/**\n * SVG path command types\n */\ntype CommandType = 'M' | 'L' | 'C' | 'Q' | 'A' | 'Z' | 'H' | 'V' | 'S' | 'T'\n\n/**\n * Parsed path command\n */\ninterface PathCommand {\n  type: CommandType\n  values: number[]\n}\n\n/**\n * Normalized point with control points\n */\ninterface NormalizedPoint {\n  x: number\n  y: number\n  cp1x?: number\n  cp1y?: number\n  cp2x?: number\n  cp2y?: number\n}\n\n/**\n * Morph configuration\n */\nexport interface MorphConfig {\n  /** Spring configuration */\n  spring?: SpringConfig\n  /** Number of samples for path normalization (higher = smoother) */\n  samples?: number\n  /** Callback on progress update */\n  onProgress?: (progress: number) => void\n  /** Callback when morph completes */\n  onComplete?: () => void\n}\n\n/**\n * Morph controller interface\n */\nexport interface MorphController {\n  /** Get current morphed path */\n  getPath(): string\n  /** Get current progress (0-1) */\n  getProgress(): number\n  /** Morph to a new path */\n  morphTo(path: string): void\n  /** Set progress directly (0-1) */\n  setProgress(progress: number): void\n  /** Subscribe to path changes */\n  subscribe(callback: (path: string) => void): () => void\n  /** Destroy and cleanup */\n  destroy(): void\n}\n\n// ============ Path Parsing ============\n\n/**\n * Parse SVG path string into commands\n */\nfunction parsePath(d: string): PathCommand[] {\n  const commands: PathCommand[] = []\n  const regex = /([MLCQAZHVST])([^MLCQAZHVST]*)/gi\n\n  let match: RegExpMatchArray | null\n  // Use matchAll instead of regex.exec for safer iteration\n  const matches = d.matchAll(regex)\n\n  for (const matchItem of matches) {\n    const typeChar = matchItem[1]\n    const valuesStr = matchItem[2]\n    if (!typeChar || valuesStr === undefined) continue\n\n    const type = typeChar.toUpperCase() as CommandType\n    const values = valuesStr\n      .trim()\n      .split(/[\\s,]+/)\n      .filter(v => v !== '')\n      .map(parseFloat)\n      .filter(v => !isNaN(v))\n\n    commands.push({ type, values })\n  }\n\n  return commands\n}\n\n/**\n * Convert path commands to absolute coordinates\n */\nfunction toAbsolute(commands: PathCommand[]): PathCommand[] {\n  let currentX = 0\n  let currentY = 0\n  let startX = 0\n  let startY = 0\n\n  return commands.map(cmd => {\n    const { type, values } = cmd\n    const absValues = [...values]\n\n    switch (type) {\n      case 'M':\n        currentX = values[0] ?? 0\n        currentY = values[1] ?? 0\n        startX = currentX\n        startY = currentY\n        break\n\n      case 'L':\n        currentX = values[0] ?? 0\n        currentY = values[1] ?? 0\n        break\n\n      case 'H':\n        absValues[0] = values[0] ?? 0\n        currentX = values[0] ?? 0\n        break\n\n      case 'V':\n        absValues[0] = values[0] ?? 0\n        currentY = values[0] ?? 0\n        break\n\n      case 'C':\n        currentX = values[4] ?? 0\n        currentY = values[5] ?? 0\n        break\n\n      case 'Q':\n        currentX = values[2] ?? 0\n        currentY = values[3] ?? 0\n        break\n\n      case 'A':\n        currentX = values[5] ?? 0\n        currentY = values[6] ?? 0\n        break\n\n      case 'Z':\n        currentX = startX\n        currentY = startY\n        break\n    }\n\n    return { type, values: absValues }\n  })\n}\n\n/**\n * Sample points along a path at regular intervals\n */\nfunction samplePath(commands: PathCommand[], samples: number): NormalizedPoint[] {\n  const points: NormalizedPoint[] = []\n\n  // Check if we're in browser\n  if (typeof document === 'undefined') {\n    // Server-side fallback - simple linear sampling\n    for (const cmd of commands) {\n      if (cmd.type === 'M' || cmd.type === 'L') {\n        points.push({ x: cmd.values[0] ?? 0, y: cmd.values[1] ?? 0 })\n      } else if (cmd.type === 'C') {\n        points.push({\n          x: cmd.values[4] ?? 0,\n          y: cmd.values[5] ?? 0,\n          cp1x: cmd.values[0] ?? 0,\n          cp1y: cmd.values[1] ?? 0,\n          cp2x: cmd.values[2] ?? 0,\n          cp2y: cmd.values[3] ?? 0,\n        })\n      }\n    }\n    return points\n  }\n\n  const svgNS = 'http://www.w3.org/2000/svg'\n  const svg = document.createElementNS(svgNS, 'svg')\n  const path = document.createElementNS(svgNS, 'path')\n\n  // Build path string\n  let d = ''\n  for (const cmd of commands) {\n    d += cmd.type + cmd.values.join(' ')\n  }\n  path.setAttribute('d', d)\n  svg.appendChild(path)\n  document.body.appendChild(svg)\n\n  try {\n    const totalLength = path.getTotalLength()\n    const step = totalLength / (samples - 1)\n\n    for (let i = 0; i < samples; i++) {\n      const point = path.getPointAtLength(i * step)\n      points.push({ x: point.x, y: point.y })\n    }\n  } finally {\n    document.body.removeChild(svg)\n  }\n\n  return points\n}\n\n/**\n * Interpolate between two points\n */\nfunction interpolatePoint(p1: NormalizedPoint, p2: NormalizedPoint, t: number): NormalizedPoint {\n  return {\n    x: lerp(p1.x, p2.x, t),\n    y: lerp(p1.y, p2.y, t),\n  }\n}\n\n/**\n * Convert normalized points back to path string\n */\nfunction pointsToPath(points: NormalizedPoint[]): string {\n  if (points.length === 0) return ''\n\n  const firstPoint = points[0]!\n  let d = `M ${firstPoint.x} ${firstPoint.y}`\n\n  for (let i = 1; i < points.length; i++) {\n    const point = points[i]!\n    d += ` L ${point.x} ${point.y}`\n  }\n\n  return d\n}\n\n// ============ Morph Implementation ============\n\n/**\n * Create SVG path morph controller\n *\n * @example\n * ```ts\n * const morph = createMorph(circlePath, {\n *   spring: { stiffness: 120, damping: 14 },\n *   onProgress: (p) => console.log('Progress:', p),\n * })\n *\n * morph.subscribe((path) => {\n *   element.setAttribute('d', path)\n * })\n *\n * morph.morphTo(starPath)\n * ```\n */\nexport function createMorph(\n  initialPath: string,\n  config: MorphConfig = {}\n): MorphController {\n  const {\n    spring: springConfig = { stiffness: 120, damping: 14 },\n    samples = 100,\n    onProgress,\n    onComplete,\n  } = config\n\n  let currentPath = initialPath\n  let fromPoints: NormalizedPoint[] = []\n  let toPoints: NormalizedPoint[] = []\n  let currentPoints: NormalizedPoint[] = []\n\n  const subscribers = new Set<(path: string) => void>()\n\n  // Parse initial path\n  const initialCommands = parsePath(initialPath)\n  fromPoints = samplePath(toAbsolute(initialCommands), samples)\n  currentPoints = [...fromPoints]\n  toPoints = [...fromPoints]\n\n  // Create spring for progress\n  const progressSpring = createSpringValue(0, springConfig)\n\n  progressSpring.subscribe(() => {\n    const progress = progressSpring.get()\n    onProgress?.(progress)\n\n    // Interpolate points\n    currentPoints = fromPoints.map((from, i) =>\n      interpolatePoint(from, toPoints[i] ?? from, progress)\n    )\n\n    currentPath = pointsToPath(currentPoints)\n    subscribers.forEach(cb => cb(currentPath))\n\n    if (progress >= 0.999) {\n      onComplete?.()\n    }\n  })\n\n  return {\n    getPath: () => currentPath,\n    getProgress: () => progressSpring.get(),\n\n    morphTo(path: string) {\n      // Normalize paths\n      const targetCommands = parsePath(path)\n      const targetPoints = samplePath(toAbsolute(targetCommands), samples)\n\n      fromPoints = [...currentPoints]\n      toPoints = targetPoints\n\n      // Ensure same number of points\n      while (fromPoints.length < toPoints.length) {\n        fromPoints.push(fromPoints[fromPoints.length - 1] || { x: 0, y: 0 })\n      }\n      while (toPoints.length < fromPoints.length) {\n        toPoints.push(toPoints[toPoints.length - 1] || { x: 0, y: 0 })\n      }\n\n      // Reset and animate\n      progressSpring.jump(0)\n      progressSpring.set(1)\n    },\n\n    setProgress(progress: number) {\n      const p = clamp(progress, 0, 1)\n      progressSpring.jump(p)\n\n      currentPoints = fromPoints.map((from, i) =>\n        interpolatePoint(from, toPoints[i] ?? from, p)\n      )\n\n      currentPath = pointsToPath(currentPoints)\n      subscribers.forEach(cb => cb(currentPath))\n    },\n\n    subscribe(callback) {\n      subscribers.add(callback)\n      callback(currentPath)\n      return () => subscribers.delete(callback)\n    },\n\n    destroy() {\n      progressSpring.destroy()\n      subscribers.clear()\n    },\n  }\n}\n\n/**\n * Create a morph between multiple paths (morphing sequence)\n *\n * @example\n * ```ts\n * const sequence = createMorphSequence([\n *   circlePath,\n *   squarePath,\n *   starPath,\n * ])\n *\n * sequence.subscribe((path) => {\n *   element.setAttribute('d', path)\n * })\n *\n * sequence.morphToIndex(2) // Morph to star\n * ```\n */\nexport function createMorphSequence(\n  paths: string[],\n  config: MorphConfig = {}\n): {\n  getPath(): string\n  getCurrentIndex(): number\n  morphToIndex(index: number): void\n  morphToNext(): void\n  morphToPrevious(): void\n  subscribe(callback: (path: string) => void): () => void\n  destroy(): void\n} {\n  if (paths.length === 0) {\n    throw new Error('At least one path is required')\n  }\n\n  let currentIndex = 0\n  const firstPath = paths[0]!\n  const morph = createMorph(firstPath, config)\n\n  return {\n    getPath: () => morph.getPath(),\n    getCurrentIndex: () => currentIndex,\n\n    morphToIndex(index: number) {\n      const targetIndex = clamp(index, 0, paths.length - 1)\n      if (targetIndex !== currentIndex) {\n        currentIndex = targetIndex\n        const targetPath = paths[targetIndex]!\n        morph.morphTo(targetPath)\n      }\n    },\n\n    morphToNext() {\n      this.morphToIndex((currentIndex + 1) % paths.length)\n    },\n\n    morphToPrevious() {\n      this.morphToIndex((currentIndex - 1 + paths.length) % paths.length)\n    },\n\n    subscribe: (callback) => morph.subscribe(callback),\n    destroy: () => morph.destroy(),\n  }\n}\n\n// ============ Preset Shapes ============\n\n/**\n * Generate common SVG shape paths\n */\nexport const shapes = {\n  /**\n   * Generate circle path\n   */\n  circle(cx: number, cy: number, r: number): string {\n    return `M ${cx - r} ${cy}\n            A ${r} ${r} 0 1 1 ${cx + r} ${cy}\n            A ${r} ${r} 0 1 1 ${cx - r} ${cy}`\n  },\n\n  /**\n   * Generate rectangle path\n   */\n  rect(x: number, y: number, width: number, height: number, rx = 0): string {\n    if (rx === 0) {\n      return `M ${x} ${y}\n              L ${x + width} ${y}\n              L ${x + width} ${y + height}\n              L ${x} ${y + height}\n              Z`\n    }\n\n    return `M ${x + rx} ${y}\n            L ${x + width - rx} ${y}\n            Q ${x + width} ${y} ${x + width} ${y + rx}\n            L ${x + width} ${y + height - rx}\n            Q ${x + width} ${y + height} ${x + width - rx} ${y + height}\n            L ${x + rx} ${y + height}\n            Q ${x} ${y + height} ${x} ${y + height - rx}\n            L ${x} ${y + rx}\n            Q ${x} ${y} ${x + rx} ${y}\n            Z`\n  },\n\n  /**\n   * Generate polygon path\n   */\n  polygon(cx: number, cy: number, r: number, sides: number): string {\n    const points: string[] = []\n\n    for (let i = 0; i < sides; i++) {\n      const angle = (i / sides) * Math.PI * 2 - Math.PI / 2\n      const x = cx + r * Math.cos(angle)\n      const y = cy + r * Math.sin(angle)\n      points.push(`${i === 0 ? 'M' : 'L'} ${x} ${y}`)\n    }\n\n    return points.join(' ') + ' Z'\n  },\n\n  /**\n   * Generate star path\n   */\n  star(cx: number, cy: number, outerR: number, innerR: number, points: number): string {\n    const path: string[] = []\n    const step = Math.PI / points\n\n    for (let i = 0; i < points * 2; i++) {\n      const r = i % 2 === 0 ? outerR : innerR\n      const angle = i * step - Math.PI / 2\n      const x = cx + r * Math.cos(angle)\n      const y = cy + r * Math.sin(angle)\n      path.push(`${i === 0 ? 'M' : 'L'} ${x} ${y}`)\n    }\n\n    return path.join(' ') + ' Z'\n  },\n\n  /**\n   * Generate heart path\n   */\n  heart(cx: number, cy: number, size: number): string {\n    const d = size / 4\n    return `M ${cx} ${cy + d}\n            C ${cx} ${cy} ${cx - 2 * d} ${cy} ${cx - 2 * d} ${cy - d}\n            C ${cx - 2 * d} ${cy - 2 * d} ${cx} ${cy - 2 * d} ${cx} ${cy - d}\n            C ${cx} ${cy - 2 * d} ${cx + 2 * d} ${cy - 2 * d} ${cx + 2 * d} ${cy - d}\n            C ${cx + 2 * d} ${cy} ${cx} ${cy} ${cx} ${cy + d}\n            Z`\n  },\n\n  /**\n   * Generate arrow path\n   */\n  arrow(x: number, y: number, width: number, height: number, direction: 'up' | 'down' | 'left' | 'right' = 'right'): string {\n    const hw = width / 2\n    const hh = height / 2\n\n    switch (direction) {\n      case 'right':\n        return `M ${x} ${y - hh} L ${x + width} ${y} L ${x} ${y + hh} Z`\n      case 'left':\n        return `M ${x + width} ${y - hh} L ${x} ${y} L ${x + width} ${y + hh} Z`\n      case 'up':\n        return `M ${x - hw} ${y + height} L ${x} ${y} L ${x + hw} ${y + height} Z`\n      case 'down':\n        return `M ${x - hw} ${y} L ${x} ${y + height} L ${x + hw} ${y} Z`\n    }\n  },\n}\n","/**\n * Shared Layout Animations - Cross-component FLIP animations with layoutId\n *\n * Enables smooth transitions between components that share the same layoutId,\n * similar to Framer Motion's layout animations.\n */\n\nimport { createSpringGroup, type SpringGroup } from '../core/spring-group.js'\nimport type { SpringConfig } from '../core/config.js'\nimport { clamp } from '../utils/math.js'\n\n// ============ Types ============\n\n/**\n * Element measurement for FLIP\n */\nexport interface LayoutMeasurement {\n  x: number\n  y: number\n  width: number\n  height: number\n  opacity?: number\n  borderRadius?: number\n  scaleX?: number\n  scaleY?: number\n}\n\n/**\n * Shared layout element info\n */\ninterface SharedLayoutElement {\n  id: string\n  element: HTMLElement\n  measurement: LayoutMeasurement\n  spring: SpringGroup<Record<string, number>> | null\n  isAnimating: boolean\n}\n\n/**\n * Layout animation configuration\n */\nexport interface LayoutAnimationConfig {\n  /** Spring configuration */\n  spring?: SpringConfig\n  /** Duration hint for spring (optional) */\n  duration?: number\n  /** Callback when animation starts */\n  onAnimationStart?: (id: string) => void\n  /** Callback when animation completes */\n  onAnimationComplete?: (id: string) => void\n  /** Enable crossfade during transition */\n  crossfade?: boolean\n  /** Custom transition properties */\n  transition?: {\n    x?: SpringConfig\n    y?: SpringConfig\n    width?: SpringConfig\n    height?: SpringConfig\n    opacity?: SpringConfig\n    borderRadius?: SpringConfig\n  }\n}\n\n/**\n * Layout group for managing shared elements\n */\nexport interface LayoutGroup {\n  /** Register element with layoutId */\n  register(id: string, element: HTMLElement): void\n  /** Unregister element */\n  unregister(id: string, element: HTMLElement): void\n  /** Update layout (call after DOM changes) */\n  update(): void\n  /** Force re-measure all elements */\n  forceUpdate(): void\n  /** Destroy and cleanup */\n  destroy(): void\n}\n\n/**\n * Shared layout context for cross-component animations\n */\nexport interface SharedLayoutContext {\n  /** Register a layout group */\n  createGroup(id?: string): LayoutGroup\n  /** Get group by id */\n  getGroup(id: string): LayoutGroup | undefined\n  /** Update all groups */\n  updateAll(): void\n  /** Destroy all groups */\n  destroy(): void\n}\n\n// ============ Measurement Utilities ============\n\n/**\n * Measure element position and size\n */\nfunction measureElement(element: HTMLElement): LayoutMeasurement {\n  const rect = element.getBoundingClientRect()\n  const styles = getComputedStyle(element)\n\n  return {\n    x: rect.left + window.scrollX,\n    y: rect.top + window.scrollY,\n    width: rect.width,\n    height: rect.height,\n    opacity: parseFloat(styles.opacity) || 1,\n    borderRadius: parseFloat(styles.borderRadius) || 0,\n    scaleX: 1,\n    scaleY: 1,\n  }\n}\n\n/**\n * Apply FLIP transform to element\n */\nfunction applyTransform(\n  element: HTMLElement,\n  from: LayoutMeasurement,\n  to: LayoutMeasurement,\n  current: Record<string, number>\n): void {\n  // Calculate deltas\n  const dx = current.x !== undefined ? from.x - to.x + (current.x - from.x) : 0\n  const dy = current.y !== undefined ? from.y - to.y + (current.y - from.y) : 0\n  const scaleX = current.width !== undefined ? current.width / to.width : 1\n  const scaleY = current.height !== undefined ? current.height / to.height : 1\n\n  // Apply transform\n  element.style.transform = `translate(${dx}px, ${dy}px) scale(${scaleX}, ${scaleY})`\n  element.style.transformOrigin = 'top left'\n\n  // Apply opacity if transitioning\n  if (current.opacity !== undefined) {\n    element.style.opacity = String(current.opacity)\n  }\n\n  // Apply border radius (scale-compensated)\n  if (current.borderRadius !== undefined) {\n    const compensatedRadius = current.borderRadius / Math.max(scaleX, scaleY)\n    element.style.borderRadius = `${compensatedRadius}px`\n  }\n}\n\n/**\n * Reset element transform\n */\nfunction resetTransform(element: HTMLElement): void {\n  element.style.transform = ''\n  element.style.transformOrigin = ''\n  element.style.opacity = ''\n  element.style.borderRadius = ''\n}\n\n// ============ Layout Group Implementation ============\n\n/**\n * Create a layout group for managing shared layout elements\n *\n * @example\n * ```ts\n * const group = createLayoutGroup({\n *   spring: { stiffness: 300, damping: 30 },\n * })\n *\n * // Register elements with same layoutId\n * group.register('card-1', cardElement)\n *\n * // After DOM changes\n * group.update()\n * ```\n */\nexport function createLayoutGroup(config: LayoutAnimationConfig = {}): LayoutGroup {\n  const {\n    spring: defaultSpring = { stiffness: 300, damping: 30 },\n    onAnimationStart,\n    onAnimationComplete,\n    crossfade = false,\n    transition = {},\n  } = config\n\n  const elements = new Map<string, SharedLayoutElement[]>()\n  const previousMeasurements = new Map<string, LayoutMeasurement>()\n\n  const register = (id: string, element: HTMLElement): void => {\n    if (!elements.has(id)) {\n      elements.set(id, [])\n    }\n\n    const existing = elements.get(id)!\n    const alreadyRegistered = existing.some(e => e.element === element)\n\n    if (!alreadyRegistered) {\n      const measurement = measureElement(element)\n      existing.push({\n        id,\n        element,\n        measurement,\n        spring: null,\n        isAnimating: false,\n      })\n\n      // Store measurement for future animations\n      if (!previousMeasurements.has(id)) {\n        previousMeasurements.set(id, measurement)\n      }\n    }\n  }\n\n  const unregister = (id: string, element: HTMLElement): void => {\n    const group = elements.get(id)\n    if (!group) return\n\n    const index = group.findIndex(e => e.element === element)\n    if (index !== -1) {\n      const entry = group[index]!\n\n      // Store final measurement before removal\n      previousMeasurements.set(id, measureElement(element))\n\n      // Cleanup spring\n      entry.spring?.destroy()\n      group.splice(index, 1)\n\n      if (group.length === 0) {\n        elements.delete(id)\n      }\n    }\n  }\n\n  const animateElement = (\n    entry: SharedLayoutElement,\n    from: LayoutMeasurement,\n    to: LayoutMeasurement\n  ): void => {\n    // Cleanup previous animation\n    entry.spring?.destroy()\n\n    const springConfig = {\n      x: transition.x || defaultSpring,\n      y: transition.y || defaultSpring,\n      width: transition.width || defaultSpring,\n      height: transition.height || defaultSpring,\n      opacity: transition.opacity || defaultSpring,\n      borderRadius: transition.borderRadius || defaultSpring,\n    }\n\n    // Create spring with initial values\n    const initialValues: Record<string, number> = {\n      x: from.x,\n      y: from.y,\n      width: from.width,\n      height: from.height,\n    }\n\n    if (crossfade) {\n      initialValues.opacity = from.opacity ?? 1\n    }\n\n    if (from.borderRadius !== undefined) {\n      initialValues.borderRadius = from.borderRadius\n    }\n\n    entry.spring = createSpringGroup(initialValues, defaultSpring)\n    entry.isAnimating = true\n\n    onAnimationStart?.(entry.id)\n\n    entry.spring.subscribe((values: Record<string, number>) => {\n      applyTransform(entry.element, from, to, values)\n    })\n\n    // Set target values\n    const targetValues: Record<string, number> = {\n      x: to.x,\n      y: to.y,\n      width: to.width,\n      height: to.height,\n    }\n\n    if (crossfade) {\n      targetValues.opacity = to.opacity ?? 1\n    }\n\n    if (to.borderRadius !== undefined) {\n      targetValues.borderRadius = to.borderRadius\n    }\n\n    entry.spring.set(targetValues)\n\n    // Check for animation completion\n    const checkComplete = () => {\n      if (entry.spring && !entry.spring.isAnimating()) {\n        entry.isAnimating = false\n        resetTransform(entry.element)\n        onAnimationComplete?.(entry.id)\n      } else if (entry.isAnimating) {\n        requestAnimationFrame(checkComplete)\n      }\n    }\n\n    requestAnimationFrame(checkComplete)\n  }\n\n  const update = (): void => {\n    for (const [id, group] of elements) {\n      for (const entry of group) {\n        const previousMeasurement = previousMeasurements.get(id)\n        const currentMeasurement = measureElement(entry.element)\n\n        // Check if position/size changed\n        if (previousMeasurement) {\n          const hasChanged =\n            previousMeasurement.x !== currentMeasurement.x ||\n            previousMeasurement.y !== currentMeasurement.y ||\n            previousMeasurement.width !== currentMeasurement.width ||\n            previousMeasurement.height !== currentMeasurement.height\n\n          if (hasChanged) {\n            animateElement(entry, previousMeasurement, currentMeasurement)\n          }\n        }\n\n        // Update stored measurement\n        entry.measurement = currentMeasurement\n        previousMeasurements.set(id, currentMeasurement)\n      }\n    }\n  }\n\n  const forceUpdate = (): void => {\n    // Re-measure all elements\n    for (const [id, group] of elements) {\n      for (const entry of group) {\n        entry.measurement = measureElement(entry.element)\n        previousMeasurements.set(id, entry.measurement)\n      }\n    }\n  }\n\n  const destroy = (): void => {\n    for (const group of elements.values()) {\n      for (const entry of group) {\n        entry.spring?.destroy()\n        resetTransform(entry.element)\n      }\n    }\n    elements.clear()\n    previousMeasurements.clear()\n  }\n\n  return {\n    register,\n    unregister,\n    update,\n    forceUpdate,\n    destroy,\n  }\n}\n\n// ============ Shared Layout Context ============\n\nlet groupIdCounter = 0\n\n/**\n * Create a shared layout context for managing multiple layout groups\n *\n * @example\n * ```ts\n * const context = createSharedLayoutContext()\n *\n * // Create groups for different animation contexts\n * const listGroup = context.createGroup('list')\n * const cardGroup = context.createGroup('cards')\n *\n * // Register elements\n * listGroup.register('item-1', element1)\n * cardGroup.register('card-1', element2)\n *\n * // After route change or DOM update\n * context.updateAll()\n * ```\n */\nexport function createSharedLayoutContext(): SharedLayoutContext {\n  const groups = new Map<string, LayoutGroup>()\n\n  return {\n    createGroup(id?: string) {\n      const groupId = id ?? `layout-group-${groupIdCounter++}`\n      const group = createLayoutGroup()\n      groups.set(groupId, group)\n      return group\n    },\n\n    getGroup(id: string) {\n      return groups.get(id)\n    },\n\n    updateAll() {\n      for (const group of groups.values()) {\n        group.update()\n      }\n    },\n\n    destroy() {\n      for (const group of groups.values()) {\n        group.destroy()\n      }\n      groups.clear()\n    },\n  }\n}\n\n// ============ Auto Layout Observer ============\n\n/**\n * Configuration for auto layout observer\n */\nexport interface AutoLayoutConfig extends LayoutAnimationConfig {\n  /** Root element to observe (default: document.body) */\n  root?: HTMLElement\n  /** Attribute name for layout ID (default: 'data-layout-id') */\n  attribute?: string\n  /** Debounce time for mutations (ms) */\n  debounce?: number\n}\n\n/**\n * Create auto layout observer that automatically animates\n * elements with layoutId attribute\n *\n * @example\n * ```html\n * <div data-layout-id=\"card-1\">Content</div>\n * ```\n *\n * ```ts\n * const observer = createAutoLayout({\n *   spring: { stiffness: 200, damping: 20 },\n * })\n *\n * // Elements with data-layout-id will automatically animate\n * // when their position changes\n *\n * observer.destroy() // Cleanup when done\n * ```\n */\nexport function createAutoLayout(config: AutoLayoutConfig = {}): {\n  update(): void\n  forceUpdate(): void\n  destroy(): void\n} {\n  const {\n    root = typeof document !== 'undefined' ? document.body : null,\n    attribute = 'data-layout-id',\n    debounce: debounceTime = 0,\n    ...layoutConfig\n  } = config\n\n  if (!root) {\n    return {\n      update: () => {},\n      forceUpdate: () => {},\n      destroy: () => {},\n    }\n  }\n\n  const group = createLayoutGroup(layoutConfig)\n  let observer: MutationObserver | null = null\n  let resizeObserver: ResizeObserver | null = null\n  let debounceTimer: ReturnType<typeof setTimeout> | null = null\n\n  const scanAndRegister = () => {\n    const elements = root.querySelectorAll(`[${attribute}]`)\n    elements.forEach((el) => {\n      const id = el.getAttribute(attribute)\n      if (id && el instanceof HTMLElement) {\n        group.register(id, el)\n      }\n    })\n  }\n\n  const debouncedUpdate = () => {\n    if (debounceTimer) {\n      clearTimeout(debounceTimer)\n    }\n\n    if (debounceTime > 0) {\n      debounceTimer = setTimeout(() => {\n        scanAndRegister()\n        group.update()\n      }, debounceTime)\n    } else {\n      scanAndRegister()\n      group.update()\n    }\n  }\n\n  // Initial scan\n  scanAndRegister()\n\n  // Observe DOM changes\n  observer = new MutationObserver((mutations) => {\n    let shouldUpdate = false\n\n    for (const mutation of mutations) {\n      if (mutation.type === 'childList') {\n        // Check added nodes\n        mutation.addedNodes.forEach((node) => {\n          if (node instanceof HTMLElement) {\n            if (node.hasAttribute(attribute)) {\n              shouldUpdate = true\n            }\n            // Check descendants\n            if (node.querySelector(`[${attribute}]`)) {\n              shouldUpdate = true\n            }\n          }\n        })\n\n        // Check removed nodes\n        mutation.removedNodes.forEach((node) => {\n          if (node instanceof HTMLElement) {\n            const id = node.getAttribute(attribute)\n            if (id) {\n              group.unregister(id, node)\n            }\n          }\n        })\n      }\n\n      if (mutation.type === 'attributes' && mutation.attributeName === attribute) {\n        shouldUpdate = true\n      }\n    }\n\n    if (shouldUpdate) {\n      debouncedUpdate()\n    }\n  })\n\n  observer.observe(root, {\n    childList: true,\n    subtree: true,\n    attributes: true,\n    attributeFilter: [attribute],\n  })\n\n  // Observe resize changes\n  resizeObserver = new ResizeObserver(() => {\n    debouncedUpdate()\n  })\n\n  resizeObserver.observe(root)\n\n  return {\n    update: () => {\n      scanAndRegister()\n      group.update()\n    },\n\n    forceUpdate: () => {\n      scanAndRegister()\n      group.forceUpdate()\n    },\n\n    destroy: () => {\n      if (debounceTimer) {\n        clearTimeout(debounceTimer)\n      }\n      observer?.disconnect()\n      resizeObserver?.disconnect()\n      group.destroy()\n    },\n  }\n}\n","/**\n * Enhanced Stagger Patterns - Advanced staggering for complex animations\n *\n * Provides grid, spiral, wave, and custom stagger patterns for\n * sophisticated animation orchestration.\n */\n\nimport { clamp } from '../utils/math.js'\n\n// ============ Types ============\n\n/**\n * Stagger pattern configuration\n */\nexport interface StaggerPatternConfig {\n  /** Total number of items */\n  count: number\n  /** Base delay between items (seconds) */\n  delay?: number\n  /** Easing function for delay distribution */\n  easing?: (t: number) => number\n}\n\n/**\n * Grid stagger configuration\n */\nexport interface GridStaggerConfig extends StaggerPatternConfig {\n  /** Number of columns */\n  columns: number\n  /** Grid origin for stagger direction */\n  origin?: 'top-left' | 'top-right' | 'bottom-left' | 'bottom-right' | 'center'\n  /** Direction of stagger flow */\n  direction?: 'row' | 'column' | 'diagonal' | 'radial'\n}\n\n/**\n * Wave stagger configuration\n */\nexport interface WaveStaggerConfig extends StaggerPatternConfig {\n  /** Wave direction */\n  direction?: 'horizontal' | 'vertical' | 'diagonal'\n  /** Wave frequency (number of waves) */\n  frequency?: number\n  /** Wave amplitude (affects delay variation) */\n  amplitude?: number\n}\n\n/**\n * Spiral stagger configuration\n */\nexport interface SpiralStaggerConfig extends StaggerPatternConfig {\n  /** Number of columns for grid layout */\n  columns: number\n  /** Spiral direction */\n  direction?: 'clockwise' | 'counter-clockwise'\n  /** Start from center or edge */\n  startFrom?: 'center' | 'edge'\n}\n\n/**\n * Random stagger configuration\n */\nexport interface RandomStaggerConfig extends StaggerPatternConfig {\n  /** Seed for reproducible randomness */\n  seed?: number\n  /** Minimum delay multiplier */\n  minMultiplier?: number\n  /** Maximum delay multiplier */\n  maxMultiplier?: number\n}\n\n/**\n * Custom stagger function\n */\nexport type CustomStaggerFn = (index: number, total: number) => number\n\n// ============ Utility Functions ============\n\n/**\n * Seeded random number generator for reproducible results\n */\nfunction seededRandom(seed: number): () => number {\n  let state = seed\n  return () => {\n    state = (state * 1103515245 + 12345) & 0x7fffffff\n    return state / 0x7fffffff\n  }\n}\n\n/**\n * Calculate distance from origin in a grid\n */\nfunction gridDistance(\n  index: number,\n  columns: number,\n  rows: number,\n  origin: GridStaggerConfig['origin']\n): number {\n  const col = index % columns\n  const row = Math.floor(index / columns)\n\n  let originCol: number\n  let originRow: number\n\n  switch (origin) {\n    case 'top-left':\n      originCol = 0\n      originRow = 0\n      break\n    case 'top-right':\n      originCol = columns - 1\n      originRow = 0\n      break\n    case 'bottom-left':\n      originCol = 0\n      originRow = rows - 1\n      break\n    case 'bottom-right':\n      originCol = columns - 1\n      originRow = rows - 1\n      break\n    case 'center':\n    default:\n      originCol = (columns - 1) / 2\n      originRow = (rows - 1) / 2\n      break\n  }\n\n  const dx = col - originCol\n  const dy = row - originRow\n  return Math.sqrt(dx * dx + dy * dy)\n}\n\n// ============ Stagger Pattern Functions ============\n\n/**\n * Create linear stagger delays\n *\n * @example\n * ```ts\n * const delays = linearStagger({ count: 10, delay: 0.1 })\n * // [0, 0.1, 0.2, 0.3, ...]\n * ```\n */\nexport function linearStagger(config: StaggerPatternConfig): number[] {\n  const { count, delay = 0.1, easing = (t) => t } = config\n  const delays: number[] = []\n\n  for (let i = 0; i < count; i++) {\n    const t = count > 1 ? i / (count - 1) : 0\n    delays.push(easing(t) * delay * (count - 1))\n  }\n\n  return delays\n}\n\n/**\n * Create reverse stagger delays (last to first)\n */\nexport function reverseStagger(config: StaggerPatternConfig): number[] {\n  return linearStagger(config).reverse()\n}\n\n/**\n * Create center-out stagger delays\n *\n * @example\n * ```ts\n * const delays = centerStagger({ count: 5, delay: 0.1 })\n * // Center items animate first, edges last\n * ```\n */\nexport function centerStagger(config: StaggerPatternConfig): number[] {\n  const { count, delay = 0.1, easing = (t) => t } = config\n  const delays: number[] = []\n  const center = (count - 1) / 2\n\n  for (let i = 0; i < count; i++) {\n    const distanceFromCenter = Math.abs(i - center)\n    const maxDistance = center\n    const t = maxDistance > 0 ? distanceFromCenter / maxDistance : 0\n    delays.push(easing(t) * delay * maxDistance)\n  }\n\n  return delays\n}\n\n/**\n * Create edge-in stagger delays (edges first, center last)\n */\nexport function edgeStagger(config: StaggerPatternConfig): number[] {\n  const { count, delay = 0.1, easing = (t) => t } = config\n  const delays: number[] = []\n  const center = (count - 1) / 2\n  const maxDelay = delay * center\n\n  for (let i = 0; i < count; i++) {\n    const distanceFromCenter = Math.abs(i - center)\n    const maxDistance = center\n    const t = maxDistance > 0 ? 1 - distanceFromCenter / maxDistance : 0\n    delays.push(easing(t) * maxDelay)\n  }\n\n  return delays\n}\n\n/**\n * Create grid-based stagger delays\n *\n * @example\n * ```ts\n * const delays = gridStagger({\n *   count: 12,\n *   columns: 4,\n *   origin: 'center',\n *   direction: 'radial',\n *   delay: 0.05,\n * })\n * ```\n */\nexport function gridStagger(config: GridStaggerConfig): number[] {\n  const {\n    count,\n    columns,\n    origin = 'top-left',\n    direction = 'diagonal',\n    delay = 0.1,\n    easing = (t) => t,\n  } = config\n\n  const rows = Math.ceil(count / columns)\n  const delays: number[] = []\n\n  for (let i = 0; i < count; i++) {\n    const col = i % columns\n    const row = Math.floor(i / columns)\n\n    let t: number\n\n    switch (direction) {\n      case 'row':\n        // Row by row\n        t = row / Math.max(rows - 1, 1)\n        break\n\n      case 'column':\n        // Column by column\n        t = col / Math.max(columns - 1, 1)\n        break\n\n      case 'diagonal':\n        // Diagonal wave\n        t = (col + row) / (columns + rows - 2)\n        break\n\n      case 'radial':\n      default:\n        // Distance from origin\n        const maxDistance = gridDistance(\n          origin === 'center' ? 0 : count - 1,\n          columns,\n          rows,\n          origin === 'center' ? 'top-left' : origin\n        )\n        const distance = gridDistance(i, columns, rows, origin)\n        t = maxDistance > 0 ? distance / maxDistance : 0\n        break\n    }\n\n    delays.push(easing(clamp(t, 0, 1)) * delay * Math.max(columns, rows))\n  }\n\n  return delays\n}\n\n/**\n * Create wave-based stagger delays\n *\n * @example\n * ```ts\n * const delays = waveStagger({\n *   count: 20,\n *   direction: 'horizontal',\n *   frequency: 2,\n *   amplitude: 0.5,\n *   delay: 0.1,\n * })\n * ```\n */\nexport function waveStagger(config: WaveStaggerConfig): number[] {\n  const {\n    count,\n    direction = 'horizontal',\n    frequency = 1,\n    amplitude = 0.5,\n    delay = 0.1,\n    easing = (t) => t,\n  } = config\n\n  const delays: number[] = []\n\n  for (let i = 0; i < count; i++) {\n    const t = count > 1 ? i / (count - 1) : 0\n\n    // Base linear delay\n    let d = t\n\n    // Add wave modulation\n    const waveOffset = Math.sin(t * Math.PI * 2 * frequency) * amplitude\n\n    // Apply wave based on direction\n    switch (direction) {\n      case 'horizontal':\n        d = t + waveOffset * 0.5\n        break\n      case 'vertical':\n        d = t + Math.abs(waveOffset)\n        break\n      case 'diagonal':\n        d = t + waveOffset\n        break\n    }\n\n    delays.push(easing(clamp(d, 0, 1.5)) * delay * (count - 1))\n  }\n\n  return delays\n}\n\n/**\n * Create spiral stagger delays for grid layouts\n *\n * @example\n * ```ts\n * const delays = spiralStagger({\n *   count: 16,\n *   columns: 4,\n *   direction: 'clockwise',\n *   startFrom: 'edge',\n *   delay: 0.1,\n * })\n * ```\n */\nexport function spiralStagger(config: SpiralStaggerConfig): number[] {\n  const {\n    count,\n    columns,\n    direction = 'clockwise',\n    startFrom = 'edge',\n    delay = 0.1,\n    easing = (t) => t,\n  } = config\n\n  const rows = Math.ceil(count / columns)\n  const spiral: number[] = []\n  const visited = new Set<string>()\n\n  let top = 0\n  let bottom = rows - 1\n  let left = 0\n  let right = columns - 1\n\n  // Generate spiral order\n  while (top <= bottom && left <= right) {\n    // Top row\n    for (let col = left; col <= right; col++) {\n      const idx = top * columns + col\n      if (idx < count && !visited.has(`${top},${col}`)) {\n        spiral.push(idx)\n        visited.add(`${top},${col}`)\n      }\n    }\n    top++\n\n    // Right column\n    for (let row = top; row <= bottom; row++) {\n      const idx = row * columns + right\n      if (idx < count && !visited.has(`${row},${right}`)) {\n        spiral.push(idx)\n        visited.add(`${row},${right}`)\n      }\n    }\n    right--\n\n    // Bottom row\n    if (top <= bottom) {\n      for (let col = right; col >= left; col--) {\n        const idx = bottom * columns + col\n        if (idx < count && !visited.has(`${bottom},${col}`)) {\n          spiral.push(idx)\n          visited.add(`${bottom},${col}`)\n        }\n      }\n      bottom--\n    }\n\n    // Left column\n    if (left <= right) {\n      for (let row = bottom; row >= top; row--) {\n        const idx = row * columns + left\n        if (idx < count && !visited.has(`${row},${left}`)) {\n          spiral.push(idx)\n          visited.add(`${row},${left}`)\n        }\n      }\n      left++\n    }\n  }\n\n  // Reverse for center start or counter-clockwise\n  if (startFrom === 'center') {\n    spiral.reverse()\n  }\n  if (direction === 'counter-clockwise') {\n    spiral.reverse()\n  }\n\n  // Create delay array\n  const delays = new Array(count).fill(0)\n  const maxDelay = delay * (spiral.length - 1)\n\n  spiral.forEach((originalIndex, spiralPosition) => {\n    const t = spiral.length > 1 ? spiralPosition / (spiral.length - 1) : 0\n    delays[originalIndex] = easing(t) * maxDelay\n  })\n\n  return delays\n}\n\n/**\n * Create random stagger delays\n *\n * @example\n * ```ts\n * const delays = randomStagger({\n *   count: 10,\n *   seed: 12345, // Reproducible\n *   delay: 0.1,\n *   minMultiplier: 0,\n *   maxMultiplier: 1,\n * })\n * ```\n */\nexport function randomStagger(config: RandomStaggerConfig): number[] {\n  const {\n    count,\n    seed = Date.now(),\n    delay = 0.1,\n    minMultiplier = 0,\n    maxMultiplier = 1,\n    easing = (t) => t,\n  } = config\n\n  const random = seededRandom(seed)\n  const delays: number[] = []\n  const maxDelay = delay * (count - 1)\n\n  for (let i = 0; i < count; i++) {\n    const r = random()\n    const multiplier = minMultiplier + r * (maxMultiplier - minMultiplier)\n    delays.push(easing(multiplier) * maxDelay)\n  }\n\n  return delays\n}\n\n/**\n * Create custom stagger delays using a function\n *\n * @example\n * ```ts\n * const delays = customStagger({\n *   count: 10,\n *   delay: 0.1,\n * }, (index, total) => {\n *   // Custom pattern: faster in middle\n *   const center = (total - 1) / 2\n *   return 1 - Math.abs(index - center) / center\n * })\n * ```\n */\nexport function customStagger(\n  config: StaggerPatternConfig,\n  fn: CustomStaggerFn\n): number[] {\n  const { count, delay = 0.1 } = config\n  const delays: number[] = []\n  const maxDelay = delay * (count - 1)\n\n  for (let i = 0; i < count; i++) {\n    const t = fn(i, count)\n    delays.push(clamp(t, 0, 1) * maxDelay)\n  }\n\n  return delays\n}\n\n// ============ Stagger Utilities ============\n\n/**\n * Apply stagger delays to animation options\n *\n * @example\n * ```ts\n * const items = document.querySelectorAll('.item')\n * const delays = gridStagger({ count: items.length, columns: 4 })\n *\n * items.forEach((item, i) => {\n *   spring(item, { opacity: 1 }, { delay: delays[i] })\n * })\n * ```\n */\nexport function applyStagger<T extends { delay?: number }>(\n  options: T[],\n  delays: number[]\n): T[] {\n  return options.map((opt, i) => ({\n    ...opt,\n    delay: (opt.delay ?? 0) + (delays[i] ?? 0),\n  }))\n}\n\n/**\n * Stagger pattern presets\n */\nexport const staggerPresets = {\n  /** Quick cascade from first to last */\n  cascade: (count: number) => linearStagger({ count, delay: 0.05 }),\n\n  /** Slow reveal from first to last */\n  reveal: (count: number) => linearStagger({ count, delay: 0.15 }),\n\n  /** Pop from center outward */\n  pop: (count: number) => centerStagger({ count, delay: 0.08 }),\n\n  /** Ripple from edges to center */\n  ripple: (count: number) => edgeStagger({ count, delay: 0.08 }),\n\n  /** Random scatter effect */\n  scatter: (count: number) => randomStagger({ count, delay: 0.1, seed: 42 }),\n\n  /** Grid diagonal wave */\n  gridWave: (count: number, columns: number) =>\n    gridStagger({ count, columns, direction: 'diagonal', delay: 0.05 }),\n\n  /** Grid radial from center */\n  gridRadial: (count: number, columns: number) =>\n    gridStagger({ count, columns, origin: 'center', direction: 'radial', delay: 0.05 }),\n\n  /** Spiral inward */\n  spiralIn: (count: number, columns: number) =>\n    spiralStagger({ count, columns, startFrom: 'edge', delay: 0.05 }),\n\n  /** Spiral outward */\n  spiralOut: (count: number, columns: number) =>\n    spiralStagger({ count, columns, startFrom: 'center', delay: 0.05 }),\n}\n","/**\n * MotionValue - High-performance animated value without React re-renders\n *\n * Unlike React state, MotionValue updates don't trigger component re-renders.\n * This makes it ideal for high-frequency animations like drag, scroll, and gestures.\n *\n * @example\n * ```ts\n * const x = createMotionValue(0)\n *\n * // Subscribe to changes (no React re-render)\n * x.on('change', (value) => {\n *   element.style.transform = `translateX(${value}px)`\n * })\n *\n * // Update value\n * x.set(100)  // Triggers spring animation\n * x.jump(100) // Instant update, no animation\n * ```\n */\n\nimport { createSpringValue } from './spring-value.js'\nimport type { SpringConfig } from '../types.js'\n\nexport type MotionValueSubscriber<T> = (value: T) => void\nexport type MotionValueEvent = 'change' | 'animationStart' | 'animationEnd'\n\nexport interface MotionValueOptions {\n  /** Spring configuration for animated transitions */\n  spring?: SpringConfig\n}\n\n/**\n * MotionValue class - Performant animated values\n *\n * Key advantages over React state:\n * - No re-renders on value change\n * - Direct DOM manipulation for 60fps animations\n * - Chainable with useTransform\n * - Memory efficient with automatic cleanup\n */\nexport class MotionValue<T = number> {\n  private _value: T\n  private _velocity: number = 0\n  private _subscribers: Set<MotionValueSubscriber<T>> = new Set()\n  private _eventListeners: Map<MotionValueEvent, Set<() => void>> = new Map()\n  private _springValue: ReturnType<typeof createSpringValue> | null = null\n  private _springConfig: SpringConfig\n  private _isAnimating: boolean = false\n  private _destroyed: boolean = false\n\n  constructor(initialValue: T, options: MotionValueOptions = {}) {\n    this._value = initialValue\n    this._springConfig = options.spring ?? { stiffness: 100, damping: 15 }\n\n    // Initialize spring for numeric values\n    if (typeof initialValue === 'number') {\n      this._springValue = createSpringValue(initialValue as number, {\n        ...this._springConfig,\n        onUpdate: (v: number) => {\n          if (this._destroyed) return\n          this._value = v as T\n          this._velocity = this._springValue?.getVelocity() ?? 0\n          this._notify()\n        },\n      })\n    }\n  }\n\n  /**\n   * Get current value synchronously\n   */\n  get(): T {\n    return this._value\n  }\n\n  /**\n   * Get current velocity (for numeric values)\n   */\n  getVelocity(): number {\n    return this._velocity\n  }\n\n  /**\n   * Check if currently animating\n   */\n  isAnimating(): boolean {\n    return this._isAnimating\n  }\n\n  /**\n   * Set value with spring animation\n   */\n  set(newValue: T, animate: boolean = true): void {\n    if (this._destroyed) return\n\n    if (typeof newValue === 'number' && this._springValue && animate) {\n      this._isAnimating = true\n      this._emit('animationStart')\n\n      this._springValue.set(newValue as number)\n\n      // Check for animation end\n      const checkEnd = () => {\n        if (this._springValue && Math.abs(this._springValue.getVelocity()) < 0.01) {\n          this._isAnimating = false\n          this._emit('animationEnd')\n        } else if (this._isAnimating) {\n          requestAnimationFrame(checkEnd)\n        }\n      }\n      requestAnimationFrame(checkEnd)\n    } else {\n      this._value = newValue\n      this._velocity = 0\n      this._notify()\n    }\n  }\n\n  /**\n   * Instantly set value without animation\n   */\n  jump(newValue: T): void {\n    if (this._destroyed) return\n\n    this._value = newValue\n    this._velocity = 0\n\n    if (typeof newValue === 'number' && this._springValue) {\n      this._springValue.jump(newValue as number)\n    }\n\n    this._isAnimating = false\n    this._notify()\n  }\n\n  /**\n   * Stop any running animation\n   */\n  stop(): void {\n    // SpringValue doesn't have stop(), so we jump to current value\n    if (this._springValue) {\n      this._springValue.jump(this._springValue.get())\n    }\n    this._isAnimating = false\n    this._emit('animationEnd')\n  }\n\n  /**\n   * Subscribe to value changes\n   * Returns unsubscribe function\n   */\n  subscribe(callback: MotionValueSubscriber<T>): () => void {\n    this._subscribers.add(callback)\n\n    // Immediately call with current value\n    callback(this._value)\n\n    return () => {\n      this._subscribers.delete(callback)\n    }\n  }\n\n  /**\n   * Add event listener\n   */\n  on(event: MotionValueEvent, callback: () => void): () => void {\n    if (!this._eventListeners.has(event)) {\n      this._eventListeners.set(event, new Set())\n    }\n    this._eventListeners.get(event)!.add(callback)\n\n    return () => {\n      this._eventListeners.get(event)?.delete(callback)\n    }\n  }\n\n  /**\n   * Update spring configuration\n   */\n  setConfig(config: Partial<SpringConfig>): void {\n    this._springConfig = { ...this._springConfig, ...config }\n    // Note: Config change takes effect on next animation\n  }\n\n  /**\n   * Destroy and cleanup\n   */\n  destroy(): void {\n    this._destroyed = true\n    this._subscribers.clear()\n    this._eventListeners.clear()\n\n    if (this._springValue) {\n      this._springValue.destroy()\n      this._springValue = null\n    }\n  }\n\n  private _notify(): void {\n    this._subscribers.forEach((callback) => {\n      try {\n        callback(this._value)\n      } catch (e) {\n        console.error('MotionValue subscriber error:', e)\n      }\n    })\n    this._emit('change')\n  }\n\n  private _emit(event: MotionValueEvent): void {\n    this._eventListeners.get(event)?.forEach((callback) => {\n      try {\n        callback()\n      } catch (e) {\n        console.error(`MotionValue ${event} listener error:`, e)\n      }\n    })\n  }\n}\n\n/**\n * Create a new MotionValue\n *\n * @example\n * ```ts\n * const x = createMotionValue(0)\n * const opacity = createMotionValue(1)\n * const scale = createMotionValue(1, { spring: { stiffness: 300, damping: 30 } })\n * ```\n */\nexport function createMotionValue<T = number>(\n  initialValue: T,\n  options?: MotionValueOptions\n): MotionValue<T> {\n  return new MotionValue(initialValue, options)\n}\n\n/**\n * Transform a MotionValue using a mapping function\n *\n * Creates a derived MotionValue that automatically updates\n * when the source value changes.\n *\n * @example\n * ```ts\n * const x = createMotionValue(0)\n * const opacity = transformValue(x, (v) => 1 - v / 100)\n * const inverted = transformValue(x, (v) => -v)\n * ```\n */\nexport function transformValue<T, U>(\n  source: MotionValue<T>,\n  transform: (value: T) => U\n): MotionValue<U> {\n  const derived = new MotionValue<U>(transform(source.get()))\n\n  source.subscribe((value) => {\n    derived.jump(transform(value))\n  })\n\n  return derived\n}\n\n/**\n * Map a MotionValue from one range to another\n *\n * @example\n * ```ts\n * const x = createMotionValue(0)\n * // Map 0-100 to 0-1\n * const progress = mapRange(x, [0, 100], [0, 1])\n * // Map with extrapolation clamped\n * const clamped = mapRange(x, [0, 100], [0, 1], { clamp: true })\n * ```\n */\nexport function mapRange(\n  source: MotionValue<number>,\n  inputRange: [number, number],\n  outputRange: [number, number],\n  options: { clamp?: boolean } = {}\n): MotionValue<number> {\n  const [inMin, inMax] = inputRange\n  const [outMin, outMax] = outputRange\n\n  return transformValue(source, (value) => {\n    let normalized = (value - inMin) / (inMax - inMin)\n\n    if (options.clamp) {\n      normalized = Math.max(0, Math.min(1, normalized))\n    }\n\n    return outMin + normalized * (outMax - outMin)\n  })\n}\n","import { createSpringValue } from '../core/spring-value.js'\nimport type { SpringConfig } from '../types.js'\n\n/**\n * Options for path animation\n */\nexport interface PathAnimationOptions {\n  /** Spring configuration */\n  config?: SpringConfig\n  /** Whether to auto-play on creation */\n  autoPlay?: boolean\n  /** Callback for value updates */\n  onUpdate?: (value: number) => void\n  /** Callback when animation completes */\n  onComplete?: () => void\n}\n\n/**\n * Path animation controller\n */\nexport interface PathAnimation {\n  /** Start the animation from 0 to target */\n  play: (target?: number) => Promise<void>\n  /** Reverse the animation */\n  reverse: () => Promise<void>\n  /** Set path length directly (0-1) */\n  set: (value: number, animate?: boolean) => void\n  /** Get current path length */\n  get: () => number\n  /** Pause the animation */\n  pause: () => void\n  /** Resume the animation */\n  resume: () => void\n  /** Stop and reset */\n  reset: () => void\n  /** Check if animating */\n  isAnimating: () => boolean\n  /** Destroy and cleanup */\n  destroy: () => void\n}\n\n/**\n * Create a path length animation for SVG stroke drawing effects.\n * Animates stroke-dashoffset to reveal/hide a path.\n *\n * @example Basic path drawing\n * ```ts\n * const pathAnim = createPathAnimation(pathElement, {\n *   config: { stiffness: 100, damping: 15 },\n * })\n *\n * // Draw the path\n * await pathAnim.play()\n *\n * // Erase the path\n * await pathAnim.reverse()\n * ```\n *\n * @example With offset control\n * ```ts\n * const anim = createPathAnimation(path)\n *\n * // Draw 50% of the path\n * anim.set(0.5)\n *\n * // Draw full path with animation\n * anim.set(1, true)\n * ```\n */\nexport function createPathAnimation(\n  element: SVGPathElement | SVGCircleElement | SVGRectElement | SVGLineElement | SVGPolylineElement | SVGPolygonElement | SVGEllipseElement,\n  options: PathAnimationOptions = {}\n): PathAnimation {\n  const {\n    config = {},\n    autoPlay = false,\n    onUpdate,\n    onComplete,\n  } = options\n\n  // Get total path length\n  const totalLength = element.getTotalLength?.() ?? 0\n\n  // Set initial stroke properties\n  element.style.strokeDasharray = String(totalLength)\n  element.style.strokeDashoffset = String(totalLength)\n\n  let currentValue = 0\n  let destroyed = false\n  const spring = createSpringValue(0, config)\n\n  // Subscribe to updates\n  const unsubscribe = spring.subscribe((value) => {\n    if (destroyed) return\n\n    currentValue = value\n    // Convert 0-1 to offset (1 = hidden, 0 = visible)\n    const offset = totalLength * (1 - value)\n    element.style.strokeDashoffset = String(offset)\n    onUpdate?.(value)\n  })\n\n  const waitForRest = (): Promise<void> => {\n    return new Promise((resolve) => {\n      const check = () => {\n        if (destroyed || !spring.isAnimating()) {\n          resolve()\n        } else {\n          requestAnimationFrame(check)\n        }\n      }\n      setTimeout(check, 16)\n    })\n  }\n\n  const animation: PathAnimation = {\n    play: async (target = 1) => {\n      if (destroyed) return\n      spring.set(target)\n      await waitForRest()\n      onComplete?.()\n    },\n\n    reverse: async () => {\n      if (destroyed) return\n      spring.set(0)\n      await waitForRest()\n      onComplete?.()\n    },\n\n    set: (value: number, animate = false) => {\n      if (destroyed) return\n\n      if (animate) {\n        spring.set(value)\n      } else {\n        spring.jump(value)\n        currentValue = value\n        const offset = totalLength * (1 - value)\n        element.style.strokeDashoffset = String(offset)\n      }\n    },\n\n    get: () => currentValue,\n\n    pause: () => {\n      if (destroyed) return\n      spring.stop()\n    },\n\n    resume: () => {\n      if (destroyed) return\n      // Resume by re-setting target\n      spring.set(currentValue)\n    },\n\n    reset: () => {\n      if (destroyed) return\n      spring.jump(0)\n      currentValue = 0\n      element.style.strokeDashoffset = String(totalLength)\n    },\n\n    isAnimating: () => spring.isAnimating(),\n\n    destroy: () => {\n      destroyed = true\n      unsubscribe()\n      spring.destroy()\n    },\n  }\n\n  if (autoPlay) {\n    animation.play()\n  }\n\n  return animation\n}\n\n/**\n * Get the total length of an SVG path element\n */\nexport function getPathLength(\n  element: SVGPathElement | SVGCircleElement | SVGRectElement | SVGLineElement | SVGPolylineElement | SVGPolygonElement | SVGEllipseElement\n): number {\n  return element.getTotalLength?.() ?? 0\n}\n\n/**\n * Set up an element for path animation (sets dasharray and dashoffset)\n */\nexport function preparePathForAnimation(\n  element: SVGPathElement | SVGCircleElement | SVGRectElement | SVGLineElement | SVGPolylineElement | SVGPolygonElement | SVGEllipseElement,\n  initialProgress = 0\n): void {\n  const length = element.getTotalLength?.() ?? 0\n  element.style.strokeDasharray = String(length)\n  element.style.strokeDashoffset = String(length * (1 - initialProgress))\n}\n\n/**\n * Calculate the point on a path at a given percentage\n */\nexport function getPointAtProgress(\n  path: SVGPathElement,\n  progress: number\n): DOMPoint | null {\n  try {\n    const length = path.getTotalLength()\n    return path.getPointAtLength(length * Math.max(0, Math.min(1, progress)))\n  } catch {\n    return null\n  }\n}\n","import { createSpringValue } from '../core/spring-value.js'\nimport type { SpringConfig } from '../types.js'\n\n/**\n * Measured box dimensions\n */\nexport interface MeasuredBox {\n  x: number\n  y: number\n  width: number\n  height: number\n}\n\n/**\n * FLIP animation options\n */\nexport interface FlipOptions {\n  /** Spring configuration */\n  config?: SpringConfig\n  /** Whether to animate position */\n  position?: boolean\n  /** Whether to animate size */\n  size?: boolean\n  /** Callback when animation completes */\n  onComplete?: () => void\n  /** Callback for value updates */\n  onUpdate?: (progress: number) => void\n}\n\n/**\n * FLIP animation controller\n */\nexport interface FlipAnimation {\n  /** Play the FLIP animation */\n  play: () => Promise<void>\n  /** Get current progress (0-1) */\n  getProgress: () => number\n  /** Cancel the animation */\n  cancel: () => void\n  /** Check if animating */\n  isAnimating: () => boolean\n}\n\n/**\n * Measure the bounding box of an element\n */\nexport function measureElement(element: HTMLElement): MeasuredBox {\n  const rect = element.getBoundingClientRect()\n  return {\n    x: rect.left + window.scrollX,\n    y: rect.top + window.scrollY,\n    width: rect.width,\n    height: rect.height,\n  }\n}\n\n/**\n * Create a FLIP (First, Last, Invert, Play) animation.\n *\n * FLIP is a technique for animating layout changes performantly:\n * 1. First: Measure the element's initial position\n * 2. Last: Apply the change and measure final position\n * 3. Invert: Apply transforms to make it look like it's still in the first position\n * 4. Play: Animate the transforms to zero\n *\n * @example Basic FLIP\n * ```ts\n * // Measure first position\n * const first = measureElement(element)\n *\n * // Make layout change\n * element.classList.toggle('expanded')\n *\n * // Measure last position\n * const last = measureElement(element)\n *\n * // Create and play FLIP animation\n * const flip = createFlip(element, first, last)\n * await flip.play()\n * ```\n *\n * @example With options\n * ```ts\n * const flip = createFlip(element, first, last, {\n *   config: { stiffness: 300, damping: 30 },\n *   position: true,  // Animate position\n *   size: true,      // Animate size\n *   onComplete: () => console.log('Done!'),\n * })\n * ```\n */\nexport function createFlip(\n  element: HTMLElement,\n  first: MeasuredBox,\n  last: MeasuredBox,\n  options: FlipOptions = {}\n): FlipAnimation {\n  const {\n    config = {},\n    position = true,\n    size = true,\n    onComplete,\n    onUpdate,\n  } = options\n\n  // Calculate the inversion (how much to transform to get back to \"first\")\n  const deltaX = first.x - last.x\n  const deltaY = first.y - last.y\n  const deltaWidth = first.width / last.width\n  const deltaHeight = first.height / last.height\n\n  let progress = 0\n  let isPlaying = false\n  let cancelled = false\n\n  const spring = createSpringValue(0, config)\n\n  // Store original transform\n  const originalTransform = element.style.transform\n  const originalTransformOrigin = element.style.transformOrigin\n\n  // Set transform origin to top-left for size animations\n  if (size) {\n    element.style.transformOrigin = '0 0'\n  }\n\n  const applyTransform = (t: number) => {\n    progress = t\n    const invertedT = 1 - t\n\n    const transforms: string[] = []\n\n    if (position) {\n      transforms.push(`translate(${deltaX * invertedT}px, ${deltaY * invertedT}px)`)\n    }\n\n    if (size && (deltaWidth !== 1 || deltaHeight !== 1)) {\n      const scaleX = 1 + (deltaWidth - 1) * invertedT\n      const scaleY = 1 + (deltaHeight - 1) * invertedT\n      transforms.push(`scale(${scaleX}, ${scaleY})`)\n    }\n\n    element.style.transform = transforms.length > 0 ? transforms.join(' ') : ''\n    onUpdate?.(t)\n  }\n\n  // Apply initial inversion\n  applyTransform(0)\n\n  const cleanup = () => {\n    // Restore original styles\n    element.style.transform = originalTransform\n    element.style.transformOrigin = originalTransformOrigin\n  }\n\n  return {\n    play: async () => {\n      if (cancelled) return\n\n      isPlaying = true\n\n      return new Promise<void>((resolve) => {\n        const unsubscribe = spring.subscribe((value) => {\n          if (cancelled) {\n            unsubscribe()\n            resolve()\n            return\n          }\n          applyTransform(value)\n        })\n\n        spring.set(1)\n\n        // Wait for animation to complete\n        const checkComplete = () => {\n          if (cancelled) {\n            unsubscribe()\n            cleanup()\n            resolve()\n            return\n          }\n\n          if (!spring.isAnimating()) {\n            isPlaying = false\n            unsubscribe()\n            cleanup()\n            onComplete?.()\n            resolve()\n          } else {\n            requestAnimationFrame(checkComplete)\n          }\n        }\n\n        setTimeout(checkComplete, 16)\n      })\n    },\n\n    getProgress: () => progress,\n\n    cancel: () => {\n      cancelled = true\n      isPlaying = false\n      spring.stop()\n      cleanup()\n    },\n\n    isAnimating: () => isPlaying,\n  }\n}\n\n/**\n * Higher-level helper that handles the full FLIP flow.\n * Automatically measures before/after states.\n *\n * @example\n * ```ts\n * await flip(element, () => {\n *   element.classList.toggle('expanded')\n * }, { config: { stiffness: 200 } })\n * ```\n */\nexport async function flip(\n  element: HTMLElement,\n  mutate: () => void | Promise<void>,\n  options: FlipOptions = {}\n): Promise<void> {\n  // First: measure initial state\n  const first = measureElement(element)\n\n  // Last: apply mutation and measure final state\n  await mutate()\n\n  // Force layout recalculation\n  // eslint-disable-next-line @typescript-eslint/no-unused-expressions\n  element.offsetHeight\n\n  const last = measureElement(element)\n\n  // Invert & Play\n  const animation = createFlip(element, first, last, options)\n  await animation.play()\n}\n\n/**\n * Batch FLIP animations for multiple elements.\n * Useful when multiple elements change position together.\n *\n * @example\n * ```ts\n * await flipBatch(\n *   [card1, card2, card3],\n *   () => container.classList.toggle('grid'),\n *   { config: { stiffness: 150 } }\n * )\n * ```\n */\nexport async function flipBatch(\n  elements: HTMLElement[],\n  mutate: () => void | Promise<void>,\n  options: FlipOptions = {}\n): Promise<void> {\n  // First: measure all elements\n  const firstStates = elements.map((el) => measureElement(el))\n\n  // Last: apply mutation\n  await mutate()\n\n  // Force layout recalculation\n  // eslint-disable-next-line @typescript-eslint/no-unused-expressions\n  document.body.offsetHeight\n\n  // Measure all final states and create animations\n  const animations = elements.map((element, i) => {\n    const last = measureElement(element)\n    return createFlip(element, firstStates[i]!, last, options)\n  })\n\n  // Play all animations\n  await Promise.all(animations.map((anim) => anim.play()))\n}\n"]}