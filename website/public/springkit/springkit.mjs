var f={stiffness:100,damping:10,mass:1,velocity:0,restSpeed:.01,restDelta:.01,clamp:false},q={default:{stiffness:100,damping:10},gentle:{stiffness:120,damping:14},wobbly:{stiffness:180,damping:12},stiff:{stiffness:210,damping:20},slow:{stiffness:280,damping:60},molasses:{stiffness:280,damping:120},bounce:{stiffness:200,damping:8},noWobble:{stiffness:170,damping:26}};function G(n){return n<300?{stiffness:170,damping:26}:n<500?{stiffness:100,damping:20}:{stiffness:80,damping:15}}function z(n){return n<=0?{stiffness:170,damping:26}:n<=.25?{stiffness:200,damping:12}:{stiffness:200,damping:8}}function T(n,e,t,i){let{stiffness:r=100,damping:s=10,mass:o=1,restSpeed:a=.01,restDelta:l=.01}=i,p=t-n,u=Math.abs(p),m=Math.abs(e);if(u<=l&&m<=a)return {position:t,velocity:0,isRest:true};let c=1/60,y=r*p,k=m>1e-4?s*e:0,H=(y-k)/o,M=e+H*c,W=n+M*c,B=u<=l&&Math.abs(M)<=a;return {position:W,velocity:M,isRest:B}}function N(n,e){return 2*Math.PI*Math.sqrt(e/n)}function x(n,e,t){return n/(2*Math.sqrt(e*t))}function K(n){let{stiffness:e=100,damping:t=10,mass:i=1}=n;return x(t,e,i)<1}function J(n){let{stiffness:e=100,damping:t=10,mass:i=1}=n,r=x(t,e,i);return Math.abs(r-1)<.001}function Q(n){let{stiffness:e=100,damping:t=10,mass:i=1}=n;return x(t,e,i)>1}var S=(r=>(r.Idle="idle",r.Running="running",r.Paused="paused",r.Complete="complete",r))(S||{});var P=class{constructor(){this.animations=new Set;this.animationMap=new WeakMap;this.rafId=null;this.isRunning=false;this.lastTime=0;this.nextId=1;this.idMap=new WeakMap;this.frameListeners=new Set;this.registry=new FinalizationRegistry(e=>{this.cleanupCallbacks.forEach(t=>t(e));});this.cleanupCallbacks=new Set;this.tick=()=>{let e=performance.now(),t=e-this.lastTime,i=Math.min(t,64);this.lastTime=e;for(let s of this.frameListeners)s(i);let r=[];for(let s of this.animations){let o=s.deref();if(!o){r.push(s);continue}o.update(e),o.isComplete()&&(r.push(s),this.animationMap.delete(o),this.idMap.delete(o));}for(let s=0;s<r.length;s++)this.animations.delete(r[s]);this.animations.size>0?this.rafId=requestAnimationFrame(this.tick):this.stop();};}add(e){let t=this.idMap.get(e);if(t!==void 0)return t;let i=this.nextId++,r=new WeakRef(e);return this.animations.add(r),this.animationMap.set(e,r),this.idMap.set(e,i),this.registry.register(e,i),this.start(),i}remove(e){let t=this.animationMap.get(e);t&&(this.animations.delete(t),this.animationMap.delete(e),this.idMap.delete(e)),this.animations.size===0&&this.stop();}onCleanup(e){return this.cleanupCallbacks.add(e),()=>this.cleanupCallbacks.delete(e)}onFrame(e){return this.frameListeners.add(e),()=>this.frameListeners.delete(e)}start(){this.isRunning||(this.isRunning=true,this.lastTime=performance.now(),this.tick());}stop(){this.isRunning=false,this.rafId!==null&&(cancelAnimationFrame(this.rafId),this.rafId=null);}get size(){return this.animations.size}getAliveCount(){let e=0;for(let t of this.animations)t.deref()&&e++;return e}getFPS(){let e=performance.now()-this.lastTime;return e>0?Math.round(1e3/e):60}},g=new P;function b(n,e,t){let i=Math.min(e,t),r=Math.max(e,t);return Math.max(i,Math.min(r,n))}function Z(n,e,t){return n+(e-n)*t}function ee(n,e,t,i,r){return (n-e)*(r-i)/(t-e)+i}function te(n){return n*Math.PI/180}function ie(n){return n*180/Math.PI}var C=typeof process<"u"&&process.env?.NODE_ENV!=="production",V=new Set;function d(n){!C||V.has(n)||(V.add(n),console.warn(`[SpringKit] ${n}`));}function D(n){if(!C)return;let{stiffness:e=100,damping:t=10,mass:i=1}=n;e>400&&t<10&&d(`High stiffness (${e}) with low damping (${t}) may cause excessive oscillation. Consider increasing damping to at least ${Math.round(e/20)} for smoother animation.`),e<20&&d(`Very low stiffness (${e}) will result in sluggish animation. Consider using stiffness >= 50 for more responsive feel.`),t>e&&d(`Damping (${t}) is higher than stiffness (${e}), which removes the "springy" feel. Consider reducing damping for bouncier animation.`),i<=0&&d(`Mass must be positive. Got ${i}. Using default mass of 1.`),i>10&&d(`High mass (${i}) will make the animation very slow. Consider mass between 0.5 and 5 for typical use cases.`);}function ne(n){if(!C)return;let{rubberBandFactor:e,bounds:t}=n;e!==void 0&&(e<0||e>1)&&d(`rubberBandFactor should be between 0 and 1. Got ${e}. Values outside this range may cause unexpected behavior.`),t&&(t.left!==void 0&&t.right!==void 0&&t.left>t.right&&d(`Drag bounds are inverted: left (${t.left}) > right (${t.right}). This may cause unexpected behavior.`),t.top!==void 0&&t.bottom!==void 0&&t.top>t.bottom&&d(`Drag bounds are inverted: top (${t.top}) > bottom (${t.bottom}). This may cause unexpected behavior.`));}function w(n){if(!C)return;let{velocity:e,deceleration:t=.998}=n;e===0&&d("Decay animation started with zero velocity. The animation will complete immediately."),(t<=0||t>=1)&&d(`Deceleration should be between 0 and 1 (exclusive). Got ${t}. Typical values are 0.99-0.999.`);}function re(){V.clear();}var A=class{constructor(e,t,i={}){this.state="idle";this.resolveComplete=null;D(i),this.from=e,this.to=t,this.clampedFrom=e,this.clampedTo=t,this.position=e,this.velocity=i.velocity??0,this.target=t,this.config={...f,...i,stiffness:i.stiffness??f.stiffness,damping:i.damping??f.damping,mass:i.mass??f.mass,restSpeed:i.restSpeed??f.restSpeed,restDelta:i.restDelta??f.restDelta},this.finished=new Promise(r=>{this.resolveComplete=r;});}start(){return this.state==="running"?this:(this.state="running",this.config.onStart?.(),g.add(this),this)}stop(){this.state="idle",g.remove(this);}pause(){this.state==="running"&&(this.state="paused",g.remove(this));}resume(){this.state==="paused"&&(this.state="running",g.add(this));}reverse(){let e=this.from;this.from=this.to,this.to=e,this.clampedFrom=this.from,this.clampedTo=this.to,this.target=this.to;}set(e){this.to=e,this.clampedTo=e,this.target=e;}setWithVelocity(e,t){this.from=this.position,this.clampedFrom=this.position,this.to=e,this.clampedTo=e,this.target=e,t!==void 0&&(this.velocity=t),this.state!=="running"&&this.start();}update(e){if(this.state!=="running")return;let t=T(this.position,this.velocity,this.target,this.config);if(this.position=t.position,this.velocity=t.velocity,this.config.clamp){let i=Math.min(this.clampedFrom,this.clampedTo),r=Math.max(this.clampedFrom,this.clampedTo);this.position=b(this.position,i,r);}this.config.onUpdate?.(this.position),t.isRest&&(this.state="complete",g.remove(this),this.position=this.target,this.config.onUpdate?.(this.position),this.config.onComplete?.(),this.config.onRest?.(),this.resolveComplete?.());}isAnimating(){return this.state==="running"}isPaused(){return this.state==="paused"}isComplete(){return this.state==="complete"}getValue(){return this.position}getVelocity(){return this.velocity}destroy(){this.stop(),this.config.onUpdate=void 0,this.config.onStart=void 0,this.config.onComplete=void 0,this.config.onRest=void 0;}};function _(n,e,t){return new A(n,e,t)}var R=class{constructor(e,t={}){this.currentAnimation=null;this.subscribers=new Set;this.resolveComplete=null;this.value=e,this.config={...f,...t},this.finishedPromise=new Promise(i=>{this.resolveComplete=i;});}get(){return this.value}getVelocity(){return this.currentAnimation?.getVelocity()??0}set(e,t={}){this.currentAnimation&&(this.currentAnimation.destroy(),this.currentAnimation=null),this.finishedPromise=new Promise(o=>{this.resolveComplete=o;});let i={...this.config,...t},r=i.onUpdate,s=i.onComplete;this.currentAnimation=_(this.value,e,{...i,onUpdate:o=>{this.value=o,this.notify(),r?.(o);},onComplete:()=>{s?.(),this.resolveComplete&&this.resolveComplete();}}),this.currentAnimation.start();}jump(e){this.currentAnimation&&(this.currentAnimation.destroy(),this.currentAnimation=null),this.value=e,this.notify();}subscribe(e){return this.subscribers.add(e),e(this.value),()=>{this.subscribers.delete(e);}}isAnimating(){return this.currentAnimation?.isAnimating()??false}get finished(){return this.finishedPromise}notify(){for(let e of this.subscribers)e(this.value);}destroy(){this.currentAnimation?.destroy(),this.currentAnimation=null,this.subscribers.clear();}};function h(n,e){return new R(n,e)}var I=class{constructor(e,t={}){this.subscribers=new Set;this.resolveComplete=null;this.config={...f,...t},this.values=new Map;for(let[i,r]of Object.entries(e)){let s=h(r,this.config);s.subscribe(()=>this.notify()),this.values.set(i,s);}this.finishedPromise=Promise.resolve(),this.resetPromise();}resetPromise(){this.finishedPromise=new Promise(e=>{this.resolveComplete=e;});}get(){let e={};for(let[t,i]of this.values)e[t]=i.get();return e}getValue(e){return this.values.get(e)?.get()??0}set(e,t={}){this.resetPromise();let i=[];for(let[r,s]of Object.entries(e)){let o=this.values.get(r);o&&(o.set(s,t),i.push(o.finished));}Promise.all(i).then(()=>{this.resolveComplete&&this.resolveComplete();});}jump(e){for(let[t,i]of Object.entries(e)){let r=this.values.get(t);r&&r.jump(i);}}subscribe(e){return this.subscribers.add(e),e(this.get()),()=>this.subscribers.delete(e)}isAnimating(){for(let e of this.values.values())if(e.isAnimating())return  true;return  false}get finished(){return this.finishedPromise}notify(){let e=this.get();for(let t of this.subscribers)t(e);}destroy(){for(let e of this.values.values())e.destroy();this.subscribers.clear();}};function se(n,e){return new I(n,e)}async function oe(n){for(let e of n)await e().finished;}async function ae(n){let e=n.map(t=>t().finished);await Promise.all(e);}async function le(n,e,t={}){let{delay:i=0,from:r="first"}=t,s=0;r==="last"?s=n.length-1:r==="center"?s=Math.floor(n.length/2):typeof r=="number"&&(s=r);let o=[],a=new Set;o.push(s),a.add(s);for(let u=1;u<n.length;u++){let m=s-u,c=s+u;c<n.length&&!a.has(c)&&(o.push(c),a.add(c)),m>=0&&!a.has(m)&&(o.push(m),a.add(m));}let l=typeof i=="function"?i:u=>i,p=[];for(let u=0;u<o.length;u++){let m=o[u],c=e(n[m],m);p.push(c);let y=l(u);y>0?setTimeout(()=>{c.start();},y):c.start();}await Promise.all(p.map(u=>u.finished));}var E=class{constructor(e,t={}){this.subscribers=new Set;this.frameCount=0;this.pendingUpdates=new Map;let{followDelay:i=2,...r}=t;this.followDelay=i,this.leader=h(0,r),this.springs=[];for(let s=0;s<e;s++){let o=h(0,r);this.springs.push(o);}this.leader.subscribe(()=>{this.frameCount++,this.scheduleFollowerUpdates();});}scheduleFollowerUpdates(){let e=this.leader.get();for(let t=0;t<this.springs.length;t++){let i=(t+1)*this.followDelay,r=this.frameCount+i;this.pendingUpdates.set(t,r),this.scheduleFollowerUpdate(t,e,r,i);}}scheduleFollowerUpdate(e,t,i,r){let s=this.frameCount,o=i-s;if(o<=0)this.springs[e].set(t);else {let a=Math.max(o*16,0);setTimeout(()=>{this.pendingUpdates.get(e)===i&&this.springs[e].set(t);},a);}}set(e){this.leader.set(e);}jump(e){this.leader.jump(e);for(let t of this.springs)t.jump(e);}getValues(){return this.springs.map(e=>e.get())}subscribe(e){this.subscribers.add(e);let t=[];for(let i of this.springs)t.push(i.subscribe(()=>{this.notify();}));return e(this.getValues()),()=>{this.subscribers.delete(e);for(let i of t)i();}}notify(){let e=this.getValues();for(let t of this.subscribers)t(e);}destroy(){this.leader.destroy();for(let e of this.springs)e.destroy();this.subscribers.clear(),this.pendingUpdates.clear();}};function ue(n,e){return new E(n,e)}var L=class{constructor(e){this.state="idle";this.rafId=null;this.resolveComplete=null;w(e),this.value=0,this.velocity=e.velocity,this.deceleration=e.deceleration??.998,this.clampRange=e.clamp,this.state="idle",this.config=e,this.finished=new Promise(t=>{this.resolveComplete=t;});}start(){return this.state==="running"?this:(this.state="running",g.add(this),this)}stop(){this.state="idle",g.remove(this);}update(e){if(this.state==="running"){if(this.velocity*=this.deceleration,this.value+=this.velocity,this.clampRange){let[t,i]=this.clampRange;this.value=b(this.value,t,i),(this.value<=t&&this.velocity<0||this.value>=i&&this.velocity>0)&&(this.velocity=0);}this.config.onUpdate?.(this.value),Math.abs(this.velocity)<.01&&(this.state="complete",g.remove(this),this.config.onComplete?.(),this.resolveComplete?.());}}isComplete(){return this.state==="complete"}destroy(){this.stop(),this.config.onUpdate=void 0,this.config.onComplete=void 0;}};function pe(n){return new L(n)}var me={clamp:false},U=class{constructor(e,t,i,r={}){this.source=e,this.input=t,this.output=i,this.options={...me,...r};}get(){let e=typeof this.source=="function"?this.source():this.source.get();return this.interpolate(e)}interpolate(e){let{input:t,output:i}=this,{extrapolate:r,extrapolateLeft:s,extrapolateRight:o,clamp:a}=this.options;if(t.length===1)return i[0];if(e<t[0]){let m=this.getExtrapolationMode(s,r);if(m==="clamp")e=t[0];else if(m==="identity")return e}else if(e>t[t.length-1]){let m=this.getExtrapolationMode(o,r);if(m==="clamp")e=t[t.length-1];else if(m==="identity")return e}let l=1;for(;l<t.length-1&&e>t[l];)l++;let p=(e-t[l-1])/(t[l]-t[l-1]),u=i[l-1]+p*(i[l]-i[l-1]);if(a){let m=Math.min(...i),c=Math.max(...i);return Math.max(m,Math.min(c,u))}return u}getExtrapolationMode(e,t){return e!==void 0?e:t!==void 0?t:"extend"}};function ce(n,e,t,i){return new U(n,e,t,i)}var F=class{constructor(e,t,i,r={}){this.source=e,this.input=t,this.colors=i.map(s=>this.parseColor(s)),this.options=r;}get(){let e=typeof this.source=="function"?this.source():this.source.get(),{extrapolate:t,extrapolateLeft:i,extrapolateRight:r}=this.options;if(this.input.length===1){let[u,m,c]=this.colors[0];return `rgb(${u}, ${m}, ${c})`}if(e<this.input[0]){let u=i??t??"extend";u==="clamp"?e=this.input[0]:u==="identity"&&(e=this.input[0]);}else if(e>this.input[this.input.length-1]){let u=r??t??"extend";u==="clamp"?e=this.input[this.input.length-1]:u==="identity"&&(e=this.input[this.input.length-1]);}let s=1;for(;s<this.input.length-1&&e>this.input[s];)s++;let o=(e-this.input[s-1])/(this.input[s]-this.input[s-1]),a=this.lerp(this.colors[s-1][0],this.colors[s][0],o),l=this.lerp(this.colors[s-1][1],this.colors[s][1],o),p=this.lerp(this.colors[s-1][2],this.colors[s][2],o);return `rgb(${Math.round(a)}, ${Math.round(l)}, ${Math.round(p)})`}parseColor(e){let t=e.match(/^#([0-9a-f]{3}|[0-9a-f]{6})$/i);if(t){let o=t[1];return o.length===3?[parseInt(o.charAt(0)+o.charAt(0),16),parseInt(o.charAt(1)+o.charAt(1),16),parseInt(o.charAt(2)+o.charAt(2),16)]:[parseInt(o.slice(0,2),16),parseInt(o.slice(2,4),16),parseInt(o.slice(4,6),16)]}let i=e.match(/rgb\((\d+),\s*(\d+),\s*(\d+)\)/i);if(i)return [parseInt(i[1],10),parseInt(i[2],10),parseInt(i[3],10)];let r=e.match(/rgba\((\d+),\s*(\d+),\s*(\d+),\s*[\d.]+\)/i);if(r)return [parseInt(r[1],10),parseInt(r[2],10),parseInt(r[3],10)];let s=e.match(/hsl\((\d+),\s*(\d+)%,\s*(\d+)%\)/i);return s?this.hslToRgb(parseInt(s[1],10),parseInt(s[2],10),parseInt(s[3],10)):[0,0,0]}hslToRgb(e,t,i){if(e=(e%360+360)%360,t=Math.max(0,Math.min(100,t))/100,i=Math.max(0,Math.min(100,i))/100,t===0){let a=Math.round(i*255);return [a,a,a]}let r=(a,l,p)=>(p<0&&(p+=1),p>1&&(p-=1),p<1/6?a+(l-a)*6*p:p<1/2?l:p<2/3?a+(l-a)*(2/3-p)*6:a),s=i<.5?i*(1+t):i+t-i*t,o=2*i-s;return [Math.round(r(o,s,e/360+1/3)*255),Math.round(r(o,s,e/360)*255),Math.round(r(o,s,e/360-1/3)*255)]}lerp(e,t,i){return e+(t-e)*i}};function he(n,e,t,i){return new F(n,e,t,i)}var fe={axis:"both",rubberBand:false,rubberBandFactor:.5,stiffness:200,damping:20,mass:1,restSpeed:.01,restDelta:.01,clamp:false},j=class{constructor(e,t={}){this.enabled=true;this.position={x:0,y:0};this.isDragging=false;this.startPosition={x:0,y:0};this.pointerStart={x:0,y:0};this.lastPosition={x:0,y:0};this.lastTime=0;this.velocity={x:0,y:0};this.onPointerDown=e=>{!this.enabled||e.button!==0||(this.isDragging=true,this.startPosition={...this.position},this.pointerStart={x:e.clientX,y:e.clientY},this.lastPosition={x:e.clientX,y:e.clientY},this.lastTime=performance.now(),this.velocity={x:0,y:0},this.element.setPointerCapture(e.pointerId),this.element.addEventListener("pointermove",this.onPointerMove),this.element.addEventListener("pointerup",this.onPointerUp),this.element.addEventListener("pointercancel",this.onPointerUp),this.config.onDragStart&&this.config.onDragStart(e));};this.onPointerMove=e=>{let t=performance.now(),i=t-this.lastTime;this.velocity={x:(e.clientX-this.lastPosition.x)/Math.max(i,1),y:(e.clientY-this.lastPosition.y)/Math.max(i,1)},this.lastPosition={x:e.clientX,y:e.clientY},this.lastTime=t;let r=this.startPosition.x+(e.clientX-this.pointerStart.x),s=this.startPosition.y+(e.clientY-this.pointerStart.y);this.config.bounds&&(r=this.applyBounds(r,this.config.bounds.left??-1/0,this.config.bounds.right??1/0),s=this.applyBounds(s,this.config.bounds.top??-1/0,this.config.bounds.bottom??1/0)),this.config.axis==="x"?s=0:this.config.axis==="y"&&(r=0),this.position={x:r,y:s},this.config.onDrag&&this.config.onDrag(r,s,e),this.config.onUpdate&&this.config.onUpdate(r,s);};this.onPointerUp=e=>{this.isDragging=false,this.element.releasePointerCapture(e.pointerId),this.element.removeEventListener("pointermove",this.onPointerMove),this.element.removeEventListener("pointerup",this.onPointerUp),this.element.removeEventListener("pointercancel",this.onPointerUp),this.release(this.velocity.x*16,this.velocity.y*16),this.config.onDragEnd&&this.config.onDragEnd(this.position.x,this.position.y,this.velocity);};this.element=e,this.config={...fe,...t};let i={stiffness:this.config.stiffness,damping:this.config.damping,mass:this.config.mass,restSpeed:this.config.restSpeed,restDelta:this.config.restDelta,clamp:this.config.clamp};this.springX=h(0,i),this.springY=h(0,i),this.springX.subscribe(()=>{this.isDragging||(this.position.x=this.springX.get(),this.config.onUpdate&&this.config.onUpdate(this.position.x,this.position.y));}),this.springY.subscribe(()=>{this.isDragging||(this.position.y=this.springY.get(),this.config.onUpdate&&this.config.onUpdate(this.position.x,this.position.y));}),this.setupPointerEvents();}setupPointerEvents(){this.element.addEventListener("pointerdown",this.onPointerDown);}applyBounds(e,t,i){if(!isFinite(t)&&!isFinite(i))return e;let r=isFinite(t)?t:-1/0,s=isFinite(i)?i:1/0;if(this.config.rubberBand){let o=this.config.rubberBandFactor||.5;if(e<r)return r-(r-e)*o;if(e>s)return s+(e-s)*o}return b(e,r,s)}enable(){this.enabled=true;}disable(){this.enabled=false,this.isDragging&&(this.isDragging=false);}isEnabled(){return this.enabled}reset(){this.springX.jump(0),this.springY.jump(0),this.position={x:0,y:0},this.config.onUpdate&&this.config.onUpdate(0,0);}getPosition(){return {...this.position}}setPosition(e,t){this.position={x:e,y:t},this.springX.jump(e),this.springY.jump(t);}release(e,t){if(this.config.bounds){let{left:i=-1/0,right:r=1/0,top:s=-1/0,bottom:o=1/0}=this.config.bounds,a=b(this.position.x,i,r),l=b(this.position.y,s,o);a!==this.position.x&&this.springX.set(a,{velocity:e}),l!==this.position.y&&this.springY.set(l,{velocity:t});}}destroy(){this.element.removeEventListener("pointerdown",this.onPointerDown),this.springX.destroy(),this.springY.destroy();}};function ge(n,e){return new j(n,e)}var de={direction:"vertical",momentum:false,momentumDecay:.95,bounce:false,stiffness:100,damping:10,mass:1,restSpeed:.01,restDelta:.01,clamp:false},X=class{constructor(e,t={}){this.scroll={x:0,y:0};this.target={x:0,y:0};this.isScrolling=false;this.isEnabled=true;this.onWheel=e=>{if(!this.isEnabled)return;this.isScrolling||(this.isScrolling=true,this.config.onScrollStart?.());let t=e.deltaX,i=e.deltaY;if(this.config.direction==="horizontal"?i=0:this.config.direction==="vertical"&&(t=0),this.config.bounce){let r=this.container.scrollWidth-this.container.clientWidth,s=this.container.scrollHeight-this.container.clientHeight;this.target.x+=t,this.target.y+=i,this.target.x<0?this.target.x=-Math.sqrt(-this.target.x)*10:this.target.x>r&&(this.target.x=r+Math.sqrt(this.target.x-r)*10),this.target.y<0?this.target.y=-Math.sqrt(-this.target.y)*10:this.target.y>s&&(this.target.y=s+Math.sqrt(this.target.y-s)*10),e.preventDefault();}else {this.target.x+=t,this.target.y+=i;let r=this.container.scrollWidth-this.container.clientWidth,s=this.container.scrollHeight-this.container.clientHeight;this.target.x=Math.max(0,Math.min(this.target.x,r)),this.target.y=Math.max(0,Math.min(this.target.y,s));}this.startScrollLoop();};this.container=e,this.config={...de,...t};let i={stiffness:this.config.stiffness,damping:this.config.damping,mass:this.config.mass,restSpeed:this.config.restSpeed,restDelta:this.config.restDelta,clamp:this.config.clamp};this.springX=h(0,i),this.springY=h(0,i),this.springX.subscribe(()=>{this.scroll.x=this.springX.get(),this.config.onScroll?.(this.scroll.x,this.scroll.y);}),this.springY.subscribe(()=>{this.scroll.y=this.springY.get(),this.config.onScroll?.(this.scroll.x,this.scroll.y);}),this.setupScrollEvents();}setupScrollEvents(){this.container.addEventListener("wheel",this.onWheel,{passive:false});}startScrollLoop(){this.springX.set(this.target.x),this.springY.set(this.target.y);let e=()=>{Math.abs(this.scroll.x-this.target.x)<.1&&Math.abs(this.scroll.y-this.target.y)<.1&&!this.springX.isAnimating()&&!this.springY.isAnimating()&&this.isScrolling?(this.isScrolling=false,this.config.onScrollEnd?.()):this.isScrolling&&requestAnimationFrame(e);};e();}getScroll(){return {...this.scroll}}scrollTo(e,t){this.target={x:e,y:t},this.springX.set(e),this.springY.set(t);}scrollToElement(e,t=0){let i=this.container.getBoundingClientRect(),r=e.getBoundingClientRect(),s=r.left-i.left+this.scroll.x+t,o=r.top-i.top+this.scroll.y+t;this.scrollTo(s,o);}enable(){this.isEnabled=true;}disable(){this.isEnabled=false;}destroy(){this.container.removeEventListener("wheel",this.onWheel),this.springX.destroy(),this.springY.destroy();}};function be(n,e){return new X(n,e)}function ve(n){if(n.match(/^#([0-9a-f]{3}|[0-9a-f]{6})$/i))return Y(n);let t=n.match(/rgb\((\d+),\s*(\d+),\s*(\d+)\)/i);if(t)return {r:parseInt(t[1],10),g:parseInt(t[2],10),b:parseInt(t[3],10)};let i=n.match(/rgba\((\d+),\s*(\d+),\s*(\d+),\s*[\d.]+\)/i);if(i)return {r:parseInt(i[1],10),g:parseInt(i[2],10),b:parseInt(i[3],10)};let r=n.match(/hsl\((\d+),\s*(\d+)%,\s*(\d+)%\)/i);return r?O(parseInt(r[1],10),parseInt(r[2],10),parseInt(r[3],10)):{r:0,g:0,b:0}}function ye(n,e,t){let i=r=>Math.round(Math.max(0,Math.min(255,r))).toString(16).padStart(2,"0");return `#${i(n)}${i(e)}${i(t)}`}function Y(n){let e=n.replace("#","");return e.length===3?{r:parseInt(e.charAt(0)+e.charAt(0),16),g:parseInt(e.charAt(1)+e.charAt(1),16),b:parseInt(e.charAt(2)+e.charAt(2),16)}:{r:parseInt(e.slice(0,2),16),g:parseInt(e.slice(2,4),16),b:parseInt(e.slice(4,6),16)}}function O(n,e,t){if(n=(n%360+360)%360,e=Math.max(0,Math.min(100,e))/100,t=Math.max(0,Math.min(100,t))/100,e===0){let o=Math.round(t*255);return {r:o,g:o,b:o}}let i=(o,a,l)=>(l<0&&(l+=1),l>1&&(l-=1),l<1/6?o+(a-o)*6*l:l<1/2?a:l<2/3?o+(a-o)*(2/3-l)*6:o),r=t<.5?t*(1+e):t+e-t*e,s=2*t-r;return {r:Math.round(i(s,r,n/360+1/3)*255),g:Math.round(i(s,r,n/360)*255),b:Math.round(i(s,r,n/360-1/3)*255)}}function xe(n,e,t){n=Math.max(0,Math.min(255,n))/255,e=Math.max(0,Math.min(255,e))/255,t=Math.max(0,Math.min(255,t))/255;let i=Math.max(n,e,t),r=Math.min(n,e,t),s=i-r,o=0,a=0;return s!==0&&(a=(i+r)/2>.5?s/(2-i-r):s/(i+r),i===n?o=((e-t)/s+(e<t?6:0))/6:i===e?o=((t-n)/s+2)/6:o=((n-e)/s+4)/6),{h:Math.round(o*360),s:Math.round(a*100),l:Math.round((i+r)/2*100)}}var v=class{constructor(e,t={}){this._velocity=0;this._subscribers=new Set;this._eventListeners=new Map;this._springValue=null;this._isAnimating=false;this._destroyed=false;this._value=e,this._springConfig=t.spring??{stiffness:100,damping:15},typeof e=="number"&&(this._springValue=h(e,{...this._springConfig,onUpdate:i=>{this._destroyed||(this._value=i,this._velocity=this._springValue?.getVelocity()??0,this._notify());}}));}get(){return this._value}getVelocity(){return this._velocity}isAnimating(){return this._isAnimating}set(e,t=true){if(!this._destroyed)if(typeof e=="number"&&this._springValue&&t){this._isAnimating=true,this._emit("animationStart"),this._springValue.set(e);let i=()=>{this._springValue&&Math.abs(this._springValue.getVelocity())<.01?(this._isAnimating=false,this._emit("animationEnd")):this._isAnimating&&requestAnimationFrame(i);};requestAnimationFrame(i);}else this._value=e,this._velocity=0,this._notify();}jump(e){this._destroyed||(this._value=e,this._velocity=0,typeof e=="number"&&this._springValue&&this._springValue.jump(e),this._isAnimating=false,this._notify());}stop(){this._springValue&&this._springValue.jump(this._springValue.get()),this._isAnimating=false,this._emit("animationEnd");}subscribe(e){return this._subscribers.add(e),e(this._value),()=>{this._subscribers.delete(e);}}on(e,t){return this._eventListeners.has(e)||this._eventListeners.set(e,new Set),this._eventListeners.get(e).add(t),()=>{this._eventListeners.get(e)?.delete(t);}}setConfig(e){this._springConfig={...this._springConfig,...e};}destroy(){this._destroyed=true,this._subscribers.clear(),this._eventListeners.clear(),this._springValue&&(this._springValue.destroy(),this._springValue=null);}_notify(){this._subscribers.forEach(e=>{try{e(this._value);}catch(t){console.error("MotionValue subscriber error:",t);}}),this._emit("change");}_emit(e){this._eventListeners.get(e)?.forEach(t=>{try{t();}catch(i){console.error(`MotionValue ${e} listener error:`,i);}});}};function Se(n,e){return new v(n,e)}function $(n,e){let t=new v(e(n.get()));return n.subscribe(i=>{t.jump(e(i));}),t}function Ce(n,e,t,i={}){let[r,s]=e,[o,a]=t;return $(n,l=>{let p=(l-r)/(s-r);return i.clamp&&(p=Math.max(0,Math.min(1,p))),o+p*(a-o)})}export{S as AnimationState,v as MotionValue,x as calculateDampingRatio,N as calculatePeriod,b as clamp,re as clearWarnings,z as configFromBounce,G as configFromDuration,ge as createDragSpring,Se as createMotionValue,be as createScrollSpring,se as createSpringGroup,h as createSpringValue,ue as createTrail,pe as decay,te as degToRad,g as globalLoop,Y as hexToRgb,O as hslToRgb,ce as interpolate,he as interpolateColor,J as isCriticallyDamped,Q as isOverdamped,K as isUnderdamped,Z as lerp,ee as mapRange,Ce as motionMapRange,ae as parallel,ve as parseColor,ie as radToDeg,ye as rgbToHex,xe as rgbToHsl,oe as sequence,T as simulateSpring,_ as spring,q as springPresets,le as stagger,$ as transformValue,w as validateDecayConfig,ne as validateDragConfig,D as validateSpringConfig};//# sourceMappingURL=index.mjs.map
//# sourceMappingURL=index.mjs.map